[TOC]

## class 1 PCA&Downsampling&Filtering

### 1.Introduction

+ **ç‚¹äº‘è¡¨ç¤º**

  Nx3çš„çŸ©é˜µï¼Œæˆ–è€…Nx(3+D)çš„çŸ©é˜µï¼ŒDï¼šç‚¹çš„é¢å¤–ç‰¹å¾

  ![image-20210624102523853](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624102523853.png)

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624141954230.png" alt="image-20210624141954230" style="zoom:80%;" />

+ **ç‚¹äº‘è·å–è®¾å¤‡**
  + lidar
  + RGB-D
  + CAD Models
  + Depth from Images

+ **ç‚¹äº‘çš„åº”ç”¨é¢†åŸŸ**

  + æœºå™¨äººï¼Œè‡ªåŠ¨é©¾é©¶
    + å®šä½ï¼šSLAMï¼Œé—­ç¯æ£€æµ‹ï¼Œç‚¹äº‘åŒ¹é…
    + æ„ŸçŸ¥ï¼šç›®æ ‡æ£€æµ‹ï¼Œåˆ†ç±»
    + ä¸‰ç»´é‡å»º
  + æ¶ˆè´¹è®¾å¤‡
    + äººè„¸è¯†åˆ«(Face Id)
    + æ‰‹åŠ¿è¯†åˆ«
    + ä½“æ€è¯†åˆ«

+ **3Dä¿¡æ¯çš„å…¶ä»–è¡¨ç¤ºå½¢å¼**

  + Mesh  æ™®éåº”ç”¨åœ¨æ¸¸æˆé¢†åŸŸï¼Œæœºå™¨äººé¢†åŸŸä¸å¸¸ç”¨

  + Voxel Grid

  + Octree

    ![image-20210624105228980](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624105228980.png)

+ **ç‚¹äº‘è¡¨ç¤ºçš„ä¼˜ç‚¹**
  + æ•°å­¦ä¸Šè¡¨ç¤ºç®€å•
  + å«æœ‰3Dä¿¡æ¯
  
+ **ç‚¹äº‘è¡¨ç¤ºçš„ç¼ºç‚¹**
  + **ç¨€ç–**			ä»æ¿€å…‰é›·è¾¾é‡‡é›†çš„ç‚¹äº‘ï¼Œè¿œå¤„çš„ç‚¹å¾ˆç¨€ç–ï¼Œè¿‘å¤„çš„ç‚¹å¾ˆå¯†é›†
  + **æ²¡æœ‰è§„å¾‹**     æ— æ³•åƒå›¾åƒé‚£æ ·ç®€å•çš„æœ€è¿‘é‚»æœç´¢
  + **æ²¡æœ‰çº¹ç†ä¿¡æ¯**
  + **æ— åº**             å¾ˆéš¾ä½¿ç”¨æ·±åº¦å­¦ä¹ 
  + **æ—‹è½¬ä¸å˜**

### 2.Principle Component Analysis(PCA)

|                           ä¸‰ç»´PCA                            |                           äºŒç»´PCA                            |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
| ![image-20210624111931728](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624111931728.png) | ![image-20210624112039495](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624112039495.png) |

+ **ä½¿ç”¨PCAæ‰¾åˆ°ç‚¹äº‘çš„ä¸»æ–¹å‘**

+ **PCAçš„åº”ç”¨**

  + é™ç»´
  + æ›²é¢**æ³•å‘é‡ä¼°è®¡**
  + å…³é”®ç‚¹æ£€æµ‹
  + ç‰¹å¾æå–

+ **ä¸€äº›æ¦‚å¿µ**

  + å‘é‡ç‚¹ä¹˜ï¼Œå°±æ˜¯ä¸€ä¸ªå‘é‡æŠ•å½±åˆ°å¦ä¸€ä¸ªå‘é‡ä¸Šçš„é•¿åº¦

    ![image-20210624112921262](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624112921262.png)

  + çŸ©é˜µå‘é‡ç›¸ä¹˜ï¼Œ  çº¿æ€§åŠ å’Œ

    ![image-20210624113027452](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624113027452.png)

  + **çŸ©é˜µçš„SVDåˆ†è§£**

    $M=U*\Sigma*V^*$,å…¶ä¸­ï¼Œ$U,V^*$æ˜¯æ­£äº¤çŸ©é˜µï¼ˆæ—‹è½¬çŸ©é˜µï¼‰ï¼Œ$\Sigma$æ˜¯å¯¹è§’é˜µï¼Œå…ƒç´ æ˜¯$M$çš„ç‰¹å¾å€¼çš„å¹³æ–¹æ ¹ï¼ŒæŒ‰ç…§ä»å¤§åˆ°å°çš„é¡ºåºæ’åˆ—ï¼›

    å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸€ä¸ªåœ† ç»è¿‡ä¸€ä¸ª$M$å¤„ç†ï¼Œå°±æ˜¯ï¼Œå…ˆç»è¿‡ä¸€ä¸ª$V^*$,åšä¸€ä¸ªæ—‹è½¬ï¼Œç»è¿‡ä¸€ä¸ª$\Sigma$,å„ä¸ªç»´åº¦ä¸Šçš„ä¸€ä¸ªç¼©æ”¾ï¼Œåœ†å˜æˆäº†æ¤­åœ†ï¼Œæœ€åç»è¿‡ä¸€ä¸ª$U$ï¼Œæ—‹è½¬ä¸€ä¸‹ï¼Œå¾—åˆ°æœ€åçš„ç»“æœ

    ![image-20210624113055849](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624113055849.png)

+ **è°±å®šç†Spectral Theorem**

  å¯¹é˜µçŸ©é˜µAçš„åˆ†è§£

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624114247466.png" alt="image-20210624114247466" style="zoom: 80%;" />

+ **ç‘ä¸½å•†Rayleigh Quotients**

  ![image-20210624114619153](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624114619153.png)

  â€‹	æ ¹æ®SVDçš„é‚£ä¸ªè§£é‡Šå›¾ï¼Œç‘ä¸½å•†è¡¨ç¤ºå¯¹ç§°çŸ©é˜µAå¯ä»¥æŠŠxç¼©æ”¾å¤šå°‘å€ï¼Œæœ€å¤§ç‰¹å¾å€¼å€åˆ°æœ€å°ç‰¹å¾å€¼å€

+ **PCA**

   **è¯æ˜è¿‡ç¨‹ä¹Ÿå¯ä»¥çœ‹æœºå™¨å­¦ä¹ è¯¾ç¨‹ç¬”è®°ï¼ˆnotes/pdf_notes)**

  + **Input:**  $x_i\in R^n,i=1,2,3,...,m$

  + **output**ï¼š ä¸»æˆåˆ†å‘é‡ $z_1,z_2,...,z_k\in R^n,k<=n$

  + **Qï¼šå“ªäº›æ˜¯æœ€ä¸»è¦çš„æˆåˆ†ï¼Ÿ**

    **Aï¼šæŠŠæ•°æ®æŠ•å½±åˆ°è¿™ä¸ªæ–¹å‘ä¸Šï¼Œæ–¹å·®æœ€å¤§çš„å°±æ˜¯æœ€ä¸»è¦çš„æˆåˆ†**

  + **Qï¼šæ€æ ·è·å–ç¬¬äºŒã€ç¬¬ä¸‰é‡è¦çš„æˆåˆ†ï¼Ÿ**

    **Aï¼šå°†ç¬¬ä¸€ä¸»æˆåˆ†å»æ‰ï¼Œå†æ‰¾ä¸€æ¬¡ä¸»æˆåˆ†ï¼Œå¾—åˆ°ç¬¬äºŒä¸»æˆåˆ†ï¼Œä»¥æ­¤ç±»æ¨**

  + ä¸‹é¢ä¼šæœ‰è¯¦ç»†è§£é‡Š

+ **Principle Component Analysis - Proof**

  + å°†æ•°æ®åšå½’ä¸€åŒ–å¤„ç†ï¼Œå› ä¸ºåªå…³å¿ƒæ•°æ®çš„æ–¹å‘ï¼Œå’Œä¸­å¿ƒç‚¹æ— å…³

    ![image-20210624143249475](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624143249475.png)

  + PCAå°±æ˜¯æ‰¾åˆ°ä¸€ä¸ªæ–¹å‘$z\in R^n,||z||_2=1$ï¼ŒæŠ•å½±ä¹‹åæ–¹å·®æœ€å¤§, æ‰€ä»¥å…ˆæŠ•å½±ï¼Œå¾—åˆ°$\alpha_i$ï¼ˆæ ‡é‡ï¼‰

    <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624143533461.png" alt="image-20210624143533461" style="zoom:80%;" />

  + æŠ•å½±ä¹‹åè®¡ç®—æ–¹å·®ï¼ˆå½’ä¸€åŒ–å,å‡å€¼ä¸º0ï¼‰ï¼Œå†™æˆçŸ©é˜µå½¢å¼

    <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624143658054.png" alt="image-20210624143658054" style="zoom:80%;" />

  + æœ€å¤§åŒ–è¿™ä¸ªæ–¹å·®

    â€‹							![image-20210624143750851](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624143750851.png)

  + è°ƒç”¨ç‘ä¸½å•†å…¬å¼

    ![image-20210624144534332](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624144534332.png)

  + è°ƒç”¨è°±å®šç†

    <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624144614703.png" alt="image-20210624144614703" style="zoom: 80%;" />

  + åº”ç”¨åˆ°PCA

    <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624144722751.png" alt="image-20210624144722751" style="zoom:80%;" />

+ **PCA - Summary**

  + ç»™å®šæ•°æ® $x_i\in R^n,i=1,2,3,...,m$ï¼Œ==**PCAçš„æµç¨‹**==

    1. å½’ä¸€åŒ–

       ![image-20210624145341995](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624145341995.png)

    2. è®¡ç®—åæ–¹å·®çŸ©é˜µç„¶åå¯¹å…¶è¿›è¡ŒSVDåˆ†è§£ 

       ![image-20210624145426875](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624145426875.png)

    3. ä¸»æ–¹å‘æ˜¯$U_r$çš„åˆ—å‘é‡,å‰nåˆ—ï¼Œå°±æ˜¯å‰nä¸ªä¸»æ–¹å‘ï¼ˆEigenvector of ğ‘‹ = Eigenvector of ğ»ï¼‰

  + **PCAå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ¢åŸºåº•çš„è¿‡ç¨‹**

+ **PCA - é™ç»´**

  ç»™å®šæ•°æ®$x_i\in R^n,i=1,2,3,...,m$ï¼Œä½¿ç”¨PCAæå–å‡ºæ¥$l$ä¸ªä¸»æˆåˆ†${z_1,z_2,...,z_l},z_j\in R^n$

  + å°†æ•°æ®$x_i$çš„ç»´åº¦ä»$n$ç»´é™åˆ°$l$ç»´ï¼Œ$l<<n$

  + é™ç»´æ˜¯ä¸€ä¸ªç¼–ç è¿‡ç¨‹

    Encoder 

    ![image-20210624154723204](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624154723204.png)

  + ä»ä¸»æˆåˆ†ä¸­**æ¢å¤åŸæ•°æ®**ï¼Œé‡å»º$x_i$,æ˜¯ä¸€ä¸ªè§£ç è¿‡ç¨‹

    Decoder

    ![image-20210624154945469](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624154945469.png)

    ä¼šæœ‰æŸå¤±

    ![image-20210624155847658](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624155847658.png)

  + ä¸€äº›ä¾‹å­

    ç¬¬ä¸€ä¸ªä¸»æˆåˆ† ç¬¬äºŒä¸ªä¸»æˆåˆ†  çš„ å¯¹æ¯”

    ![image-20210624155406697](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624155406697.png)

### 3.Kernal PCA æ ¸PCA

**PCAä¼˜ç‚¹ï¼š**

1. æ— å‚æ•°
2. æ˜“äºè®¡ç®—
3. æ²¡æœ‰å±€éƒ¨æœ€ä¼˜

**PCAå±€é™ï¼š**

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624160453407.png" alt="image-20210624160453407" style="zoom:80%;" />

1. åªé€‚åº”äºçº¿æ€§é™ç»´

   æ˜¯çŸ©é˜µç›¸ä¹˜ï¼Œæ˜¯å¯¹åŸå§‹æ•°æ®çš„åˆ—çš„çº¿æ€§ç»„åˆï¼Œåªèƒ½å¤„ç†çº¿æ€§å¯åˆ†çš„æ•°æ®ï¼Œæ— æ³•å¤„ç†éçº¿æ€§æ•°æ®,ä¸èƒ½æŠŠä¸Šå›¾çº¢è‰²å’Œç»¿è‰²åˆ†å¼€

2. è®¡ç®—æ•ˆç‡ä½

   <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624160214898.png" alt="image-20210624160214898" style="zoom:80%;" />

**ä½¿ç”¨æ ¸å‡½æ•°æŠŠéçº¿æ€§è½¬æ¢æˆçº¿æ€§å¯åˆ†**

==[è¯æ˜è¿‡ç¨‹æ²¡çœ‹]==

+ å¸¸ç”¨çš„æ ¸å‡½æ•°

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624163959798.png" alt="image-20210624163959798" style="zoom:80%;" />

+ æ ¸å‡½æ•°çš„é€‰æ‹©ï¼šä¸€èˆ¬æƒ…å†µä¸‹åªèƒ½å®éªŒï¼Œé™¤éäº‹å…ˆçŸ¥é“åŸå§‹æ•°æ®çš„åˆ†å¸ƒ

+ **æ ¸PCAæµç¨‹**

+ æœ¬è´¨ä¸Šæ˜¯æŠŠé«˜ç»´ç©ºé—´çš„è¿ç®—è½¬æ¢ä¸ºä¸€ä¸ª**æ ¸å‡½æ•°**

  1. é€‰æ‹©ä¸€ä¸ªæ ¸å‡½æ•°$k(x_i,x_j)$,è®¡ç®—Gram Matrix$K(i,j)=k(x_i,x_j)$

  2. å½’ä¸€åŒ–$K$

     <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624170502398.png" alt="image-20210624170502398" style="zoom:80%;" />

  3. è®¡ç®—ç‰¹å¾å€¼ï¼Œç‰¹å¾å‘é‡

     ![image-20210624170815225](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624170815225.png)

  4. å½’ä¸€åŒ–$\alpha_r$ï¼Œä½¿å¾—$\alpha_r^T\alpha_r=\frac{1}{\lambda _r}$

  5. å¯¹äºä»»æ„çš„æ•°æ®ç‚¹$x\in R^n$ï¼Œè®¡ç®—æŠŠå®ƒæŠ•å½±åˆ°ç¬¬$r$ä¸ªä¸»æˆåˆ†ä¸Šçš„ç»“æœ$y_r$

     ![image-20210624171650298](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624171650298.png)

### 4.è¡¨é¢æ³•å‘é‡

+ **è¡¨é¢æ³•çº¿**

  åœ¨pç‚¹å¤„å‚ç›´äºåˆ‡é¢çš„å‘é‡

  ![image-20210624172330076](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624172330076.png)

  ![image-20210624193037040](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624193037040.png)

+ **æ³•å‘é‡çš„åº”ç”¨**
  + ç‚¹äº‘èšç±»ã€åˆ†å‰²
  + **å¹³é¢æ£€æµ‹**
  + ç‰¹å¾æå–

+ **è®¡ç®—æ³•å‘é‡çš„æ–¹æ³•**
  
  1. é€‰æ‹©ä¸€ä¸ªç‚¹ p
  
  2. æ‰¾åˆ°è¿™ä¸ªç‚¹çš„ä¸€ä¸ªé¢†åŸŸ
  
3. å¯¹é‚»åŸŸå†…çš„ç‚¹åšä¸€ä¸ªPCA
  
  4. PCAåï¼Œ**æœ€å°ç‰¹å¾å€¼å¯¹åº”çš„ç‰¹å¾å‘é‡ï¼Œå°±æ˜¯æ³•å‘é‡**
  
  5. è®¡ç®—æ›²ç‡ï¼Œé‚»åŸŸç‰¹å¾å€¼$\lambda_1>\lambda_2>\lambda_3$ï¼Œæ›²ç‡$curvature=\lambda_3/(\lambda_1+\lambda_2+\lambda_3)$
  
     æ›²ç‡è¶Šå¤§,è¡¨æ˜é‚»åŸŸçš„èµ·ä¼å˜åŒ–è¶Šå¤§,è¶Šå°è¡¨æ˜é‚»åŸŸè¶Šå¹³å¦

+ **æ³•å‘é‡çš„å®šå‘**

  ![image-20210626144636610](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210626144636610.png)

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210626144851946.png" alt="image-20210626144851946" style="zoom:80%;" />

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210626144929750.png" alt="image-20210626144929750" style="zoom:80%;" />

+ **Surface Normal Estimation**

  ä¸Šé¢è¯´çš„æ˜¯ä¸€èˆ¬çš„æ³•å‘é‡è®¡ç®—ï¼Œä½†æ˜¯é‡‡é›†åˆ°çš„ç‚¹äº‘æ˜¯æœ‰å¾ˆå¤šå™ªå£°çš„ï¼Œ**æ€æ ·å¤„ç†å™ªå£°å‘¢ï¼Ÿ**
  
  1. æ ¹æ®é—®é¢˜çš„ä¸åŒé€‰æ‹©é‚»åŸŸçš„å¤§å°
  
     1. æ›´å¤§çš„é‚»åŸŸ->æ³•å‘é‡çš„ä¼°è®¡æ›´åŠ å¹³æ»‘ï¼Œä½†æ˜¯ä¼šå—åˆ°ä¸€äº›æ— å…³ç‰©ä½“çš„å½±å“ï¼Œä¸€äº›ç²¾ç»†éƒ¨ä½çš„æ³•å‘é‡æå–ä¸å‡ºæ¥
     2. æ›´å°çš„é‚»åŸŸ->æ³•å‘é‡çš„ä¼°è®¡æ›´åŠ å°–é”ï¼Œå¯ä»¥æå–ç²¾ç»†éƒ¨ä½çš„æ³•å‘é‡ï¼Œä½†æ˜¯ä¼šå—åˆ°å™ªå£°çš„å½±å“
  
  2. Weighted based on other features æ ¹æ®å…¶ä»–ç‰¹å¾ä¿¡æ¯æ¥é€‰æ‹©é‚»åŸŸ  
  
     a. lidar intensity 
  
     b. RGB values
  
     é€‰æ‹©é‚»åŸŸçš„æ—¶å€™ï¼Œåªé€‰æ‹©å’Œè‡ªèº«ç‰¹å¾æ¯”è¾ƒåƒçš„ç‚¹
  
  3. **RANSAC**
  
  4. Deep Learning

```C++
/* PCL ä¸­ æå–æ³•å‘é‡ */
// è¯»å–ç‚¹äº‘æ•°æ®
set_input_pcd();
// è®¡ç®—æ³•çº¿
clock_t start_time, finish_time;
start_time  = clock();
pcl::NormalEstimationOMP<pcl::PointXYZ, pcl::Normal> normal_exactor;
// æ³•çº¿
pcl::PointCloud<pcl::Normal>::Ptr normals(new pcl::PointCloud<pcl::Normal>);
// å»ºç«‹kdtree è¿›è¡Œ é‚»è¿‘ç‚¹æœç´¢
pcl::search::KdTree<pcl::PointXYZ>::Ptr kd_tree(new pcl::search::KdTree<pcl::PointXYZ>());
normal_exactor.setNumberOfThreads(20);   // è®¾ç½®openMPçš„çº¿ç¨‹æ•°
normal_exactor.setViewPoint(0, 0, 0); // è®¾ç½®è§†ç‚¹,é»˜è®¤ä¸º(0,0,0)
normal_exactor.setInputCloud(filtered_pcd_);  // è®¾ç½®è¾“å…¥ç‚¹äº‘
normal_exactor.setSearchMethod(kd_tree);   // è®¾ç½®æœ€è¿‘ç‚¹æœç´¢ç®—æ³•
normal_exactor.setKSearch(10);             // k,the number of k-nearest neighbors
// the sphere radius used as the maximum distance to consider a point a neighbor
//    normal_exactor.setRadiusSearch(0.03);       // åŠå¾„æœç´¢
normal_exactor.compute(*normals);           // å¼€å§‹æ³•å‘é‡è®¡ç®—
```

### 5.Filters

#### 5.1 Noise removal

##### 5.1.1 Radius Outlier Removal(ROR)

![image-20210624231354407](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624231354407.png)



1. å¯¹äºæ¯ä¸€ä¸ªç‚¹ï¼Œæ‰¾åˆ°å®ƒ åŠå¾„ä¸ºr  çš„ä¸€ä¸ªé‚»åŸŸ
2. å¦‚æœé‚»åŸŸå†…çš„ç‚¹æ•°$k<k^*$, å°±è®¤ä¸ºè¿™ä¸ªç‚¹æ˜¯å™ªå£°ç‚¹ï¼Œå°†å…¶å»é™¤

##### 5.1.2 Statistical Outlier Removal(SOR)

æ˜¯RORçš„å‡çº§ç‰ˆ

1. éå†æ¯ä¸€ä¸ªç‚¹ï¼Œæ‰¾åˆ°å®ƒçš„ä¸€ä¸ªé‚»åŸŸ

2. è®¡ç®—è¿™ä¸ªç‚¹åˆ°å®ƒé‚»åŸŸå†…ç‚¹çš„è·ç¦»$d_{i,j},i=[1,2,..,m],j=[1,2,...,n]$ï¼Œiï¼šè‡ªå·±ï¼Œjï¼šé‚»åŸŸå†…çš„å…¶ä»–ç‚¹

3. å°†è¿™äº›è·ç¦»ç”¨ä¸€ä¸ª**é«˜æ–¯åˆ†å¸ƒ**å»è¡¨ç¤ºï¼Œ$d\sim N(\mu,\sigma)$

   ![image-20210624232839798](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624232839798.png)

4. å†æ¬¡éå†æ¯ä¸€ä¸ªç‚¹ï¼Œè®¡ç®—å®ƒåˆ°é‚»åŸŸå†…æ¯ä¸€ä¸ªç‚¹çš„å¹³å‡è·ç¦»

5. æ ¹æ®3ä¸­å¾—åˆ°çš„é«˜æ–¯åˆ†å¸ƒï¼Œå¦‚æœè¿™ä¸ªå¹³å‡è·ç¦»è¶…è¿‡äº†è¿™ä¸ªé«˜æ–¯åˆ†å¸ƒçš„$3\sigma$èŒƒå›´ï¼Œå°±è®¤ä¸ºè¿™ä¸ªç‚¹æ˜¯å™ªç‚¹ï¼Œå°†å…¶å»é™¤ï¼Œå…·ä½“çš„ï¼š

   <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624233209526.png" alt="image-20210624233209526" style="zoom:80%;" />

+ SORç»“æœ

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624233240319.png" alt="image-20210624233240319" style="zoom:80%;" />

#### 5.2 Voxel Grid Downsampling

**æ€»ä½“æµç¨‹**

1. å»ºç«‹ä¸€ä¸ªåŒ…å«æ‰€æœ‰ç‚¹äº‘çš„voxel grid
2. åœ¨æ¯ä¸€ä¸ªvoxelä¸­åªé€‰æ‹©ä¸€ä¸ªç‚¹ï¼Œè¿™æ ·å°±å®Œæˆäº†é™é‡‡æ ·

**æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š**

1. åœ¨æ¯ä¸€ä¸ªvoxelä¸­ï¼Œæ€æ ·å»é€‰ç‚¹
2. ç®—æ³•æ€æ ·æ›´åŠ é«˜æ•ˆ

**é€‰ç‚¹ç­–ç•¥ï¼š**

1. Centroid é€‰æ‹©è´¨å¿ƒ

   a. å¯¹äºx,y,zåæ ‡ï¼Œè®¡ç®—ç‚¹çš„å¹³å‡å€¼

   b. å¯¹äºå…¶ä»–å±æ€§ï¼Œæ¯”å¦‚è¯­ä¹‰ä¿¡æ¯ï¼Œé‡‡ç”¨æŠ•ç¥¨çš„æ–¹å¼å–å¹³å‡

   c. å¾—åˆ°ä¸€ä¸ªvoxelçš„è´¨å¿ƒæ¥é™é‡‡æ ·ï¼Œè¿™ç§æ–¹æ³•æ›´åŠ ç²¾å‡†ï¼Œä½†æ˜¯é€Ÿåº¦æ…¢

2. Random select éšæœºé€‰æ‹©

   a. åœ¨voxelä¸­éšæœºé€‰æ‹©ä¸€ä¸ªç‚¹è¿›è¡Œé™é‡‡æ ·

   b. ä¸æ˜¯å¾ˆç²¾ç¡®ï¼Œä½†æ˜¯é€Ÿåº¦å¿«

**ä¸€èˆ¬çš„Voxel Grid Downsamplingæµç¨‹**

1. è®¡ç®—ç‚¹é›†$\{p_1,p_2,...,p_N\}$çš„ä¸‰ä¸ªè½´çš„æœ€å¤§æœ€å°å€¼

   $x_{max}=max\{x_1,x_2,...,x_N\},x_{min}=min\{x_1,x_2,...,x_N\},y_{max}=...$	

2. æŒ‡å®švoxel gridçš„åˆ†è¾¨ç‡$r$ï¼Œæ¯ä¸€ä¸ªvoxelçš„å¤§å°

3. è®¡ç®—voxel grid ä¸‰ä¸ªè½´çš„å°ºåº¦
   $$
   D_x=(x_{max}-x_{min})/r \\
   D_y=(y_{max}-y_{min})/r \\
   D_z=(z_{max}-z_{min})/r 
   $$

4. è®¡ç®—æ¯ä¸€ä¸ªç‚¹çš„`voxel index`ï¼š $h$
   $$
   h_x=\lfloor(x-x_{min})/r\rfloor\\
   h_y=\lfloor(y-y_{min})/r\rfloor\\
   h_z=\lfloor(z-z_{min})/r\rfloor\\
   h=h_x+h_y*D_x+h_z*D_x*D_y
   $$
   
5. æ ¹æ®ç¬¬4æ­¥ä¸­è®¡ç®—å‡ºçš„ç‚¹çš„indexè¿›è¡Œæ’åº(pclä¸­å°±æ˜¯è¿™ä¹ˆå®ç°çš„)ï¼Œegï¼š`0,0,1,,2,2,2,8,8,8,8,...`
6. éå†æ’åºè¿‡çš„ç‚¹ï¼Œæ ¹æ®Centroid/Randomç­–ç•¥é€‰ç‚¹ï¼Œå°±å®Œæˆäº†voxel grid downsampling

**éœ€è¦æ³¨æ„çš„å‡ ä¸ªé—®é¢˜**

![image-20210625181503079](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210625181503079.png)

+ æœ‰æ—¶å€™ï¼Œvoxel grid çš„å°ºåº¦æ˜¯å¾ˆå¤§çš„ï¼Œå¯¼è‡´æœ‰äº›ç‚¹è®¡ç®—å‡ºçš„indexä¼šéå¸¸å¤§ï¼Œè¶…è¿‡`int32`çš„èŒƒå›´ï¼Œè¿™æ—¶å€™ï¼Œå°±éœ€è¦ä½¿ç”¨`int64`ç±»å‹çš„æ•´å‹å˜é‡æ¥å­˜å‚¨index


**Voxel Grid Downsampling â€“ Approximated**

æ€æ ·åŠ é€Ÿvoxel grid downsampling çš„è¿‡ç¨‹?

+ ç²¾ç¡®çš„voxel grid ä¸‹é‡‡æ ·éœ€è¦ä¸€ä¸ªæ’åºæ“ä½œ,æ—¶é—´å¤æ‚åº¦æ˜¯O(N*log(N))
+ å¤§å¤šæ•°voxelä¸­éƒ½æ˜¯æ²¡æœ‰ç‚¹çš„
+ eg: N=10000ä¸ªç‚¹,æˆ‘ä»¬çŸ¥é“åœ¨é™é‡‡æ ·åçš„ç‚¹æ•°M<100,æ¯”å¦‚,95
+ å‡è®¾æœ‰ä¸€ä¸ªç¥å¥‡çš„å‡½æ•°,å¯ä»¥æŠŠè¿™10000ä¸ªç‚¹æ˜ å°„åˆ°100ä¸ªå®¹å™¨ä¸­
+ æœ€å,æˆ‘ä»¬åªè¦ä»è¿™100ä¸ªå®¹å™¨é‡Œé¢æå–ç‚¹å°±è¡Œäº†,ç†æƒ³æƒ…å†µä¸‹,è¿˜æœ‰95ä¸ªéç©ºçš„å®¹å™¨,æœ‰5ä¸ªå®¹å™¨æ˜¯ç©ºçš„

+ è¿™ä¸ªç¥å¥‡çš„å‡½æ•° ,å®ç°äº†é™é‡‡æ ·çš„è¿‡ç¨‹,æŠŠ10000ä¸ªç‚¹æ”¾åˆ°100ä¸ªå®¹å™¨é‡Œé¢,  å¯ä»¥ ä½¿ç”¨ **å“ˆå¸Œè¡¨** æ¥æ¨¡æ‹Ÿ

**ä½¿ç”¨å“ˆå¸Œè¡¨çš„voxel grid é™é‡‡æ ·æµç¨‹:**

1. è®¡ç®—ä¸‰ä¸ªåæ ‡è½´çš„æœ€å¤§æœ€å°å€¼
2. æŒ‡å®šæ¯ä¸€ä¸ªvoxelçš„å¤§å°   r
3. è®¡ç®—voxel grid ä¸‰ä¸ªç»´åº¦çš„å¤§å°
4. éå†æ¯ä¸€ä¸ªç‚¹,è®¡ç®—voxel index: h
5. ä½¿ç”¨ä¸€ä¸ªå“ˆå¸Œå‡½æ•°å°†è¿™ä¸ªvoxel index æ˜ å°„åˆ°Mä¸ªå®¹å™¨ä¸­çš„ä¸€ä¸ª$G_i\in \{G_i,G_2,..,G_M\}$
6. éå†$\{G_i,G_2,..,G_M\}$, å¾—åˆ°Mä¸ªç‚¹

+ å“ˆå¸Œå‡½æ•°
  $$
  hash(h_x,h_y,h_z):R^3\to R
  $$
  
+ ç»å¸¸ä½¿ç”¨çš„ä¸€ä¸ªå“ˆå¸Œå‡½æ•°(å–ä½™)

$$
hash(h_x,h_y,h_z)=(h_x+h_y*D_X+h_x*D_x*D_y) \% \ M
$$

â€‹		ç»è¿‡è¿™ä¸ªå“ˆå¸Œå‡½æ•°,å¾—åˆ°çš„å€¼ä¸€å®šåœ¨[0,M]

+ **è¿™ä¸ªå“ˆå¸Œå‡½æ•°ä¸æ˜¯å®Œç¾çš„**,ä¼šå‘ç”Ÿconflict  å†²çªç°è±¡

  + ä¸åŒçš„voxel index ä¼šæ˜ å°„æˆ ç›¸åŒçš„å€¼

    $hash(h_x,h_y,h_z)=hash(h_x^\prime,h_y^\prime,h_z^\prime)$,ä½†æ˜¯$h_x\not =h_x^\prime,h_y\not =h_y^\prime,h_z\not =h_z^\prime $,ä¸åœ¨ç©ºé—´ä¸­ä¸´è¿‘çš„åœ°æ–¹

  + åŸå› :

    è¿™10000ä¸ªç‚¹æŒ‰ç†æ¥è¯´åº”è¯¥å¡«æ»¡95ä¸ªå®¹å™¨,ä½†æ˜¯å®é™…ä¸Šåªå¡«å……äº†80,å…¶ä»–çš„ç‚¹å¡«åˆ°äº†å®ƒä¸è¯¥å‘†çš„åœ°æ–¹

+ å¤„ç†å†²çªçš„æ–¹æ³•
  + æ£€æµ‹åˆ°å†²çª
  + æŠŠå†²çªå®¹å™¨ä¸­çš„ç‚¹é‡Šæ”¾,å³ä»å®¹å™¨ä¸­é€‰æ‹©ä¸€ä¸ªç‚¹ä½œä¸ºé™é‡‡æ ·çš„è¾“å‡º,æ¸…ç©ºè¿™ä¸ªå®¹å™¨(ç‚¹æ•°ç½®é›¶)
  + æŠŠæ–°çš„ç‚¹æ”¾åˆ°è¿™ä¸ªå®¹å™¨ä¸­
+ å°‘äº†æ’åºè¿‡ç¨‹,æ¯”æ™®é€šçš„voxel grid downsamplingå¿«5å€å·¦å³,å› ä¸ºä¼šæœ‰å†²çªç°è±¡,æ‰€ä»¥æœ€åé™é‡‡æ ·çš„ç»“æœä¼šæ¯”æ™®é€šçš„voxelgrid downsamplingè¦å¤š

+ **pcl ä»£ç **

  ```C++
  clock_t start_time, finish_time;
  start_time  = clock();
  printf("origin points size: %d...\n", input_pcd_->points.size());
  pcl::ApproximateVoxelGrid<pcl::PointXYZ> approximate_voxel_filter;
  approximate_voxel_filter.setLeafSize(0.1, 0.1, 0.1);
  approximate_voxel_filter.setInputCloud(input_pcd_);
  approximate_voxel_filter.filter(*filtered_pcd_);
  finish_time = clock();
  double cost_time = (double)(finish_time - start_time) / CLOCKS_PER_SEC * 1000.0;
  ```

  ```C++
  // pcl é™é‡‡æ ·å®ç°ä»£ç 
  pcl::ApproximateVoxelGrid<PointT>::applyFilter (PointCloud &output)
  {
    int centroid_size = 4;
    if (downsample_all_data_)
      centroid_size = boost::mpl::size<FieldList>::value;
  
    // ---[ RGB special case
    std::vector<pcl::PCLPointField> fields;
    int rgba_index = -1;
    rgba_index = pcl::getFieldIndex (*input_, "rgb", fields);
    if (rgba_index == -1)
      rgba_index = pcl::getFieldIndex (*input_, "rgba", fields);
    if (rgba_index >= 0)
    {
      rgba_index = fields[rgba_index].offset;
      centroid_size += 3;
    }
    // histsize_ : é™é‡‡æ ·å å®¹å™¨çš„æ•°é‡ é»˜è®¤512
    for (size_t i = 0; i < histsize_; i++) 
    {
      history_[i].count = 0;
      history_[i].centroid = Eigen::VectorXf::Zero (centroid_size);
    }
    Eigen::VectorXf scratch = Eigen::VectorXf::Zero (centroid_size);
  
    output.points.resize (input_->points.size ());   // size output for worst case
    size_t op = 0;    // output pointer
      // éå†è¾“å…¥çš„æ¯ä¸€ä¸ªç‚¹
    for (size_t cp = 0; cp < input_->points.size (); ++cp) 
    {
      int ix = static_cast<int> (floor (input_->points[cp].x * inverse_leaf_size_[0]));
      int iy = static_cast<int> (floor (input_->points[cp].y * inverse_leaf_size_[1]));
      int iz = static_cast<int> (floor (input_->points[cp].z * inverse_leaf_size_[2]));
        // è®¡ç®— hash 
      unsigned int hash = static_cast<unsigned int> ((ix * 7171 + iy * 3079 + iz * 4231) & (histsize_ - 1));
      he *hhe = &history_[hash];
        // å¦‚æœå†²çªäº†,
        // 1. å°†è¿™ä¸ªå®¹å™¨ä¸­å·²ç»å­˜å‚¨çš„ç‚¹ é‡‡æ ·å‡ºå»,æ¸…ç©ºè¿™ä¸ªå®¹å™¨
      if (hhe->count && ((ix != hhe->ix) || (iy != hhe->iy) || (iz != hhe->iz))) 
      {
        flush (output, op++, hhe, rgba_index, centroid_size);
        hhe->count = 0;
        hhe->centroid.setZero ();// = Eigen::VectorXf::Zero (centroid_size);
      }
        // 2. æŠŠæ–°çš„ç‚¹åŠ å…¥è¿™ä¸ªå®¹å™¨/æ­£å¸¸æƒ…å†µä¸‹,ç‚¹æ•°++
      hhe->ix = ix;
      hhe->iy = iy;
      hhe->iz = iz;
      hhe->count++;
  
      // Unpack the point into scratch, then accumulate
      // ---[ RGB special case
      if (rgba_index >= 0)
      {
        // fill r/g/b data
        pcl::RGB rgb;
        memcpy (&rgb, (reinterpret_cast<const char *> (&input_->points[cp])) + rgba_index, sizeof (RGB));
        scratch[centroid_size-3] = rgb.r;
        scratch[centroid_size-2] = rgb.g;
        scratch[centroid_size-1] = rgb.b;
      }
      pcl::for_each_type <FieldList> (xNdCopyPointEigenFunctor <PointT> (input_->points[cp], scratch));
      hhe->centroid += scratch;
    }
      // æŠŠå®¹å™¨ä¸­æ‰€æœ‰çš„ç‚¹ é™é‡‡æ ·
    for (size_t i = 0; i < histsize_; i++) 
    {
      he *hhe = &history_[i];
      if (hhe->count)
        flush (output, op++, hhe, rgba_index, centroid_size);
    }
    output.points.resize (op);
    output.width = static_cast<uint32_t> (output.points.size ());
    output.height       = 1;                    // downsampling breaks the organized structure
    output.is_dense     = false;                 // we filter out invalid points
  }
  ```

#### 5.3 Farthest Point Sampling(FPS)

**æœ€è¿œç‚¹é‡‡æ ·**

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210625201102277.png" alt="image-20210625201102277" style="zoom:80%;" />

**æµç¨‹:**

1. å…ˆä»ç‚¹äº‘ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªç‚¹ä½œä¸ºç¬¬ä¸€ä¸ª`FPS point`

2. è¿­ä»£ä¸‹é¢çš„è¿‡ç¨‹,ç›´åˆ°è·å¾—æŒ‡å®šçš„ç‚¹æ•°

   a. å¯¹äºåŸå§‹ç‚¹äº‘ä¸­çš„æ¯ä¸€ä¸ªç‚¹,è®¡ç®—å®ƒåˆ°è¾¾`FPS point`ä¸­**æœ€è¿‘ç‚¹** çš„è·ç¦»(åˆ°è¾¾`FPS point`ä¸­ç‚¹ è·ç¦»çš„æœ€å°å€¼),æŠŠè¿™ä¸ªè·ç¦»æœ€å°å€¼ä½œä¸ºå®ƒåˆ°`FPS point`çš„è·ç¦»

   b. é€‰æ‹©è·ç¦»æœ€å¤§çš„ç‚¹,æ·»åŠ åˆ°`FPS point`ä¸­

ä½¿ç”¨FPSçš„ç”¨å¤„:

+ å¯¹äºä¸€ä¸ªç‚¹äº‘,æœ‰äº›åœ°æ–¹å¯†åº¦å¾ˆå¤§,æœ‰äº›åœ°æ–¹å¾ˆç¨€ç–,FPSå¯ä»¥æŠŠä¸€äº›å¯†åº¦å¾ˆå¤§çš„åœ°æ–¹çš„ç‚¹ç»™å»æ‰
+ ç»å¸¸ç”¨äºæ·±åº¦å­¦ä¹ 

#### 5.4 Normal Space Sampling(NSS)

**æ³•å‘é‡ç©ºé—´é‡‡æ ·**

ç»å¸¸ç”¨åœ¨ICPä¸­,å¦‚ä¸‹å›¾æ‰€ç¤º,æƒ³è¦å¯¹é½çº¢è‰²ç‚¹é›†å’Œç»¿è‰²ç‚¹é›†,è®¡ç®—å®ƒä»¬ä¹‹é—´çš„R,T

ä¸€èˆ¬çš„å‡åŒ€é‡‡æ ·æ˜¯ä¸Šé¢çš„å›¾ç¤º,é‡‡æ ·å¾—åˆ°çš„ç‚¹,å¯èƒ½ä¼šæ¼æ‰ä¸­é—´å‡¸èµ·çš„éƒ¨åˆ†,æ— è®ºæ€æ ·å·¦å³å¹³ç§»,éƒ½å¯ä»¥åŒ¹é…ä¸Š,å¯¼è‡´åŒ¹é…å¤±è´¥.

![image-20210625201901961](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210625201901961.png)



**NSSæµç¨‹:**

1. å…ˆåœ¨æ³•å‘é‡ç©ºé—´å»ºç«‹å¾ˆå¤šå®¹å™¨,æŒ‰ç…§è§’åº¦åˆ†æˆå¾ˆå¤šä»½?
2. éå†æ¯ä¸€ä¸ªç‚¹,æ ¹æ®å®ƒçš„æ³•å‘é‡,æŠŠå®ƒæ”¾åˆ°æ­¥éª¤1 ä¸­çš„å®¹å™¨ä¸­
3. åœ¨æ¯ä¸€ä¸ªå®¹å™¨ä¸­éƒ½å–kä¸ªç‚¹,è¿™æ ·å°±ä¿è¯æ¯ä¸€ä¸ªæ–¹å‘ä¸Šéƒ½æœ‰ç‚¹,è€Œä¸æ˜¯é›†ä¸­åœ¨ä¸€äº›å¹³æ»‘çš„åœ°æ–¹

#### 5.5 ä¸Šé‡‡æ ·

+ **Gaussian Filter**

  é«˜æ–¯æ»¤æ³¢

  ![image-20210625232640881](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210625232640881.png)

  å¸¸ç”¨åœ¨å›¾åƒä¸Š,ä½¿ç”¨ä¸€ä¸ªé«˜æ–¯å‡½æ•°,éå†å›¾åƒä¸Šçš„æ¯ä¸€ä¸ªç‚¹,å–ä¸€ä¸ªé‚»åŸŸ,é‚»åŸŸå¤§å°ä¸é«˜æ–¯åˆ†å¸ƒçš„æ–¹å·®æœ‰å…³,æŠŠé‚»åŸŸå†…çš„ç‚¹åƒç´ å€¼è¿›è¡ŒåŠ æƒå¹³å‡,æƒé‡ç”±ä¸€ä¸ªé«˜æ–¯åˆ†å¸ƒç»™å‡º

![image-20210625232943387](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210625232943387.png)

+ **Edge Preserving Blurring**

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210625234221426.png" alt="image-20210625234221426" style="zoom:80%;" />



+ **åŒè¾¹æ»¤æ³¢  Bilateral Filter**

  é«˜æ–¯æ»¤æ³¢,ä¼šå¯¼è‡´å›¾ç‰‡è¶Šæ¥è¶Šæ¨¡ç³Š,åŒè¾¹æ»¤æ³¢æ”¹å–„äº†è¿™ä¸ªæƒ…å†µ





## class 2 Nearest Neighbors

**æœ€è¿‘é‚»æœç´¢é—®é¢˜**

**Nearest Neighbor (NN) Problem**

ä¸»è¦æœ‰ä¸¤ç§NNé—®é¢˜

+ **K-NN**

  åœ¨ç©ºé—´`M`ä¸­æœ‰ä¸€ä¸ªç‚¹é›†`S`,ä¸€ä¸ªæŸ¥è¯¢ç‚¹$q\in M$,æ‰¾åˆ°æŸ¥è¯¢ç‚¹åœ¨Sä¸­æœ€è¿‘çš„kä¸ªç‚¹

  ä¸‹å›¾æ˜¯3-NN

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210729095050166.png" alt="image-20210729095050166" style="zoom:80%;" />

+ **Fixed Radius-NN**

  åœ¨ç©ºé—´`M`ä¸­æœ‰ä¸€ä¸ªç‚¹é›†`S`,ä¸€ä¸ªæŸ¥è¯¢ç‚¹$q\in M$,æ‰¾åˆ°æ‰€æœ‰åœ¨Sä¸­å’ŒæŸ¥è¯¢ç‚¹è·ç¦»å°äºrçš„ç‚¹

  $||s-q||<r$

  ![image-20210729095727099](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210729095727099.png)

+ **NN é—®é¢˜çš„åº”ç”¨é¢†åŸŸ**

  + è¡¨é¢æ³•å‘é‡ä¼°è®¡
  + å™ªç‚¹æ»¤é™¤
  + é™é‡‡æ ·
  + èšç±»
  + ç‰¹å¾ç‚¹æ£€æµ‹å’Œç‰¹å¾æå–
  + æ·±åº¦å­¦ä¹ 
  + ...

+ **ä¸ºä»€ä¹ˆæœ€è¿‘é‚»æœç´¢å¯¹ç‚¹äº‘æ¥è¯´å¾ˆå›°éš¾?**

  + å¯¹äºå›¾åƒ,æœ€è¿‘é‚»æœç´¢åªè¦ç®€å•çš„$x+\Delta x,y+\Delta y$
  + å¯¹äºç‚¹äº‘æ¥è¯´
    + ç‚¹äº‘ä¸è§„åˆ™
    + æ¯”å›¾åƒå¤šä¸€ä¸ªç»´åº¦
    + ç‚¹äº‘æ•°æ®é‡å·¨å¤§

+ **Core Ideas Shared by BST, kd-tree, octree**

  + ç©ºé—´åˆ†å‰²

    + æŠŠç©ºé—´åˆ†å‰²æˆä¸åŒçš„åŒºåŸŸ
    + åªåœ¨ä¸€äº›ç‰¹å®šçš„åŒºåŸŸå†…æœç´¢,ä¸æ˜¯æœç´¢æ‰€æœ‰çš„æ•°æ®

  + æå‰åœæ­¢æœç´¢

    

###  1.Binary Search Tree

äºŒå‰æœç´¢æ ‘

![image-20210730105820348](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210730105820348.png)![image-20210730110121461](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210730110121461.png)

+ **èŠ‚ç‚¹å®šä¹‰**

  ```C++
  struct Node() 
  {
      Node* left;
      Node* right;
      int val;// å­˜å‚¨çš„å±æ€§
      int key;// èŠ‚ç‚¹çš„æ•°å€¼
      Node(int val,int key):key(key),value(value);
  };
  ```

+ **å»ºæ ‘/æ’å…¥å…ƒç´ **

  ```C++
  vector<int> db_data(db_size);
  
  Node* insert(Node* root,int key,int value) {
      //
      if(root==nullptrt) {
          root = new Node(key,value);
      } else if(key > root->key) {
          root = insert(root->right,key,value);
      } else if(key < root->key) {
          root = insert(root->left,key,value);
      } else {
          printf("key already exits\n");
      }
      return root;
  }
  
  Node* root = new root();
  for(int i=0;i<db_size;++i) {
      root = insert(root,db_data[i],i);
  }
  ```

+ **æ’å…¥å¤æ‚åº¦**

  O(h),hæ˜¯æ ‘çš„æ·±åº¦

  æœ€åçš„æƒ…å†µ,hå°±æ˜¯BSTå…ƒç´ çš„ä¸ªæ•°,å³ç§°ä¸ºäº†ä¸€ä¸ªé“¾è¡¨,$h=n$

  æœ€å¥½çš„æƒ…å†µ,å¹³è¡¡äºŒå‰æ ‘,$h=log_2(n)$

+ **æŸ¥æ‰¾ä¸€ä¸ªå…ƒç´ **

  ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘BST,å’Œä¸€ä¸ªæŸ¥è¯¢æ•°æ®query(key),åœ¨è¿™æ£µæ ‘ä¸­æŸ¥è¯¢ç­‰äºkeyçš„èŠ‚ç‚¹,å¦‚æœæ²¡æœ‰è¿”å›null

  æœ‰é€’å½’å’Œè¿­ä»£ä¸¤ç§æŸ¥æ‰¾æ–¹æ³•

  + **é€’å½’**

    ```C++
    Node* search_recursive(Node* root,int key) {
        if(root == nullptr || root->key == key) {
            return root;
        }
        if(key > root->key) {
            return root = search(root->right,key);
        } else {
            return root = search(root->left,key);
        }
    }
    ```

  + **è¿­ä»£**

    ```C++
    Node* search_recursive(Node* root,int key) {
        Node* current_node = root;
        while(!current_node) {
            if(current_node->key == key) {
                break;
            } else if(current_node->key > key) {
                current_node = current_node->left;
            } else {
                current_node = current_node->right;
            }
        }
        return current_node;
    }
    ```

  + **ä¸¤ç§æŸ¥è¯¢æ–¹å¼çš„å¯¹æ¯”**

    ![image-20210731113449551](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210731113449551.png)

  åœ¨GPUä¸Šé¢é€‰æ‹©å¾ªç¯

+ **BST-1NN search**

  ![image-20210730105820348](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210730105820348.png)



æŸ¥è¯¢æ•°æ®-query point 11

æŸ¥è¯¢è¿‡ç¨‹,ä½¿ç”¨ä¸€ä¸ªå˜é‡`worst distance`,è¡¨ç¤ºç›®å‰äºŒå‰æ ‘åˆ°æŸ¥è¯¢ç‚¹æœ€è¿‘çš„è·ç¦»,å°±æ˜¯åº”è¯¥æŸ¥è¯¢çš„æœ€è¿œè·ç¦»,è¶…è¿‡è¿™ä¸ªè·ç¦»çš„æ•°æ®å°±ä¸éœ€è¦æŸ¥è¯¢äº†;

Worst distance is the largest distance that you should search around the query point

1) **é¦–å…ˆç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ˜¯8**

â€‹	a) worst distance = 3 (11-8)	

â€‹		å°±ç®—ä¸å‘ä¸‹æŸ¥æ‰¾,ä¹ŸçŸ¥é“è¿™æ£µæ ‘ç¦»æŸ¥è¯¢ç‚¹çš„è·ç¦»è‡³å°‘æ˜¯3

â€‹	b) åœ¨èŠ‚ç‚¹8å·¦è¾¹çš„èŠ‚ç‚¹å€¼éƒ½æ¯”8å°,æ‰€ä»¥è·ç¦»æŸ¥è¯¢ç‚¹çš„è·ç¦»ä¸€å®šæ¯”3å¤§,æ‰€ä»¥ä¸éœ€è¦æŸ¥è¯¢èŠ‚ç‚¹8çš„å·¦èŠ‚ç‚¹

â€‹	c) èŠ‚ç‚¹8çš„å³å­æ ‘æ•°å€¼èŒƒå›´(8,+inf),worst distance = 3,è¿˜å¯ä»¥æ›´å°,éœ€è¦ æŸ¥è¯¢çš„èŒƒå›´(8,14)  åœ¨å³å­æ ‘é‡Œé¢

â€‹		ä¸‹ä¸€æ¬¡æŸ¥è¯¢çš„èŒƒå›´æ˜¯(å½“å‰èŠ‚ç‚¹å€¼,æŸ¥è¯¢æ•°æ®+worst distance)

2) **æ¥åˆ°æŸ¥è¯¢çš„ç¬¬äºŒä¸ªèŠ‚ç‚¹10**

â€‹	a) worst distance = 1(11-10)

â€‹	b) åŒç¬¬ä¸€ä¸ªèŠ‚ç‚¹,åªéœ€è¦æŸ¥è¯¢èŠ‚ç‚¹10çš„å³å­æ ‘(10,+inf),æŸ¥è¯¢èŒƒå›´æ˜¯(10,12)åœ¨å³å­æ ‘é‡Œé¢

3) **æŸ¥è¯¢ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹ 14**

â€‹	a) worst distance = 1

â€‹		æ­¤æ—¶çš„è·ç¦»=14-11=3>1,æ‰€ä»¥worst_distanceè¿˜æ˜¯1

â€‹	b) 14æ¯”æŸ¥è¯¢ç‚¹å¤§,14çš„å·¦å­æ ‘æ•°å€¼èŒƒå›´(10,14),æŸ¥è¯¢èŒƒå›´æ˜¯(10,12),åœ¨å·¦å­æ ‘é‡Œé¢,æ‰€ä»¥éœ€è¦æŸ¥è¯¢å·¦å­æ ‘

4) æŸ¥è¯¢ç¬¬å››ä¸ªèŠ‚ç‚¹13,åŒç¬¬3)æ­¥,ç»§ç»­æŸ¥å®ƒçš„å·¦å­æ ‘,å·¦å­æ ‘ä¸ºç©º,è¿”å›åˆ°èŠ‚ç‚¹14

â€‹	éœ€è¦æŸ¥è¯¢14çš„å³å­æ ‘å—?å³å­æ ‘èŒƒå›´æ˜¯(14,+inf),éœ€è¦æŸ¥è¯¢çš„èŒƒå›´æ˜¯(10,12),ä¸éœ€è¦

5)  è¿”å›èŠ‚ç‚¹10

â€‹	éœ€è¦æŸ¥è¯¢10çš„å·¦å­æ ‘å—?å·¦å­æ ‘èŒƒå›´æ˜¯(8,10),éœ€è¦æŸ¥è¯¢çš„èŒƒå›´æ˜¯(10,12),ä¸éœ€è¦

6)  è¿”å›èŠ‚ç‚¹8

â€‹	éœ€è¦æŸ¥è¯¢8çš„å·¦å­æ ‘å—?å·¦å­æ ‘èŒƒå›´æ˜¯(-inf,8),éœ€è¦æŸ¥è¯¢çš„èŒƒå›´æ˜¯(10,12),ä¸éœ€è¦

**ä¸Šé¢æŸ¥è¯¢çš„è¿‡ç¨‹å°±æ˜¯NNæœç´¢çš„æ ¸å¿ƒ,è·³è¿‡äº†å¾ˆå¤šä¸éœ€è¦æŸ¥è¯¢çš„åŒºåŸŸ**

å¦‚ä¸‹å›¾æ‰€ç¤º,éšç€worst distanceçš„å‡å°,å°±ä¸éœ€è¦æŸ¥è¯¢å³å­æ ‘çš„å†…å®¹äº†

![image-20210731222610955](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210731222610955.png)

+ **BST-kNN search**

  ![image-20210731222955061](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210731222955061.png)

  + **Worst Distance for kNN**

    å»ºç«‹ä¸€ä¸ªå®¹å™¨å­˜å‚¨è·ç¦»ç»“æœ,å®¹å™¨é™åºæ’åº,æœ€åä¸€ä¸ªå°±æ˜¯worst_distance

    å¦‚æœå½“å‰è·ç¦»<worst_dist,å°±æŠŠè¿™ä¸ªç»“æœæ’å…¥åˆ°å®¹å™¨ä¸­

    ![image-20210731225927984](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210731225927984.png)

+ **Radius NN Search**

  ä¸kNNç±»ä¼¼,ä¸è¿‡worst_disttanceå›ºå®šä¸ºæŒ‡å®šçš„radius,åªè¦dist<worst_distå°±æ˜¯æŸ¥è¯¢ç»“æœ

  ![image-20210731231403514](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210731231403514.png)

![image-20210731231454581](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210731231454581.png)

### 2.Kd Tree

BSTåªé€‚ç”¨äºä¸€ç»´æ•°æ®çš„æœ€è¿‘é‚»æŸ¥æ‰¾

é«˜ç»´æ•°æ®:ä½¿ç”¨Kdæ ‘

![image-20210801001158743](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801001158743.png)

+ æ˜¯BSTåœ¨é«˜ç»´ä¸Šçš„æ‰©å±•

  + åœ¨é«˜ç»´çš„æ¯ä¸€ä¸ªç»´åº¦è¿›è¡Œä¸€ä¸ªBST

+ Kd-treeå»ºæ ‘

  + å¦‚æœåªæœ‰ä¸€ä¸ªç‚¹,æˆ–è€… number of points < leaf_size,å°±å»ºç«‹ä¸€ä¸ªå¶å­èŠ‚ç‚¹
  + å¦åˆ™,åœ¨é€‰æ‹©çš„è½´ä¸Šé¢,ä½¿ç”¨ä¸€ä¸ªè¶…å¹³é¢æŠŠæ•°æ®åˆ†æˆä¸¤åŠ
  + é‡å¤ä¸Šé¢ä¸¤æ­¥,ç›´åˆ°æ²¡æœ‰æ•°æ®å¯åˆ†,å…¨éƒ¨éƒ½æ˜¯å¶å­èŠ‚ç‚¹

+ **ä»¥äºŒç»´æ•°æ®ä¸ºä¾‹**

  ![image-20210801003604828](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801003604828.png)

  æœ‰ä¸¤ç§åœ¨ç»´åº¦ä¸Šåˆ’åˆ†çš„æ–¹æ³•,ä¸€ç§æ˜¯è¶…å¹³é¢é€‰æ‹©åœ¨æ•°æ®ç‚¹ä¸Šé¢,å¦ä¸€ç§ä¸æ˜¯åœ¨æ•°æ®ç‚¹ä¸Š,åªæ˜¯ä¹ æƒ¯çš„é—®é¢˜,è¯¾ç¨‹ä¸­ä½¿ç”¨ç¬¬äºŒç§åˆ’åˆ†æ–¹æ³•,æ¯ä¸€ä¸ªæ•°æ®ç‚¹éƒ½åœ¨ä¸€ä¸ªåŒºåŸŸé‡Œé¢,ç‚¹è¦ä¹ˆåœ¨å·¦è¾¹,è¦ä¹ˆåœ¨å³è¾¹,ä¸ä¼šåœ¨ä¸­é—´;

  + **åˆ‡å‰²ç­–ç•¥**

    å¯»æ‰¾åˆ°è¦åˆ‡å‰²çš„ç»´åº¦

    + æ¯ä¸€ä¸ªç»´åº¦è½®æµåˆ‡

    + è‡ªé€‚åº”åˆ‡,æ‰¾åˆ°æ–¹å·®æœ€å¤§çš„æ–¹å‘å»åˆ‡

    + è¿™ä¸¤ç§åˆ‡å‰²æ–¹æ³•å¯¹æœ€åçš„NNç»“æœå½±å“ä¸å¤§,æ‰€ä»¥é€‰æ‹©ç¬¬ä¸€ç§ç®€å•ä¸€ç‚¹

      ![image-20210801004910208](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801004910208.png)

  + **å»ºæ ‘è¿‡ç¨‹**

    ![image-20210801005308450](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801005308450.png)

    æœ€å°ç‚¹æ•°è®¾ç½®ä¸º1ï¼Œå³å¶å­èŠ‚ç‚¹ä¿å­˜æœ€å¤šä¸€ä¸ªæ•°æ®ç‚¹

    é¦–å…ˆåœ¨xè½´ä¸Šé¢åˆ‡,ä½¿ç”¨s1è¿™ä¸ªè¶…å¹³é¢,ç„¶ååœ¨å·¦è¾¹åŒºåŸŸ,åœ¨yè½´ä¸Šé¢ç”¨s2åˆ‡å‰²

    ![image-20210801101952436](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801101952436.png)

    ä¾æ¬¡ç±»æ¨

  + **kd treeèŠ‚ç‚¹çš„è¡¨è¾¾**

    ```C++
    class KDTreeNode
    {
    public:
        KDTreeNode();
        ~KDTreeNode();
    
    private:
        // int dim;		// èŠ‚ç‚¹çš„ç»´åº¦
        
        int cut_dim;    // dimension to cut;
        
        float cut_val;  //cut value åˆ‡å‰²é¢çš„ä½ç½®(é»˜è®¤-1)
    
        vector<int> point_indices; // å­˜å‚¨å½“å‰èŠ‚ç‚¹ä¸­æ•°æ®çš„ä¸‹æ ‡
    
        KDTreeNode *left, *right;  // pointers to left and right nodes.
        // æ˜¯å¦ä¸ºå¶å­èŠ‚ç‚¹
        inline bool is_leaf() {
            if(cut_value == -1) {
                return true;
            }
            return false;
        }
    };
    ```

    ![image-20210801103637163](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801103637163.png)

    â€‹	å·¦ä¸‹è§’è¿™ä¸ªèŠ‚ç‚¹:

    â€‹	cut_dim = y

    â€‹	cut_val = s2

    â€‹	points=[a,b,d,e]

      å³ä¸Šè§’è¿™ä¸ªèŠ‚ç‚¹:

    â€‹	cut_dim = y

    â€‹	cut_val = -1

    â€‹	points=[i]

    â€‹	

  + **å»ºæ ‘**

    é€‰æ‹©ä¸€ä¸ªç»´åº¦,åˆ‡å‰²ä¸¤åŠ,å†é€’å½’çš„è¿›è¡Œå·¦å³ä¸¤è¾¹çš„åˆ’åˆ†

    ![image-20210801104635238](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801104635238.png)

  + **æ—¶é—´å¤æ‚åº¦**

    nä¸ªæ•°æ®ç‚¹,åˆ†ä¸ºlognå±‚,æ’åºæ˜¯nlogn,æ‰€ä»¥æ•´ä½“æ—¶é—´å¤æ‚åº¦æ˜¯`O(n log n log n)`

    å¯ä»¥æŠŠæ’åºç®—æ³•æ›¿æ¢ä¸ºæ‰¾ä¸­å€¼ç®—æ³•O(n) æ‰€ä»¥æ•´ä½“æ—¶é—´å¤æ‚åº¦æ˜¯`O(n log n)`

    åœ¨å®é™…å»ºæ ‘è¿‡ç¨‹ä¸­,ä¼šä½¿ç”¨ä¸€äº›æŠ€å·§é™ä½æ—¶é—´å¤æ‚åº¦

    1) é€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹ä¸­çš„ä¸€éƒ¨åˆ†æ•°æ®è¿›è¡Œæ’åº,é€‰æ‹©åˆ‡å‰²ä½ç½®,è€Œä¸å¯¹å…¨éƒ¨æ•°æ®è¿›è¡Œæ’åº

    2) ä½¿ç”¨å‡å€¼ä»£æ›¿ä¸­å€¼,é€‰å–åˆ‡å‰²ä½ç½®

    è¿™æ ·ä¸ä¼šä¿è¯æ˜¯å¹³è¡¡çš„kd-tree,ä½†æ˜¯åŸºæœ¬ä¸Šå¯ä»¥ç”¨,è€Œä¸”å»ºæ ‘é€Ÿåº¦å¾ˆå¿«

  + **kNN Search**

    ä¹Ÿéœ€è¦ä¸€ä¸ªå˜é‡worst distance

    ![image-20210801112133126](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801112133126.png)

    éœ€ä¸éœ€è¦æŸ¥æ‰¾è“è‰²åŒºåŸŸ:

    1) å¦‚æœæŸ¥è¯¢ç‚¹åœ¨è“è‰²åŒºåŸŸå†…éƒ¨,éœ€è¦æŸ¥è¯¢,worst distanceå¯èƒ½ä¸º0

    æˆ–è€…

    2) qåˆ°å½“å‰èŠ‚ç‚¹åˆ†å‰²é¢çš„ä½ç½®è·ç¦»å°äºworst distance,ä¹Ÿéœ€è¦æŸ¥è¯¢,å› ä¸ºæœ‰å¯èƒ½è“è‰²åŒºåŸŸå†…å­˜åœ¨è·ç¦»æŸ¥è¯¢ç‚¹æ›´è¿‘çš„ç‚¹

    ![image-20210801113318123](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801113318123.png)

  + **Radius-NN Search**

    ![image-20210801113636476](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801113636476.png)

**å»ºæ ‘&NN search ä¼ªä»£ç **

Node-dataå°±ç›¸å½“äºäºŒå‰æœç´¢æ ‘èŠ‚ç‚¹çš„å€¼,æ¥äº†ä¸€ä¸ªæ•°æ®,å¯¹åº”ç»´åº¦çš„æ•°å€¼å°±å’Œå®ƒç›¸æ¯”,æ¯”å®ƒå°æ˜¯å·¦å­©å­,æ¯”å®ƒå¤§æ˜¯å³å­©å­

range:æ•°æ®ç‚¹é›†?

![image-20210807210200915](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210807210200915.png)

ä»ä¸Šé¢å¯¹k-dæ ‘èŠ‚ç‚¹çš„æ•°æ®ç±»å‹çš„æè¿°å¯ä»¥çœ‹å‡ºæ„å»ºk-dæ ‘æ˜¯ä¸€ä¸ªé€çº§å±•å¼€çš„é€’å½’è¿‡ç¨‹ã€‚ä¸‹è¡¨ç»™å‡ºçš„æ˜¯æ„å»ºk-dæ ‘çš„ä¼ªä»£ç :

![image-20210807210114898](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210807210114898.png)

k-dæ ‘æŸ¥è¯¢ç®—æ³•çš„ä¼ªä»£ç :

![image-20210807210528968](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210807210528968.png)

![image-20210807211031265](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210807211031265.png)

![image-20210807211334755](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210807211334755.png)

ä¸Šè¿°ä¸¤æ¬¡å®ä¾‹è¡¨æ˜ï¼Œå½“æŸ¥è¯¢ç‚¹çš„é‚»åŸŸä¸åˆ†å‰²è¶…å¹³é¢ä¸¤ä¾§ç©ºé—´äº¤å‰²æ—¶ï¼Œéœ€è¦æŸ¥æ‰¾å¦ä¸€ä¾§å­ç©ºé—´ï¼Œå¯¼è‡´æ£€ç´¢è¿‡ç¨‹å¤æ‚ï¼Œæ•ˆç‡ä¸‹é™ã€‚ç ”ç©¶è¡¨æ˜Nä¸ªèŠ‚ç‚¹çš„Kç»´k-dæ ‘æœç´¢è¿‡ç¨‹æ—¶é—´å¤æ‚åº¦ä¸ºï¼š$t_{worst}=O(kN^{1-1/k})$ã€‚

ä»¥ä¸Šä¸ºäº†ä»‹ç»æ–¹ä¾¿ï¼Œè®¨è®ºçš„æ˜¯äºŒç»´æƒ…å½¢ã€‚åƒå®é™…çš„åº”ç”¨ä¸­ï¼Œå¦‚SIFTç‰¹å¾çŸ¢é‡128ç»´ï¼ŒSURFç‰¹å¾çŸ¢é‡64ç»´ï¼Œç»´åº¦éƒ½æ¯”è¾ƒå¤§ï¼Œç›´æ¥åˆ©ç”¨k-dæ ‘å¿«é€Ÿæ£€ç´¢ï¼ˆç»´æ•°ä¸è¶…è¿‡20ï¼‰çš„æ€§èƒ½æ€¥å‰§ä¸‹é™ã€‚å‡è®¾æ•°æ®é›†çš„ç»´æ•°ä¸ºDï¼Œä¸€èˆ¬æ¥è¯´è¦æ±‚æ•°æ®çš„è§„æ¨¡Næ»¡è¶³NÂ»2Dï¼Œæ‰èƒ½è¾¾åˆ°é«˜æ•ˆçš„æœç´¢ã€‚æ‰€ä»¥è¿™å°±å¼•å‡ºäº†ä¸€ç³»åˆ—å¯¹k-dæ ‘ç®—æ³•çš„æ”¹è¿›ã€‚æœ‰å¾…è¿›ä¸€æ­¥ç ”ç©¶å­¦ä¹ ã€‚

## class 3 cluster

### 1.æ•°å­¦åŸºç¡€

+ èšç±»å°±æ˜¯æŠŠç›¸ä¼¼çš„ç‰©ä½“èšåœ¨ä¸€èµ·ï¼Œä¸ç›¸ä¼¼çš„ç‰©ä½“åˆ†å¼€ï¼›

+ èšç„¦ä¸¤ç±»èšç±»æ–¹æ³•

  + ç†è®ºä¸Šè¢«è¯æ˜çš„
    + K-means
    
    + GMM
    
    + EM
    
    + Spectral Clustering
    
  + å·¥ç¨‹ä¸­å¸¸ç”¨çš„
    + mean-shift
    + DBSCAN
  
+ **çº¿æ€§ä»£æ•°**

  + **çŸ©é˜µçš„SVDåˆ†è§£**

    $M=U*\Sigma*V^*$,å…¶ä¸­ï¼Œ$U,V^*$æ˜¯æ­£äº¤çŸ©é˜µï¼ˆæ—‹è½¬çŸ©é˜µï¼‰ï¼Œ$\Sigma$æ˜¯å¯¹è§’é˜µï¼Œå…ƒç´ æ˜¯$M$çš„ç‰¹å¾å€¼çš„å¹³æ–¹æ ¹ï¼ŒæŒ‰ç…§ä»å¤§åˆ°å°çš„é¡ºåºæ’åˆ—ï¼›

    å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸€ä¸ªåœ† ç»è¿‡ä¸€ä¸ª$M$å¤„ç†ï¼Œå°±æ˜¯ï¼Œå…ˆç»è¿‡ä¸€ä¸ª$V^*$,åšä¸€ä¸ªæ—‹è½¬ï¼Œç»è¿‡ä¸€ä¸ª$\Sigma$,å„ä¸ªç»´åº¦ä¸Šçš„ä¸€ä¸ªç¼©æ”¾ï¼Œåœ†å˜æˆäº†æ¤­åœ†ï¼Œæœ€åç»è¿‡ä¸€ä¸ª$U$ï¼Œæ—‹è½¬ä¸€ä¸‹ï¼Œå¾—åˆ°æœ€åçš„ç»“æœ

    ä¸€ä¸ªçŸ©é˜µå¯ä»¥åˆ†è§£ä¸ºæ—‹è½¬çŸ©é˜µ+ç¼©æ”¾çŸ©é˜µ+æ—‹è½¬çŸ©é˜µ

    ![image-20210624113055849](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624113055849.png)

  + **è°±å®šç†Spectral Theorem**

    å¯¹é˜µçŸ©é˜µAçš„åˆ†è§£

    <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624114247466.png" alt="image-20210624114247466" style="zoom: 80%;" />

  + **ç‘ä¸½å•†Rayleigh Quotients**

    ![image-20210624114619153](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624114619153.png)

    â€‹	æ ¹æ®SVDçš„é‚£ä¸ªè§£é‡Šå›¾ï¼Œç‘ä¸½å•†è¡¨ç¤ºå¯¹ç§°çŸ©é˜µAå¯ä»¥æŠŠxç¼©æ”¾å¤šå°‘å€ï¼Œæœ€å¤§ç‰¹å¾å€¼å€åˆ°æœ€å°ç‰¹å¾å€¼å€

+ **æ¦‚ç‡è®º**

  + è”åˆæ¦‚ç‡

  + è¾¹ç¼˜åˆ†å¸ƒæ¦‚ç‡

    ç”±è”åˆåˆ†å¸ƒæ±‚æŸä¸€ä¸ªå˜é‡çš„æ¦‚ç‡åˆ†å¸ƒ

    ![image-20210722151659961](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722151659961.png)

    æŠŠå…¶ä½™çš„å˜é‡é€šè¿‡æ±‚å’Œæˆ–è€…ç§¯åˆ† æ¶ˆæ‰

    ![image-20210722151722010](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722151722010.png)

  + æ¡ä»¶æ¦‚ç‡

    <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722151443843.png" alt="image-20210722151443843" style="zoom: 80%;" />

    ![image-20210722151528979](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722151528979.png)

+ **å›¾è®º**

  + æœ‰å‘å›¾  Directed Graphical Model (DGM)

    + DGMè¢«ç”¨äºè¡¨ç¤ºæ¡ä»¶ç‹¬ç«‹

    + $G(V,E)$

      + Væ˜¯èŠ‚ç‚¹çš„é›†åˆ,ä¸€ä¸ªèŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªå˜é‡

      + Eæ˜¯æœ‰æ–¹å‘çš„è¾¹çš„é›†åˆ,ä¸€æ¡è¾¹ä»£è¡¨ä¸€ä¸ªæ¡ä»¶å…³ç³»,ä¸¤ä¸ªéšæœºå˜é‡çš„è”ç³»

        ![image-20210722152454092](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722152454092.png)

      + é©¬å°”ç§‘å¤«å‡è®¾:ä¸€ä¸ªéšæœºå˜é‡(èŠ‚ç‚¹)åªå’Œå®ƒçš„çˆ¶èŠ‚ç‚¹æœ‰å…³,ä¸çˆ¶èŠ‚ç‚¹ä¹‹å‰çš„èŠ‚ç‚¹æ— å…³

        + å¦‚ä¸Šå›¾,å°±æ˜¯ä¸€ä¸ªç®€å•çš„æœ‰å‘å›¾

        + the joint distribution is $p(x,z)=p(z)p(z|x)$

          ![image-20210722152829387](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722152829387.png)

  + æ— å‘å›¾UGM

    + ![image-20210722153044256](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722153044256.png)

+ **ä¼˜åŒ–æ–¹æ³•---æ‹‰æ ¼æœ—æ—¥ä¹˜æ•°æ³•**

  è€ƒè™‘ä¸€ä¸ªä¼˜åŒ–é—®é¢˜:
  $$
  max\ f(x,y),s.t.:\ g(x,y)=0
  $$
  

  å¯¹äºç®€å•çš„ä¼˜åŒ–é—®é¢˜,ç”¨æ¢¯åº¦ä¸‹é™å°±èƒ½è§£å†³,ä½†æ˜¯è¿™é‡ŒåŠ å…¥äº†é™åˆ¶æ¡ä»¶,å¦‚ä¸‹å›¾æ‰€ç¤º:

  ![image-20210722153413504](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722153413504.png)

å›¾ä¸­:

1. è™šçº¿åœ†ä»£è¡¨ f(x,y) çš„ç™»é«˜çº¿,è¶Šå¾€é‡Œé¢å€¼è¶Šå¤§

2. g(x,y)=0ä»£è¡¨x,yå¿…é¡»åœ¨çº¢çº¿ä¸Šé¢

3. ä¼˜åŒ–ä¸ºé¢˜çš„è§£,å°±æ˜¯è™šçº¿å’Œçº¢çº¿ç›¸åˆ‡çš„ä½ç½®,åœ¨çº¢çº¿çš„å…¶ä»–ä½ç½®,ç§»åŠ¨(x,y)  å­˜åœ¨ä¸€ä¸ªæ–¹å‘,f(x,y)ä¼šå˜å¤§,ä½†æ˜¯åœ¨ç›¸åˆ‡çš„ä½ç½®

   æ— è®ºæ€ä¹ˆç§»åŠ¨,éƒ½ä¼šå˜å°

   ![image-20210722154051631](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722154051631.png)

**æ‹‰æ ¼æœ—æ—¥ä¹˜æ•°æ³•è§£å†³ä¼˜åŒ–é—®é¢˜:**

$max\ f(x,y),s.t.:\ g(x,y)=0$

1. å¼•å…¥ä¸€ä¸ªæ–°çš„å˜é‡  $\lambda$  å«åšæ‹‰æ ¼æœ—æ—¥ä¹˜æ•°

2. æ„é€ æ‹‰æ ¼æœ—æ—¥å‡½æ•°:

   $\mathcal{L}(x,y,\lambda)=f(x,y)-\lambda g(x,y)$

3. æ±‚è§£(ä¸€é˜¶å¯¼æ•°ä¸º0):

   $\nabla_{x,y,\lambda}\mathcal{L}(x,y,\lambda)=0$

4. 3ä¸­çš„ç­‰å¼,å¯ä»¥åˆ†è§£ä¸ºå¯¹ä¸‰ä¸ªå˜é‡x,y,zæ±‚ä¸€é˜¶å¯¼æ•°

   ![image-20210722155218898](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722155218898.png)

### 2.K-means

è¾“å…¥Nä¸ªç‚¹,åˆ†å‰²æˆKç±»

1. éšæœºä»Nä¸ªç‚¹ä¸­é€‰æ‹©Kä¸ªç‚¹ä½œä¸ºä¸­å¿ƒç‚¹
2. éå†å‰©ä¸‹çš„æ‰€æœ‰ç‚¹,æŠŠæ¯ä¸€ä¸ªç‚¹åˆ†é…åˆ°è¿™Kç±»ä¸­çš„ä¸€ä¸ª(è·ç¦»å“ªä¸€ä¸ªæœ€è¿‘å°±åˆ†é…åˆ°å“ªä¸€ä¸ªä¸­å¿ƒç‚¹)
3. é‡æ–°è®¡ç®—æ¯ä¸€ä¸ªç±»ä¸­ç‚¹çš„å‡å€¼ä½œä¸ºæ–°çš„Kä¸ªä¸­å¿ƒç‚¹
4. é‡å¤2-3æ­¥
5. ç›´åˆ°ä¸­å¿ƒç‚¹ç§»åŠ¨è·ç¦»å°äºé˜ˆå€¼,åˆ†é…çš„ç‚¹ä¹Ÿä¸å†å˜åŒ–,æˆ–è€…è¿­ä»£æ¬¡æ•°åˆ°è¾¾è®¾ç½®çš„æ¬¡æ•°,æŸå¤±å‡½æ•°å°äºé˜ˆå€¼

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722160323210.png" alt="image-20210722160323210" style="zoom:80%;" />

+ **K-meansçš„æ•°å­¦è¡¨è¾¾**

  ![image-20210722164613059](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722164613059.png)

  è¿™ä¸ªæŸå¤±å‡½æ•°çš„æ„ä¹‰å°±æ˜¯,æ¯ä¸€ä¸ªç‚¹åˆ°å®ƒæ‰€å±clusterçš„ä¸­å¿ƒç‚¹çš„è·ç¦»ä¹‹å’Œ,k-meansçš„ç›®æ ‡å°±æ˜¯ä¸ºäº†è®©è¿™ä¸ªæŸå¤±å‡½æ•°(å³è·ç¦»ä¹‹å’Œ)æœ€å°

  **E (expectation) step of the EM algorithm:**

  å›ºå®šnæ˜¯ä¸€ä¸ªå¸¸æ•°,é‚£ä¹ˆåªè¦,æ‰¾åˆ°ç¦»å®ƒæœ€è¿‘çš„ä¸­å¿ƒç‚¹å°±è¡Œäº†

  ![image-20210722165152447](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722165152447.png)

  **M (maximization) step of the EM algorithm**

  ![image-20210722165514380](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722165514380.png)

+ **å®è·µä¸­çš„æŠ€å·§**

  + K-meanså—åˆ°åˆå§‹åŒ–çš„å½±å“,æ‰€ä»¥å¯ä»¥è¿è¡Œå¤šæ¬¡k-means,é€‰æ‹©æŸå¤±å‡½æ•°æœ€å°çš„

  + mini-batch K-means

    æ¯æ¬¡è¿­ä»£,åªä»è®­ç»ƒæ•°æ®ä¸­é€‰å–ä¸€ä¸ªå­é›†,è€Œä¸æ˜¯ä½¿ç”¨å…¨éƒ¨æ•°æ®ç‚¹,å°±æ˜¯è¯´,å¯¹äºKä¸ªä¸­å¿ƒç‚¹,åªé€‰nä¸ªç‚¹å»æ›´æ–°ä¸­å¿ƒç‚¹

    è¿™æ ·åšä¼šå‡å°‘è¿è¡Œæ—¶é—´,æœ€ç»ˆç»“æœç¨å¾®æœ‰ç‚¹ä¸å¥½

  + mini-batchå–1å°±ç§°ä¸ºSequential k-means

    1. å¯¹äºæ¯ä¸€ä¸ªæ•°æ®ç‚¹$x_n$,æ‰¾åˆ°è·ç¦»å®ƒæœ€è¿‘çš„ä¸­å¿ƒç‚¹$\mu_k^{old}$

    2. æ›´æ–°ä¸­å¿ƒç‚¹

       $\mu_k^{new}=\mu_k^{old}+\eta_n(x_n-\mu_k^{old})$

    $\eta_n$ä»£è¡¨å­¦ä¹ ç‡

    è¿™ç§k-meansé€‚ç”¨ä¸æ•°æ®é€’å¢çš„æƒ…å†µ,æ•°æ®å¹¶ä¸æ˜¯ä¸€æ¬¡è·å–çš„

+ **K-Medoids**

  æ ‡å‡†çš„k-meansä½¿ç”¨æ¬§å¼è·ç¦»,åœ¨æœ‰äº›æƒ…å†µä¸­ä¼šæœ‰é—®é¢˜

  1. æœ‰ç¦»ç¾¤ç‚¹,éå¸¸å®¹æ˜“å—åˆ°å™ªå£°çš„å½±å“
  2. å¯¹äºæ•°æ®ç‚¹çš„ç±»å‹æœ‰é™åˆ¶,å¦‚æœç‚¹çš„ç±»å‹è¡¨ç¤ºç±»åˆ«,

  ![image-20210722171356104](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722171356104.png)

  k-ä¸­å¿ƒç‚¹èšç±»çš„æ­¥éª¤

  è¾“å…¥Nä¸ªç‚¹,åˆ†å‰²æˆKç±»

  1. éšæœºä»Nä¸ªç‚¹ä¸­é€‰æ‹©Kä¸ªç‚¹ä½œä¸ºä¸­å¿ƒç‚¹
  2. éå†å‰©ä¸‹çš„æ‰€æœ‰ç‚¹,æŠŠæ¯ä¸€ä¸ªç‚¹åˆ†é…åˆ°è¿™Kç±»ä¸­çš„ä¸€ä¸ª(è·ç¦»å“ªä¸€ä¸ªæœ€è¿‘å°±åˆ†é…åˆ°å“ªä¸€ä¸ªä¸­å¿ƒç‚¹)
  3. é‡æ–°è®¡ç®—æ¯ä¸€ä¸ªç±»çš„ä¸­å¿ƒç‚¹,å¾—åˆ°æ–°çš„Kä¸ªä¸­å¿ƒç‚¹
     3. é‡æ–°è®¡ç®—æ¯ä¸€ä¸ªç±»çš„ä¸­å¿ƒç‚¹è®¡ç®—æ–¹æ³•:åœ¨åŒä¸€ä¸ªç±»ä¸­,è®¡ç®—æ¯ä¸€ä¸ªç‚¹åˆ°å…¶ä¸­æ‰€æœ‰ç‚¹çš„è·ç¦»ä¹‹å’Œ,é€‰æ‹©è·ç¦»ä¹‹å’Œæœ€å°çš„é‚£ä¸ªæ•°æ®ç‚¹ä½œä¸ºæ–°çš„ä¸­å¿ƒç‚¹
  4. é‡å¤2-3æ­¥
  5. ç›´åˆ°ä¸­å¿ƒç‚¹ç§»åŠ¨è·ç¦»å°äºé˜ˆå€¼,åˆ†é…çš„ç‚¹ä¹Ÿä¸å†å˜åŒ–,æˆ–è€…è¿­ä»£æ¬¡æ•°åˆ°è¾¾è®¾ç½®çš„æ¬¡æ•°

+ **k-meansçš„ç¼ºç‚¹**

  + Kæ˜¯æœªçŸ¥çš„

  + å¯¹å™ªå£°å¾ˆæ•æ„Ÿ

  + ä¸€ä¸ªç‚¹è¦ä¹ˆå±äºä¸€ä¸ªç±»,è¦ä¹ˆå±äºå¦ä¸€ä¸ªç±»,æ²¡æœ‰ç½®ä¿¡åº¦,å¯¹äºåœ¨è¾¹ç•Œä¸Šé¢çš„ç‚¹,å¾ˆéš¾åˆ†ç±»å‡†ç¡®,GMMè§£å†³äº†è¿™ä¸ªé—®é¢˜

    ![image-20210722172558316](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722172558316.png)

### 3.GMM

æœªçœ‹,æœ‰ç‚¹å¤æ‚



### 4.Spectral Clustering è°±èšç±»

K-meanså’ŒGMMéƒ½æ˜¯åŸºäºæ¬§æ°è·ç¦»çš„,è¿™å°±æ— å½¢ä¸­æœ‰ä¸ªå‡è®¾,æ¯ä¸€ç±»éƒ½æ˜¯åœ†å½¢çš„,æˆ–è€…æ¤­åœ†çš„,æ˜¯ä¸ªå‡¸çš„å½¢çŠ¶,å¯¹äºä¸æ˜¯å‡¸çš„å½¢çŠ¶,èšç±»å°±ä¼šå¤±è´¥

è°±èšç±»ç”¨å›¾æ¥èšç±»,ä½¿ç”¨æ•°æ®ç‚¹ä¹‹é—´çš„è¿æ¥æ€§æ¥èšç±»

![image-20210722174339411](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722174339411.png)

+ **å¸¦æƒé‡çš„æ— å‘å›¾**

  ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´çš„æƒé‡ä»£è¡¨å®ƒä»¬çš„ç›¸ä¼¼æ€§

  ç”¨æƒé‡çŸ©é˜µ(ç›¸ä¼¼æ€§çŸ©é˜µ)çš„å½¢å¼æ¥è¡¨ç¤ºè¿™ä¸ªæ— å‘å›¾

  ![image-20210722175048591](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722175048591.png)

+ **å»ºç«‹æ— å‘å›¾,ç›¸ä¼¼æ€§çŸ©é˜µçš„æ–¹æ³•**











+ **æ€»ç»“**

  å¤æ‚åº¦O(n^3)

  ä¼˜ç‚¹:

  + å¯¹ç±»åˆ«çš„ç‰¹å¾æ²¡æœ‰è¦æ±‚
  + æ”¯æŒä»»ä½•ç»´åº¦çš„æ•°æ®
  + å¯ä»¥è‡ªåŠ¨ä¼°è®¡ç±»åˆ«çš„ä¸ªæ•°
  + åŸºäºç›¸ä¼¼æ€§è¿›è¡Œèšç±»,æ¬§å¼è·ç¦»,è¿æ¥æ€§

  ç¼ºç‚¹:

  â€‹	è®¡ç®—é‡å¤ªå¤§



### 5.Mean Shift 

+ **å¼•è¨€**

  ![image-20210722203448673](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722203448673.png)

ç»™ä¸€å †å¹³é¢ä¸Šçš„ç‚¹,ç»™ä¸€ä¸ªåœ†,æ‰¾åˆ°ä¸€ä¸ªä½ç½®,è¿™ä¸ªåœ†ä¸­çš„ç‚¹æœ€å¤š,

ä¸€ç§åšæ³•,æ˜¯éå†æ‰€æœ‰ç‚¹,åšåŠå¾„ä¸ºrçš„æœ€è¿‘é‚»æœç´¢,è®°å½•ç‚¹æ•°,æœ€åå–æœ€å¤§å€¼æ‰€åœ¨çš„ä½ç½®,è¿™æ ·å¤æ‚åº¦å¤ªé«˜äº†,

ä¸€ç§è¿‘ä¼¼çš„åšæ³•æ˜¯,éšæœºæ‰¾ä¸€ä¸ªä½ç½®æ”¾ç½®ä¸€ä¸ªåŠå¾„ä¸ºrçš„åœ†,æ±‚è¿™ä¸ªåœ†åŒ…å›´çš„ç‚¹çš„å¹³å‡å€¼(è´¨å¿ƒ),æŠŠè¿™ä¸ªåœ†ç§»åŠ¨åˆ°è¿™é‡Œ,

ç„¶åå†æ±‚è¿™ä¸ªåœ†åŒ…å›´çš„ç‚¹çš„å¹³å‡å€¼(è´¨å¿ƒ),ç§»åŠ¨åœ†,ç›´åˆ°åœ†çš„ä½ç½®ä¸å†å‘ç”Ÿå˜åŒ–;

è¿™æ ·åšç±»ä¼¼ä¸çˆ¬å±±,æœ€åçš„ç»“æœå’Œæ•°æ®çš„åˆ†å¸ƒæœ‰å…³,åªä¼šæ‰¾åˆ°ä¸€ä¸ªå±€éƒ¨æœ€ä¼˜è§£,å’Œåˆå§‹å€¼çš„é€‰æ‹©å…³ç³»å¾ˆå¤§;

è¿™å°±æ˜¯mean-shiftçš„æ ¸å¿ƒæ€æƒ³(ç§»åŠ¨meanå‡å€¼)

+ **èšç±»æ­¥éª¤**

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722204213742.png" alt="image-20210722204213742" style="zoom:80%;" />

  1. éšæœºæ”¾ç½®ä¸€ä¸ªåŠå¾„ä¸º r çš„åœ†

  2. ç§»åŠ¨è¿™ä¸ªåœ†åˆ°åŒ…å›´ç‚¹çš„è´¨å¿ƒ

  3. é‡å¤step-2,ç›´åˆ°è´¨å¿ƒä¸å†å‘ç”Ÿå˜åŒ–

  4. é‡å¤setp-1,2,3,å¾—åˆ°å¾ˆå¤šä¸ªåœ†,å»é™¤é‡å çš„åœ†:

     å¦‚æœæœ‰ä¸¤ä¸ªåœ†é‡å ,å°±é€‰æ‹©åŒ…å›´æœ€å¤šç‚¹çš„åœ†

  5. ç¡®å®šèšç±»ç»“æœ:æ¯ä¸€ä¸ªç‚¹è¢«åˆ†é…åˆ°ç¦»å®ƒæœ€è¿‘çš„åœ†çš„ä¸­å¿ƒä»£è¡¨çš„ç±»

  å”¯ä¸€éœ€è¦çš„å‚æ•°:åœ†çš„åŠå¾„ r

+ **æ€»ç»“**

  + **æ—¶é—´å¤æ‚åº¦**$O(T.n.log(n))$
    + Tæ˜¯åœ†çš„ä¸ªæ•°
    + n.log(n)æ˜¯æ¯æ¬¡çˆ¬å±±çš„å¤æ‚åº¦,ä½¿ç”¨kdæ•°æ¥å°±æœ€è¿‘é‚»æœç´¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(logn)

  + **ä¼˜ç‚¹**
    + è‡ªåŠ¨å‘ç°ç±»çš„æ•°é‡
    + åªéœ€è¦ä¸€ä¸ªå‚æ•°
    + å¯¹å™ªå£°ä¸æ•æ„Ÿ
  + **ç¼ºç‚¹**
    + çˆ¬å±±ä¼šé™·å…¥å±€éƒ¨æœ€ä¼˜
    + ä¾èµ–åˆå§‹å€¼
    + å‡è®¾ç±»åˆ«çš„å½¢çŠ¶æ˜¯å‡¸ çš„ ,æ¯”å¦‚æ¤­åœ†
    + ä¸»è¦å·¥ä½œåœ¨æ¬§å¼ç©ºé—´
    + ä¸é€‚åº”åœ¨é«˜ç»´æ•°æ®,å› ä¸ºé«˜ç»´ç©ºé—´ä¸€èˆ¬éƒ½å¾ˆç¨€ç–

### 6.DBSCAN

![image-20210722205741268](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722205741268.png)



**å¯†åº¦èšç±»æ­¥éª¤:**

é¦–å…ˆæŠŠæ‰€æœ‰ç‚¹éƒ½æ ‡è®°ä¸ºæ²¡æœ‰è®¿é—®è¿‡`unvisited`

**å‚æ•°**:åŠå¾„`r`,æœ€å°ç‚¹æ•°:`min_samples`

1. éšæœºé€‰æ‹©ä¸€ä¸ªæ²¡æœ‰è®¿é—®è¿‡çš„ç‚¹p,æ‰¾åˆ°å®ƒåŠå¾„ä¸ºrå†…çš„é‚»å±…

2. åˆ¤æ–­åŠå¾„ä¸ºrå†…çš„ç‚¹çš„æ•°é‡æ˜¯å¦å¤§äº`min_samples`

   1. yes,pæ˜¯ä¸€ä¸ª**æ ¸å¿ƒç‚¹**,åˆ›å»ºä¸€ä¸ªç±»`C`,è¿›å…¥step-3,æŠŠpæ ‡è®°ä¸º`visited`
   2. no,æŠŠpæ ‡è®°ä¸ºå™ªå£°ç‚¹,å¹¶æ ‡è®°ä¸º`visited`

3. éå†æ ¸å¿ƒç‚¹påŠå¾„rå†…çš„ç‚¹,æ ‡è®°ä¸ºç±»åˆ«C,å¹¶æ ‡è®°ä¸º`visited`

   å¦‚æœéå†åˆ°çš„ç‚¹ä¹Ÿæ˜¯æ ¸å¿ƒç‚¹,å°±æŠŠå®ƒè®¾ç½®ä¸ºæ–°çš„p,é‡å¤step-3

   å¦‚æœä¸æ˜¯æ ¸å¿ƒç‚¹,å°±åœæ­¢

4. ä»æ•°æ®é›†ä¸­æŠŠç±»åˆ« C çš„æ•°æ®å»é™¤,å›åˆ°step-1

5. ç›´åˆ°æ‰€æœ‰çš„ç‚¹éƒ½`visited`ä¸ºæ­¢

![image-20210722211945986](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722211945986.png)



+ **æ ¸å¿ƒç‚¹:**

  åŠå¾„rå†…çš„ç‚¹æ•°å¤§äºé˜ˆå€¼çš„ç‚¹

+ **è¾¹ç¼˜ç‚¹:**

  åœ¨ä¸€ä¸ªæ ¸å¿ƒç‚¹çš„åŠå¾„rèŒƒå›´å†…,ä»ç„¶æ˜¯ç±»Cçš„ä¸€éƒ¨åˆ†,ä½†æ˜¯å®ƒrå†…ç‚¹æ•°å°äºé˜ˆå€¼,ä¸æ˜¯æ ¸å¿ƒç‚¹,ä¸ä¼šä»¥å®ƒä¼šä¸­å¿ƒå‘å¤–æ‰©å¼ ,æ‰€ä»¥å®ƒä»¬æ˜¯ä¸€ä¸ªç±»çš„è¾¹ç¼˜

+ **å™ªå£°ç‚¹:**

  åŠå¾„rå†…çš„ç‚¹æ•°å°äºé˜ˆå€¼çš„ç‚¹

![image-20210722212437418](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722212437418.png)

+ **æ€»ç»“**

  å¤æ‚åº¦:$O(n.log(n))$

  ä¼˜ç‚¹:

  1. å¯¹ç±»åˆ«çš„å½¢çŠ¶æ²¡æœ‰è¦æ±‚
  2. è‡ªåŠ¨å‘ç°æ•°æ®ä¸­çš„ç±»
  3. å¯¹äºå™ªå£°ä¸æ•æ„Ÿ

  ç¼ºç‚¹:

  1. å¯¹äºå¯†åº¦ä¸å‡åŒ€çš„æ•°æ®å¯èƒ½å¤„ç†æ•ˆæœä¸æ˜¯å¾ˆå¥½,DBSCANå‡è®¾é«˜å¯†åº¦ç±»ä¹‹é—´è¢«ç¨€ç–çš„æ•°æ®ç»™åˆ†éš”å¼€
  2. ä¸»è¦å·¥ä½œåœ¨æ¬§å¼ç©ºé—´
  3. ä¸é€‚ç”¨äºé«˜ç»´ç©ºé—´,å› ä¸ºé«˜ç»´ç©ºé—´ä¸€èˆ¬éƒ½å¾ˆç¨€ç–

```C++
#ifndef DBSCAN_H
#define DBSCAN_H

#include <vector>
#include <cmath>

#define UNCLASSIFIED -1
#define CORE_POINT 1
#define BORDER_POINT 2
#define NOISE -2
#define SUCCESS 0
#define FAILURE -3

using namespace std;

typedef struct Point_
{
    float x, y, z;  // X, Y, Z position
    int clusterID;  // clustered ID
}Point;

class DBSCAN {
public:    
    DBSCAN(unsigned int minPts, float eps, vector<Point> points){
        m_minPoints = minPts;
        m_epsilon = eps;
        m_points = points;
        m_pointSize = points.size();
    }
    ~DBSCAN(){}

    int run();
    vector<int> calculateCluster(Point point);
    int expandCluster(Point point, int clusterID);
    inline double calculateDistance(const Point& pointCore, const Point& pointTarget);

    int getTotalPointSize() {return m_pointSize;}
    int getMinimumClusterSize() {return m_minPoints;}
    int getEpsilonSize() {return m_epsilon;}
    
public:
    vector<Point> m_points;
    
private:    
    unsigned int m_pointSize;
    unsigned int m_minPoints;
    float m_epsilon;
};

#endif // DBSCAN_H
```



```C++
#include "dbscan.h"

int DBSCAN::run()
{
    int clusterID = 1;
    vector<Point>::iterator iter;
    for(iter = m_points.begin(); iter != m_points.end(); ++iter)
    {
        if ( iter->clusterID == UNCLASSIFIED )
        {
            if ( expandCluster(*iter, clusterID) != FAILURE )
            {
                clusterID += 1;
            }
        }
    }

    return 0;
}

int DBSCAN::expandCluster(Point point, int clusterID)
{    
    vector<int> clusterSeeds = calculateCluster(point);

    if ( clusterSeeds.size() < m_minPoints )
    {
        point.clusterID = NOISE;
        return FAILURE;
    }
    else
    {
        int index = 0, indexCorePoint = 0;
        vector<int>::iterator iterSeeds;
        for( iterSeeds = clusterSeeds.begin(); iterSeeds != clusterSeeds.end(); ++iterSeeds)
        {
            m_points.at(*iterSeeds).clusterID = clusterID;
            if (m_points.at(*iterSeeds).x == point.x && 
                m_points.at(*iterSeeds).y == point.y && 
                m_points.at(*iterSeeds).z == point.z )
            {
                indexCorePoint = index;
            }
            ++index;
        }
        clusterSeeds.erase(clusterSeeds.begin()+indexCorePoint);

        for( vector<int>::size_type i = 0, n = clusterSeeds.size(); i < n; ++i )
        {
            vector<int> clusterNeighors = calculateCluster(m_points.at(clusterSeeds[i]));

            if ( clusterNeighors.size() >= m_minPoints )
            {
                vector<int>::iterator iterNeighors;
                for ( iterNeighors = clusterNeighors.begin(); iterNeighors != clusterNeighors.end(); ++iterNeighors )
                {
                    if ( m_points.at(*iterNeighors).clusterID == UNCLASSIFIED || 
                        m_points.at(*iterNeighors).clusterID == NOISE )
                    {
                        if ( m_points.at(*iterNeighors).clusterID == UNCLASSIFIED )
                        {
                            clusterSeeds.push_back(*iterNeighors);
                            n = clusterSeeds.size();
                        }
                        m_points.at(*iterNeighors).clusterID = clusterID;
                    }
                }
            }
        }

        return SUCCESS;
    }
}

vector<int> DBSCAN::calculateCluster(Point point)
{
    int index = 0;
    vector<Point>::iterator iter;
    vector<int> clusterIndex;
    for( iter = m_points.begin(); iter != m_points.end(); ++iter)
    {
        if ( calculateDistance(point, *iter) <= m_epsilon )
        {
            clusterIndex.push_back(index);
        }


        index++;
    }
    return clusterIndex;
}

inline double DBSCAN::calculateDistance(const Point& pointCore, const Point& pointTarget )
{
    return pow(pointCore.x - pointTarget.x,2)+pow(pointCore.y - pointTarget.y,2)+pow(pointCore.z - pointTarget.z,2);
}
```





### 7.èšç±»æ€»ç»“

![image-20210722213105367](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722213105367.png)

![image-20210722213122391](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210722213122391.png)

è°±èšç±»çš„æ•ˆæœæœ€å¥½,ä½†æ˜¯æ—¶é—´å¤æ‚åº¦å¤ªé«˜O(n^3)

ä¸€èˆ¬ä½¿ç”¨DBSCAN,æ—¶é—´å¤æ‚åº¦O(nlogn),æ¯”è¾ƒå¿«,ç„¶åä»”ç»†è°ƒä¸€ä¸‹å‚æ•°

åœ¨ç‚¹äº‘åˆ†å‰²ä¸­,å› ä¸ºè¿œå¤„çš„ç‚¹æ¯”è¾ƒç¨€ç–,æ‰€ä»¥min_pointséœ€è¦è‡ªé€‚åº”å˜åŒ–,è·ç¦»è¶Šè¿œ,è¿™ä¸ªå€¼è¶Šå¤§

### 8.RBNN

`A clustering method for efficient segmentation of 3D laser data (Klasing,ICRA-2008)`

![image-20210728093020724](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728093020724.png)

```C++
void FH_RBNNObjectClustering::startObjectSegmentation() {
    output_objects_.clear();

    M_tree_->build_tree(M_num_);
    // all segs without filtering
    std::vector<seg> tempSegVector;
    tempSegVector.clear();

    seg tempSeg;
    tempSeg.segIndex = 0;
    tempSeg.pointsVector.clear();
    tempSeg.pointsIndexVector.clear();
    tempSeg.intensityVector.clear();
    tempSeg.segLabel = -1;
    tempSeg.like_vehicle = false;
    tempSeg.deleted_ = false;

    // æ¯ä¸ªç‚¹å±äºçš„ç±»åˆ«ä¸º-1
    std::vector<int> SegmentIndex(M_num_, -1);

    std::vector<int> pointIdxRadiusSearch;

    //åˆå§‹åŒ–æ˜¯0ç±»
    int nowSegIndex = 0;
    double radius = 0;
    /*
    struct KDTreeResult
    {
    public:
        float dis;  // square distance
        int idx;    // neighbor index
    };
    */
    FH_kdtree::KDTreeResultVector neighbor;
    std::vector<float>            query(3);

    unsigned char tmp_intensity;

    float this_x, this_y, this_z, this_distance;

    for(int i = 0; i < M_num_; i++) {
        // if this point has been clustered,continue
        if(SegmentIndex[i] != -1) {
            continue;
        }
        pointIdxRadiusSearch.clear();

        //distance
        this_x = M_data_[i * 3];
        this_y = M_data_[i * 3 + 1];
        this_z = M_data_[i * 3 + 2];
        this_distance = sqrt(this_x * this_x + this_y * this_y);
        if (this_distance < 10.0) { //è·ç¦»è½¦å­è¾ƒè¿‘æ—¶å–å°çš„radius
            radius = r_;
        }
//        else if (sqrt(M_data[i*3]*M_data[i*3] + M_data[i*3+1]*M_data[i*3+1])<35.0)
//            radius=r;
//        else
//            radius=2*r;
        else
            //è·ç¦»è¾ƒè¿œæ—¶,å°±éšè·ç¦»è‡ªé€‚åº”å˜åŒ–
        {
            radius = this_distance * 0.037;
        }

        query[0] = this_x;
        query[1] = this_y;
        query[2] = this_z;
        // æœç´¢è·ç¦»query radiusé™„è¿‘çš„ç‚¹,æŠŠæœç´¢åˆ°çš„ç‚¹çš„idxå’Œè·ç¦»æ”¾åœ¨neighboré‡Œé¢
        M_tree_->r_nearest(query, radius, neighbor);
        //pointIdxRadiusSearch è¡¨ç¤ºré¢†åŸŸå†…ç‚¹çš„ç´¢å¼•
        for(int j = 0; j < neighbor.size(); j++) {
            pointIdxRadiusSearch.push_back(neighbor[j].idx);
        }

        for (int j = 0; j < pointIdxRadiusSearch.size(); j++) {
            int searched_point_idx = pointIdxRadiusSearch[j];
            // query_point itself
            if (searched_point_idx == i) {
                continue;
            }
            // NOTE(swc):å½“å‰ç‚¹å’Œæœç´¢ç‚¹çš„ç±»åˆ«å…±æœ‰å››ç§æƒ…å†µ,ä¸‹é¢æ˜¯å¯¹è¿™å››ç§æƒ…å†µåˆ†åˆ«å¤„ç†
            // ç¬¬ä¸€ç§æƒ…å†µ: å¦‚æœå½“å‰ç‚¹è¢«èšç±» ä¸” æœç´¢ç‚¹è¢«èšç±»
            // å°±æŠŠæœç´¢åˆ°çš„ç‚¹æ‰€å±çš„ç‚¹äº‘ç°‡ä¸­çš„ç‚¹éƒ½æ”¾åˆ°å½“å‰ç‚¹æ‰€å±çš„ç±»åˆ«ä¸­,æŠŠæœç´¢åˆ°çš„ç‚¹çš„ç±»åˆ«è®¾ä¸ºå½“å‰ç‚¹ç±»åˆ«
            // å¹¶æ¸…ç©ºæœç´¢ç‚¹æ‰€å±çš„ç±»åˆ«ä¸­çš„ç‚¹äº‘
            if (SegmentIndex[i] != -1 && SegmentIndex[searched_point_idx] != -1) {
                // if these two points have different segment_idx,then merge clusters
                // TODO(swc):ç”¨mergecluster()å‡½æ•°é‡å†™
                if (SegmentIndex[i] != SegmentIndex[searched_point_idx]) {
                    int searched_point_ClusterIndex = SegmentIndex[searched_point_idx];
                    int pointvectorNum = tempSegVector[searched_point_ClusterIndex].pointsVector.size();

                    for (int k = 0; k < pointvectorNum; k++) {
                        int index1 = tempSegVector[searched_point_ClusterIndex].pointsIndexVector[k];
                        float3D point1 = tempSegVector[searched_point_ClusterIndex].pointsVector[k];
                        tmp_intensity = tempSegVector[searched_point_ClusterIndex].intensityVector[k];

                        tempSegVector[SegmentIndex[i]].pointsIndexVector.push_back(index1);
                        tempSegVector[SegmentIndex[i]].pointsVector.push_back(point1);
                        tempSegVector[SegmentIndex[i]].intensityVector.push_back(tmp_intensity);

                        int index2 = tempSegVector[searched_point_ClusterIndex].pointsIndexVector[k];
                        SegmentIndex[index2] = SegmentIndex[i];
                    }
                    tempSegVector[searched_point_ClusterIndex].pointsIndexVector.clear();
                    tempSegVector[searched_point_ClusterIndex].pointsVector.clear();
                }
            }
            //
            else {
                float3D tempPoint;
                // ç¬¬äºŒç§æƒ…å†µ: å¦‚æœå½“å‰ç‚¹æ²¡æœ‰è¢«èšç±» ä¸” æœç´¢ç‚¹è¢«èšç±»è¿‡äº†,å°±è®¤ä¸ºå½“å‰ç‚¹æ‰€å±ç±»åˆ«å’Œæœç´¢ç‚¹ä¸€æ ·
                if (SegmentIndex[searched_point_idx] != -1) {
                    SegmentIndex[i] = SegmentIndex[searched_point_idx];
                    tempPoint.x = M_data_[i * 3];
                    tempPoint.y = M_data_[i * 3 + 1];
                    tempPoint.z = M_data_[i * 3 + 2];
                    tmp_intensity = intensity_s_[i];
                    tempSegVector[SegmentIndex[searched_point_idx]].pointsIndexVector.push_back(i);
                    tempSegVector[SegmentIndex[searched_point_idx]].pointsVector.push_back(tempPoint);
                    tempSegVector[SegmentIndex[searched_point_idx]].intensityVector.push_back(tmp_intensity);
                }
                // ç¬¬ä¸‰ç§æƒ…å†µ: å¦‚æœæœç´¢ç‚¹æ²¡æœ‰è¢«èšç±» ä¸” å½“å‰ç‚¹è¢«èšç±»è¿‡äº†,å°±è®¤ä¸ºæœç´¢ç‚¹æ‰€å±ç±»åˆ«å’Œå½“å‰ç‚¹ä¸€æ ·
                else {
                    if (SegmentIndex[i] != -1) {
                        SegmentIndex[searched_point_idx] = SegmentIndex[i];
                        tempPoint.x = M_data_[searched_point_idx * 3];
                        tempPoint.y = M_data_[searched_point_idx * 3 + 1];
                        tempPoint.z = M_data_[searched_point_idx * 3 + 2];
                        tmp_intensity = intensity_s_[searched_point_idx];
                        tempSegVector[SegmentIndex[i]].pointsIndexVector.push_back(pointIdxRadiusSearch[j]);
                        tempSegVector[SegmentIndex[i]].pointsVector.push_back(tempPoint);
                        tempSegVector[SegmentIndex[i]].intensityVector.push_back(tmp_intensity);
                    }
                }
            }
        }
        // ç¬¬å››ç§æƒ…å†µ: æœç´¢ç‚¹å’Œå½“å‰ç‚¹éƒ½æ²¡æœ‰è¢«èšç±»
        // if there is still no cluster, create a new one and assign all neighbors to it
        if (SegmentIndex[i] == -1) {
            float3D tempPoint;
            SegmentIndex[i] = nowSegIndex;
            tempSeg.segIndex = nowSegIndex;

            tmp_intensity = intensity_s_[i];
            tempPoint.x = M_data_[i * 3];
            tempPoint.y = M_data_[i * 3 + 1];
            tempPoint.z = M_data_[i * 3 + 2];

            tempSeg.pointsVector.push_back(tempPoint);
            tempSeg.pointsIndexVector.push_back(i);
            tempSeg.intensityVector.push_back(tmp_intensity);

            for (int j = 0; j < pointIdxRadiusSearch.size(); j++) {
                if (pointIdxRadiusSearch[j] == i) {
                    continue;
                }
                SegmentIndex[pointIdxRadiusSearch[j]] = SegmentIndex[i];
                float3D tempPoint;
                tempPoint.x = M_data_[pointIdxRadiusSearch[j] * 3];
                tempPoint.y = M_data_[pointIdxRadiusSearch[j] * 3 + 1];
                tempPoint.z = M_data_[pointIdxRadiusSearch[j] * 3 + 2];
                tmp_intensity = intensity_s_[pointIdxRadiusSearch[j]];

                tempSeg.pointsVector.push_back(tempPoint);
                tempSeg.pointsIndexVector.push_back(pointIdxRadiusSearch[j]);
                tempSeg.intensityVector.push_back(tmp_intensity);
            }

            tempSegVector.push_back(tempSeg);

            tempSeg.intensityVector.clear();
            tempSeg.pointsVector.clear();
            tempSeg.pointsIndexVector.clear();
            tempSeg.segLabel = -1;
            tempSeg.segIndex = -1;

            nowSegIndex++;
        }
    }
    //================å»é™¤ç‚¹æ•°å°äºnMinçš„ç±»===============
    int   tmp_nMin, tmp_point_num;
    float tmp_distance, tmp_x, tmp_y;
    for (size_t l = 0; l < tempSegVector.size(); l++) {
        tmp_point_num = tempSegVector[l].pointsVector.size();
        if(tmp_point_num >= 1) {
            tmp_x = tempSegVector[l].pointsVector[0].x;
            tmp_y = tempSegVector[l].pointsVector[0].y;
            tmp_distance = sqrt(tmp_x * tmp_x + tmp_y * tmp_y);
            // æ ¹æ®ç‰©ä½“çš„è¿œè¿‘ç¡®å®šæœ€å°‘ç‚¹æ•°
            if(tmp_distance > 50) {
                tmp_nMin = nMin_ / 4;
            } else if(tmp_distance > 30) {
                tmp_nMin = nMin_ / 2;
            } else {
                tmp_nMin = nMin_;
            }
            if (tmp_point_num >= tmp_nMin) {
                calculateSegAttribute(tempSegVector[l]);
                output_objects_.push_back(tempSegVector[l]);
            }
        }
    }
}
```

## class 4 Model Fitting

|                                                              |                                                              |                                                              |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| ![image-20210728100737871](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728100737871.png) | ![image-20210728100749690](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728100749690.png) | ![image-20210728100806964](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728100806964.png) |



+ **çŸ¥é“å“ªäº›æ˜¯å†…ç‚¹**

  ä½¿ç”¨æœ€å°äºŒä¹˜

+ **æœ‰å°‘é‡çš„å¤–ç‚¹,ä¸çŸ¥é“å†…ç‚¹å’Œå¤–ç‚¹æ˜¯å“ªäº›**

  + Robust Least Square  eg: robust loss function
  + Hough Transform
  + RANSAC

+ **æœ‰å¤§é‡çš„å¤–ç‚¹**

  + Hough Transform
  + RANSAC

### 1.Least Square Fitting

æœ€å°äºŒä¹˜æ‹Ÿåˆ:æŠŠé—®é¢˜è½¬æ¢æˆå¹³æ–¹å’Œçš„å½¢å¼

![image-20210728101044440](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728101044440.png)

+ ç»™å®šnä¸ªç‚¹$\{p_1,...,p_n\}$,æ‰¾åˆ°ä¸€æ¡ç›´çº¿å»æ‹Ÿåˆè¿™äº›ç‚¹
+ äºŒç»´ç‚¹$p_i\in R^2=(x,y)$ç›´çº¿æ¨¡å‹:$ax+by+c=0$

+ æ‹Ÿåˆå°±æ˜¯è®©ç‚¹åˆ°è¿™æ¡ç›´çº¿çš„è·ç¦»æœ€å°,$p_i=(x_i,y_i)$åˆ°ç›´çº¿çš„è·ç¦»æ˜¯

  ![image-20210728101544446](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728101544446.png)

æŸå¤±å‡½æ•°

![image-20210728101827539](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728101827539.png)



+ **ç”¨çŸ©é˜µçš„å½¢å¼å»å†™,ç»„ç»‡æˆæ ‡å‡†çš„æœ€å°äºŒä¹˜é—®é¢˜**

  ![image-20210728102410158](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728102410158.png)

  Aæ˜¯åˆ—æ»¡ç§©çš„,æ•°æ®ç‚¹è¦è¶³å¤Ÿå¤š,n>=3

  xçš„è§£å°±æ˜¯,çŸ©é˜µAçš„æœ€å°ç‰¹å¾å€¼å¯¹åº”çš„ç‰¹å¾å‘é‡,ä½¿ç”¨[SVDåˆ†è§£](./SVDå¥‡å¼‚å€¼åˆ†è§£.md)

+ **æœ‰å¾ˆå¤šæ¨¡å‹æ‹Ÿåˆé—®é¢˜å¯ä»¥è½¬æ¢ä¸ºLSQæœ€å°äºŒä¹˜é—®é¢˜**

  LSQä¸»è¦æœ‰ä¸‰ç§å½¢å¼

  ![image-20210728103806205](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728103806205.png)

+ **æœ€å°äºŒä¹˜æ³•å¯¹å™ªå£°éå¸¸æ•æ„Ÿ**

  ![image-20210728103926515](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728103926515.png)

+ **æ”¹è¿›æŸå¤±å‡½æ•°,å‡å°‘å™ªå£°çš„å½±å“**
  + L1       $\rho=|s|$
  + L2       $\rho=s^2$
  + Cauchy  $\rho=log(1+|s|)$
  + Huber![image-20210728104542275](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728104542275.png)

![image-20210728104307355](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728104307355.png)

â€‹      é—®é¢˜å˜æˆäº†éçº¿æ€§é—®é¢˜,ä¸èƒ½ä½¿ç”¨çŸ©é˜µåˆ†è§£å»æ±‚è§£

+ **éçº¿æ€§LSQ**

  LSQçš„ä¸€èˆ¬å½¢å¼:

  $\hat x=argmin||f(x)||^2$

  f æ˜¯éçº¿æ€§å‡½æ•°,æ¯”å¦‚è¯´,ä½¿ç”¨äº†cauchyæŸå¤±å‡½æ•°çš„çº¿æ€§LSQ

  ä½¿ç”¨ä¼˜åŒ–çš„æ–¹æ³•è¿›è¡Œæ±‚è§£

  + æ¢¯åº¦ä¸‹é™
  + é«˜æ–¯ç‰›é¡¿
  + Levenberg-Marquardt(L-M)

+ **æ€»ç»“**
  + é€‚ç”¨äºæ²¡æœ‰å™ªå£°æˆ–å™ªå£°æ¯”è¾ƒå°‘çš„æƒ…å†µ,å™ªç‚¹æ¯”è¾ƒå¤š,æ•ˆæœå¾ˆå·®
  + ç®€å•,è®¡ç®—éå¸¸å¿«,åªè¦è®¡ç®—æ•°æ®ç‚¹çš„ç‰¹å¾å‘é‡
  + æ— æ³•å¤„ç†åœ¨æ•°æ®ä¸­ä¸æ­¢æœ‰ä¸€ä¸ªæ¨¡å‹çš„æƒ…å†µ,æ¯”å¦‚æœ‰ä¸¤æ¡ç›´çº¿



+ **ä¸€èˆ¬è§£æ³•**

  ![image-20210827111925795](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210827111925795.png)

  ![image-20210827111954712](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210827111954712.png)

![image-20210827112024552](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210827112024552.png)

### 2.Hough Transform

**éœå¤«å˜æ¢**

æ¬§å¼ç©ºé—´è½¬æ¢åˆ°å‚æ•°ç©ºé—´

æ¬§å¼ç©ºé—´ä¸­çš„ä¸€æ¡ç›´çº¿,æ˜¯å‚æ•°ç©ºé—´çš„ä¸€ä¸ªç‚¹:

![image-20210728110542688](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728110542688.png)



æ¬§å¼ç©ºé—´:

$y=m_0 x+b_0$, å¯¹äºæ‰€æœ‰çš„$x,y$éƒ½æ»¡è¶³

å³:

$b_0=-m_0x+y$,å¯¹äºæ‰€æœ‰çš„$x,y$éƒ½æ»¡è¶³

æ‰€ä»¥åœ¨å‚æ•°ç©ºé—´æ˜¯ä¸€ä¸ªç‚¹

åŒç†,æ¬§å¼ç©ºé—´çš„ä¸€ä¸ªç‚¹å¯¹åº”å‚æ•°ç©ºé—´çš„ä¸€æ¡ç›´çº¿

è¿™æ ·å¯¹äºæ‰€æœ‰çš„Nä¸ªæ•°æ®ç‚¹,åœ¨å‚æ•°ç©ºé—´å°±æœ‰Næ¡ç›´çº¿,é€‰æ‹©ç›´çº¿æœ€å¤šçš„äº¤ç‚¹ä»£è¡¨çš„å‚æ•°ä½œä¸ºç›´çº¿æ‹Ÿåˆçš„ç»“æœ

![image-20210728111057606](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728111057606.png)

![image-20210728111132928](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728111132928.png)

+ **æ€»ç»“**

  ![image-20210728111413704](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728111413704.png)

### 3.RANSAC

ä¸å—é™ä¸æ¨¡å‹çš„å¤æ‚åº¦å’Œå‚æ•°æ•°é‡

åªå’Œå†…ç‚¹ä¸ªæ•°æœ‰å…³,åªè¦å†…ç‚¹è¶³å¤Ÿå¤š,å°±å¯ä»¥ç”¨RANSAC

![image-20210728111629715](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728111629715.png)

ç”¨ç›´çº¿æ‹Ÿåˆçš„ä¾‹å­æ¥è®²è§£RANSACæ­¥éª¤

1. éšæœºé€‰æ‹©ä¸€ä¸ªæ ·æœ¬,åŒ…å«å¯ä»¥æ‹Ÿåˆä¸€ä¸ªæ¨¡å‹çš„æœ€å°‘ç‚¹æ•°,å¦‚æœæ˜¯ç›´çº¿,å°±æ˜¯éšæœºé€‰æ‹©ä¸¤ç‚¹,å¦‚æœæ˜¯æ‹Ÿåˆé¢,å°±æ˜¯éšæœºé€‰3ä¸ªç‚¹

   ![image-20210728112335167](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728112335167.png)

2. ä½¿ç”¨éšæœºé€‰æ‹©çš„æ ·æœ¬,æ±‚è§£æ¨¡å‹å‚æ•°

   ![image-20210728112508700](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728112508700.png)



3. å¯¹äºæ•°æ®é›†ä¸­æ¯ä¸€ä¸ªç‚¹,è®¡ç®—æŸå¤±å‡½æ•°,è¿™é‡Œå°±æ˜¯è®¡ç®—æ¯ä¸ªç‚¹åˆ°ç›´çº¿çš„è·ç¦»![image-20210728112653466](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728112653466.png)

   ![image-20210728112632802](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728112632802.png)

4. è®¡ç®—ç¬¦åˆç¬¬2æ­¥æ¨¡å‹çš„ç‚¹çš„ä¸ªæ•°,å†…ç‚¹ä¸ªæ•°

   ç¬¦åˆæ¨¡å‹çš„ç‚¹:åˆ°è¿™æ¡ç›´çº¿è·ç¦»å°äºé˜ˆå€¼çš„ç‚¹$d_i< \tau$

5. é‡å¤1-4 Næ¬¡,é€‰æ‹©å†…ç‚¹ä¸ªæ•°æœ€å¤šçš„æ¨¡å‹



+ è·ç¦»é˜ˆå€¼$\tau$çš„é€‰æ‹©
  + ç»éªŒ
  + ä½¿ç”¨$\chi^2$åˆ†å¸ƒ(ä¸€èˆ¬ä¸ç”¨è¿™ç§æ–¹æ³•,éœ€è¦çš„æ¡ä»¶å¤ªå¤š)
+ **è¿­ä»£æ¬¡æ•°Nçš„é€‰æ‹©**
  + åšNæ¬¡å–æ ·,æœ‰pçš„æ¦‚ç‡,è‡³å°‘å¯ä»¥æœ‰ä¸€ä¸ªæ¨¡å‹æ˜¯å¥½çš„,æ‰€æœ‰å†…ç‚¹éƒ½æ˜¯çœŸçš„å†…ç‚¹,æ²¡æœ‰å¤–ç‚¹,æ¯”å¦‚è¯´,p=0.99
  + åšæ³•:
  + ä¸€äº›å‚æ•°:
    + $e$:  å¤–ç‚¹çš„æ¯”ä¾‹ outlier ratio (probability that a point is an outlier)
    + $s$:  ä¸€æ¬¡é‡‡æ ·çš„æœ€å°‘ç‚¹æ•°,è§£ç®—ä¸€ä¸ªæ¨¡å‹éœ€è¦çš„æœ€å°‘ç‚¹æ•°,ç›´çº¿æ‹Ÿåˆ,å°±æ˜¯2ä¸ªç‚¹
    + $N$: éœ€è¦æ±‚çš„è¿­ä»£æ¬¡æ•°
    + $p$:  confidence we get at least a good sample that is free from outliers

![image-20210728114732676](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728114732676.png)

â€‹					$1-p$:ä¸€æ¬¡å¥½çš„sampleéƒ½å–ä¸åˆ°çš„æ¦‚ç‡

![image-20210728114859296](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728114859296.png)					

å…³äº$e$çš„é€‰æ‹©,å¤§æ¦‚å–ä¸€ä¸ªå€¼å°±å¥½,ä¸éœ€è¦å¾ˆç²¾ç¡®

ä¸Šé¢æ˜¯ä¸€ä¸ªæŸ¥è¯¢è¡¨,å¯¹äºp=0.99,çºµè½´æ˜¯s,ç›´çº¿æ‹Ÿåˆå°±æ˜¯s=2,æ¨ªè½´æ˜¯å¤–ç‚¹æ¯”ä¾‹,åæ ‡å€¼å°±æ˜¯Nçš„å¤§å°

+ **Practical Tricks**

  + å·²ç»è®¡ç®—å‡ºNå,æ²¡å¿…è¦è¿­ä»£Næ¬¡,å¯ä»¥æå‰ç»ˆæ­¢,å½“å†…ç‚¹çš„æ¯”ä¾‹å¤§äºæœŸå¾…å€¼çš„æ—¶å€™

    T:å†…ç‚¹ä¸ªæ•°

    e:å¤–ç‚¹æ¯”ä¾‹

    M:æ•°æ®ç‚¹æ€»ç‚¹æ•°

    $\frac{T}{M}\ge1-e$å°±åœæ­¢è¿­ä»£

  + æœ€åä¸€æ¬¡è¿­ä»£ä¹‹å,ç”¨æœ€ç»ˆçš„å†…ç‚¹åšä¸€æ¬¡LSQ,è·å¾—æ›´åŠ å‡†ç¡®çš„æ¨¡å‹

    ![image-20210728120531858](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210728120531858.png)

+ **æ€»ç»“**
  + ä¼˜ç‚¹
    + ç®€å•é«˜æ•ˆ
    + å¯ä»¥æœ‰æ•ˆä»å……æ»¡å¤–ç‚¹çš„æ•°æ®ä¸­æ‰¾å‡ºå†…ç‚¹,å†…ç‚¹æ¯”ä¾‹åªæœ‰10%ä¹Ÿå¯ä»¥å·¥ä½œ
  + ç¼ºç‚¹
    + éœ€è¦ç¡®å®šå†…ç‚¹é˜ˆå€¼$\tau$
    + å¦‚æœå†…ç‚¹æ¯”ä¾‹å¾ˆå°‘,éœ€è¦çš„è¿­ä»£æ¬¡æ•°å°±ä¼šå¾ˆå¤š



## class 5 Deep Learning with Point Clouds

### 1.æ·±åº¦å­¦ä¹ ä»‹ç»

**ä¼˜ç‚¹**:

ç®€å•

**ç¼ºç‚¹**:

æ˜¯ä¸€ä¸ªé»‘ç®±,å¦‚æœå®ƒå‡ºé”™,ä¸å¯debug,ä¸èƒ½è°ƒæ•´,ä¸çŸ¥é“å®ƒæ˜¯æ€ä¹ˆå·¥ä½œçš„,åœ¨èˆªç©ºèˆªå¤©,è‡ªåŠ¨é©¾é©¶ç­‰é¢†åŸŸ,è¿™ç§ä¸å¯è°ƒèŠ‚,ä¸å¯æ§çš„ç¼ºç‚¹å°±ä¼šè¢«æ— é™æ”¾å¤§.

### 2.Multivariate Linear Regression 

**å¤šå…ƒçº¿æ€§å›å½’é—®é¢˜**

+ æ·±åº¦å­¦ä¹ å°±æ˜¯ä¸€ä¸ª**ä¼˜åŒ–é—®é¢˜**:

  â€‹                        $min\ f(x)$
  
+ ä»ä¸€ä¸ªç®€å•çš„**çº¿æ€§å‡½æ•°**å¼€å§‹

  $$
  y=f(x)=w^Tx+b=
  \begin{bmatrix} w \\ b \end{bmatrix}
  \begin{bmatrix} x&1 \end{bmatrix}
  \doteq w^Tx
  $$
  
  
  + ç»™å®šä¸€ä¸ªé›†åˆ$\{x_i\in R^n,y\in R\}$
  + æ±‚è§£$w\in R^n,b\in R$



+ ä¸Šé¢é—®é¢˜çš„ä¸€ä¸ªå…·ä½“ä¾‹å­,è€ƒè™‘æˆ¿ä»·é¢„æµ‹é—®é¢˜
+ å«æœ‰Mä¸ªæ ·æœ¬çš„æ•°æ®é›†**dataset**   $\{(x_1,y_1),(x_2,y_2),...,(x_m,y_m)\}$
  + nç»´æ ·æœ¬ç‰¹å¾$x_i\in R^n$  ,åŒ…æ‹¬ å¤§å°,å¹´ä»½ç­‰ç­‰
  + æ ·æœ¬çœŸå€¼(**ground truth)**       $y_i\in R$

+ æœªçŸ¥å‚æ•°$w\in R^n,b\in R$

+ ä¸€ä¸ªæ ·æœ¬çš„é¢„æµ‹å‡½æ•°,å°†å…¶è½¬æ¢ä¸ºé½æ¬¡å½¢å¼:
  $$
  \hat y_i=w^Tx_i+b=
  \begin{bmatrix} w \\ b \end{bmatrix}
  \begin{bmatrix} x_i & 1 \end{bmatrix}
  \doteq w^Tx_i
  $$

+ æ€æ ·æ±‚è§£**w**å‘¢,è¿™æ˜¯ä¸€ä¸ªçº¿æ€§å›å½’é—®é¢˜,éœ€è¦æœ€å°åŒ–é¢„æµ‹å’ŒçœŸå€¼ä¹‹é—´çš„å·®è·,å¦‚æœä½¿ç”¨å¹³æ–¹å·®æŸå¤±å‡½æ•°,å°±æ˜¯ä¸‹é¢çš„æœ€å°åŒ–é—®é¢˜:

  ![image-20210620161207498](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210620161207498.png)

+ åœ¨çº¿æ€§æƒ…å†µä¸‹,åŸæ¥çš„é—®é¢˜æ˜¯ä¸€ä¸ªç»å…¸çš„ $Ax=b$é—®é¢˜,è¿™é‡Œxå°±æ˜¯w,Aæ˜¯æ ·æœ¬X,å¯ä»¥ç›´æ¥è§£æ–¹ç¨‹æ±‚è§£,ä½†æ˜¯å¾ˆå¤šæƒ…å†µä¸‹,é‡åˆ°çš„é—®é¢˜å¹¶ä¸æ˜¯çº¿æ€§é—®é¢˜,å°±éœ€è¦ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•(**Gradient Descent**)æ¥æ±‚è§£:

  ![image-20210620161612397](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210620161612397.png)

### 3.Gradient Descent

**æ¢¯åº¦ä¸‹é™**

+ å¯¹äºä»»æ„çš„**å¯å¾®(æŸå¤±)å‡½æ•°** $F(x):R^n\to R^m$
+ æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è®©è¿™ä¸ªæŸå¤±å‡½æ•°**æœ€å°åŒ–**,æ‰¾åˆ°ä½¿ä¹‹æœ€å°çš„$x^*$

![image-20210620162917910](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210620162917910.png)

+ åœ¨ $x_n$å¤„,å¦‚æœ

$$
x_{n+1}=x_n-\gamma \nabla F(x_n)
$$

â€‹		å…¶ä¸­$\nabla F(x_n) $æ˜¯ $F$ åœ¨ $x_n$å¤„çš„æ¢¯åº¦,  $\gamma$æ˜¯æ­¥é•¿, æ­¥é•¿çš„é€‰æ‹©å¾ˆé‡è¦,é«˜æ–¯ç‰›é¡¿,LM,SGDå®é™…ä¸Šéƒ½æ˜¯æ­¥é•¿é€‰æ‹©ç­–ç•¥

â€‹		é‚£ä¹ˆä¸€å®šä¼šæœ‰      $F(x_{n+1})<F(x_n)$

â€‹	 æ¢¯åº¦çš„**åæ–¹å‘**æ˜¯å‡½æ•°æ•°å€¼å‡å°‘ æœ€å¿«çš„ æ–¹å‘

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210620163516517.png" alt="image-20210620163516517" style="zoom:80%;" />

**é‡æ–°çœ‹å¤šå…ƒçº¿æ€§å›å½’é—®é¢˜**

+ æˆ‘ä»¬çš„ç›®æ ‡

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210620172715029.png" alt="image-20210620172715029" style="zoom:80%;" />

+ åœ¨æ·±åº¦å­¦ä¹ ä¸­,ä¸€èˆ¬æ˜¯ä¸€ä¸ªbatchè¿›è¡Œå¤„ç†,è¿™é‡Œå–batch=1,æ‹¿å‡ºä¸€ä¸ªæ ·æœ¬è¿›è¡Œåˆ†æ

  ![image-20210620173129104](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210620173129104.png)

+ Jå¯¹wæ±‚å¯¼,Jå…ˆå¯¹zæ±‚å¯¼,zå†å¯¹wæ±‚å¯¼,æ³¨æ„,è¿™é‡Œçš„w å’Œ x éƒ½æ˜¯å‘é‡,ä¸æ˜¯æ ‡é‡,å’Œæ ‡é‡æ±‚å¯¼æœ‰æ‰€ä¸åŒ,ä¸‹é¢ä¼šå±•å¼€è®²

  ![image-20210620214320219](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210620214320219.png)

+ è¡¥å……: å¸¸ç”¨å‡½æ•°çš„æ±‚å¯¼æ³•åˆ™,é‡ç‚¹å…³æ³¨ **é“¾å¼è§„åˆ™**

![image-20210620215808277](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210620215808277.png)

+ å¤šå…ƒå‡½æ•° çš„ **é“¾å¼æ³•åˆ™**

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210620220908933.png" alt="image-20210620220908933" style="zoom:80%;" />

ä¸‹é¢å±•å¼€è¯´**å‘é‡/çŸ©é˜µçš„æ±‚å¯¼**

### 4.**å‘é‡/çŸ©é˜µçš„æ±‚å¯¼**

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210620221639378.png" alt="image-20210620221639378" style="zoom:80%;" />

æ±‚å¯¼å…¶å®é«˜ä¸­å°±å­¦è¿‡ï¼ŒåŸºæœ¬éƒ½æ˜¯æ ‡é‡å¯¹æ ‡é‡æ±‚å¯¼ï¼Œä¹Ÿå³æ˜¯ä¸‹å›¾ä¸­çš„ç¬¬ä¸€ç§å½¢å¼ï¼Œå¾ˆç®€å•å°±ä¸å±•å¼€ã€‚

**æ‰€è°“å‘é‡å¯¹æ ‡é‡çš„æ±‚å¯¼ï¼Œå…¶å®å°±æ˜¯å‘é‡é‡Œçš„æ¯ä¸ªåˆ†é‡åˆ†åˆ«å¯¹æ ‡é‡æ±‚å¯¼ï¼Œæœ€åæŠŠæ±‚å¯¼çš„ç»“æœæ’åˆ—åœ¨ä¸€èµ·ï¼ŒæŒ‰ä¸€ä¸ªå‘é‡è¡¨ç¤ºè€Œå·²ã€‚**

ç±»ä¼¼çš„ç»“è®ºä¹Ÿå­˜åœ¨äºæ ‡é‡å¯¹å‘é‡çš„æ±‚å¯¼ï¼Œå‘é‡å¯¹å‘é‡çš„æ±‚å¯¼ï¼Œå‘é‡å¯¹çŸ©é˜µçš„æ±‚å¯¼ï¼ŒçŸ©é˜µå¯¹å‘é‡çš„æ±‚å¯¼ï¼Œä»¥åŠçŸ©é˜µå¯¹çŸ©é˜µçš„æ±‚å¯¼ç­‰ã€‚



æ ¹æ®å‡½æ•°å’Œè‡ªå˜é‡ æ˜¯æ ‡é‡è¿˜æ˜¯å‘é‡,æœ‰ä¸‹é¢çš„è§„åˆ™:

![image-20210620225711396](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210620225711396.png)

åœ¨çŸ©é˜µæ±‚å¯¼ä¸­æœ‰ä¸¤ç§å¸ƒå±€ï¼Œåˆ†åˆ«ä¸º**åˆ†æ¯å¸ƒå±€(denominator layout)**å’Œ**åˆ†å­å¸ƒå±€(numerator layout)**ã€‚è¿™ä¸¤ç§ä¸åŒå¸ƒå±€çš„æ±‚å¯¼è§„åˆ™æ˜¯ä¸ä¸€æ ·çš„ã€‚

![image-20210620231915245](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210620231915245.png)

ä»¥åˆ†å­å¸ƒå±€ä¸ºä¾‹;

ä»¥åˆ†å­ä¸ºä¸»ï¼Œ**æ±‚å¯¼çš„ç»“æœçš„ç»´åº¦å’Œåˆ†å­çš„ç»´åº¦æ˜¯ä¸€è‡´çš„ã€‚**

å¦‚æœå‘é‡**y**æ˜¯ä¸€ä¸ªmç»´çš„åˆ—å‘é‡ï¼Œé‚£ä¹ˆæ±‚å¯¼ç»“æœâˆ‚**y**/âˆ‚xä¹Ÿæ˜¯ä¸€ä¸ªmç»´åˆ—å‘é‡ï¼›

å¦‚æœå‘é‡**y**æ˜¯ä¸€ä¸ªmç»´çš„è¡Œå‘é‡ï¼Œé‚£ä¹ˆæ±‚å¯¼ç»“æœâˆ‚**y**/âˆ‚xä¹Ÿæ˜¯ä¸€ä¸ªmç»´è¡Œå‘é‡ã€‚

**æ·±åº¦å­¦ä¹ ä¸€èˆ¬ä½¿ç”¨åˆ†æ¯å¸ƒå±€,ç»“æœæ˜¯ä¸€ä¸ªå‘é‡,è€Œä¸æ˜¯çŸ©é˜µ**

![image-20210622142149410](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622142149410.png)

![image-20210622142204728](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622142204728.png)

### 5.Multivariate Linear Regression 

å›åˆ°å¤šå…ƒçº¿æ€§å›å½’é—®é¢˜

+ æˆ‘ä»¬çš„ç›®æ ‡

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210620172715029.png" alt="image-20210620172715029" style="zoom:80%;" />

+ åœ¨æ·±åº¦å­¦ä¹ ä¸­,ä¸€èˆ¬æ˜¯ä¸€ä¸ªbatchè¿›è¡Œå¤„ç†,è¿™é‡Œå–batch=1,æ‹¿å‡ºä¸€ä¸ªæ ·æœ¬è¿›è¡Œåˆ†æ

  ![image-20210620173129104](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210620173129104.png)

+ Jå¯¹wæ±‚å¯¼,Jå…ˆå¯¹zæ±‚å¯¼,zå†å¯¹wæ±‚å¯¼,  J,zæ˜¯æ ‡é‡,w,xæ˜¯å‘é‡

  ![image-20210620214320219](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210620214320219.png)

+ æ›´æ–°w,ç›´åˆ°æŸå¤±å‡½æ•°å°äºé˜ˆå€¼,æˆ–è€…åˆ°è¾¾è¿­ä»£æ¬¡æ•°

  â€‹	![image-20210622142617710](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622142617710.png)

### 6.ç¥ç»å…ƒperceptron

+ åˆšåˆšè§£å†³äº†ä¸€ä¸ª**çº¿æ€§æ¨¡å‹**çš„ä¼˜åŒ–é—®é¢˜

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210620172715029.png" alt="image-20210620172715029" style="zoom:80%;" />

+ è¿™å°±æ˜¯æœ€ç®€å•çš„**ç¥ç»ç½‘ç»œ**ç»„æˆå•å…ƒ:**ç¥ç»å…ƒ**
  + w æ˜¯è®­ç»ƒå‚æ•°
  + $x_i$æ˜¯ç½‘ç»œçš„è®­ç»ƒæ•°æ®,$y_i$æ˜¯æ ‡ç­¾
  + åœ¨1968å¹´è¢«æå‡º

+ ç¥ç»å…ƒ å›¾ç¤º

+ The most simple Neural Network (NN): A **Perceptron**: $y=w^Tx$

  ![image-20210622144043308](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622144043308.png)

  + ä¸€ä¸ªç¥ç»å…ƒè¿˜éœ€è¦ ä¸€ä¸ª**æ¿€æ´»å‡½æ•°(Activation Function)** å°†çº¿æ€§æ¨¡å‹ **éçº¿æ€§åŒ–** 

+ **Train a Perceptron**

  + ç»™å®šä¸€äº›æ ·æœ¬

    <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622151332267.png" alt="image-20210622151332267" style="zoom:80%;" />

  + ä¸€ä¸ªæ„ŸçŸ¥æœº

    $y=w^Tx$

  + è°ƒæ•´æƒé‡$w$ä½¿é¢„æµ‹è¾“å‡º  $\hat y$  å’Œ çœŸå€¼ $y$ æ¥è¿‘

    ![image-20210622151556088](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622151556088.png)

  æ€æ ·è¯„ä»·æ˜¯å¦æ¥è¿‘å‘¢?

  éœ€è¦ç”¨åˆ°æŸå¤±å‡½æ•°

### 7.æŸå¤±å‡½æ•°

+ **å›å½’æŸå¤±å‡½æ•°**
+ **L1 Loss         L2 Loss**

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622152255757.png" alt="image-20210622152255757" style="zoom:67%;" />

+ **åˆ†ç±»æŸå¤±å‡½æ•°**

  ä¸‹é¢è¿™ä¸ªå¤šå±‚æ„ŸçŸ¥æœºæ˜¯ä¸€ä¸ªåˆ†ç±»ç½‘ç»œ,é¢„æµ‹è¾“å…¥å›¾ç‰‡çš„ç±»åˆ«

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622152740900.png" alt="image-20210622152740900" style="zoom:67%;" />

+ **äº¤å‰ç†µæŸå¤±å‡½æ•°Cross Entropy Loss**
  $$
  H(p,q)=-\Sigma p(y_i)log \ q(y_i),\  \ \Sigma p(y_i)=1 \ \Sigma q(y_i)=1
  $$

  + $p(y_i=1)$,ç±»åˆ«$i$çš„çœŸå€¼æ¦‚ç‡,ä¸æ˜¯1,å°±æ˜¯0

  + $q(y_i=1)$,é¢„æµ‹è¾“å‡ºæ˜¯ç±»åˆ«$i$çš„æ¦‚ç‡,ç¥ç»ç½‘ç»œçš„è¾“å‡ºä¸å¯èƒ½æ˜¯0,1,ä¼šç»™å‡ºä¸€ä¸ªæ¦‚ç‡,0.9,0.1

  + pæ˜¯çœŸå€¼çš„æ¦‚ç‡åˆ†å¸ƒ,qæ˜¯é¢„æµ‹çš„æ¦‚ç‡åˆ†å¸ƒ,æ€ä¹ˆæ ·å»æè¿°è¿™ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒçš„å·®è·å‘¢?å°±ç”¨**äº¤å‰ç†µæŸå¤±å‡½æ•°**

  + å¦‚æœä»ä¿¡æ¯è®ºçš„è§’åº¦å–ç†è§£è¿™ä¸ªå‡½æ•°ä¼šå¾ˆå¤æ‚,è¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„å¤„ç†æ–¹æ³•

    <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622161339095.png" alt="image-20210622161339095" style="zoom:67%;" />

  + å¯¹äºçœŸå€¼æ¥è¯´,åªæœ‰ä¸€ä¸ª$i$,   $p(y_i^\star)=1$å…¶ä»–éƒ½æ˜¯0,æ‰€ä»¥$H(p,q)=-\Sigma p(y_i)log \ q(y_i)=-log \ q(y_i^\star)$

    **æœ€å¤§åŒ–**ç½‘ç»œé¢„æµ‹è¾“å‡ºæ­£ç¡®ç±»åˆ«çš„æ¦‚ç‡$ log \ q(y_i^\star)$,å°±æ˜¯**æœ€å°åŒ–**$H(p,q)=-log \ q(y_i^\star)$

+ **Cross Entropy Loss â†’ Negative Log Softmax**

  å› ä¸ºç¥ç»ç½‘ç»œçš„è¾“å‡ºä¸€èˆ¬éƒ½æ˜¯æ•°å€¼å¤§å°,ä¸æ˜¯æ¦‚ç‡å€¼,æ¦‚ç‡è¦æ»¡è¶³ç›¸åŠ ç­‰äº1,éœ€è¦ä½¿ç”¨softmaxå‡½æ•°å°†æ•°å€¼è½¬æˆæ¦‚ç‡

  $H(p,q)=-log \ q(y_i^\star)$

  ![image-20210622164809682](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622164809682.png)

### 8.Multi-Layer Perceptron(MLP)

**å¤šå±‚æ„ŸçŸ¥æœº**

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622165321806.png" alt="image-20210622165321806" style="zoom:67%;" />

+ ä¸€å…±æœ‰  4+2=6 ä¸ªç¥ç»å…ƒ(ä¸ç®—è¾“å…¥å±‚)

+ éœ€è¦è®­ç»ƒçš„å‚æ•°çš„æ•°é‡

  `4*3+2*4=20`

+ å¤šå±‚æ„ŸçŸ¥æœºçš„è¾“å‡º  $y=w_2^T(w_1^Tx)=w^{'T}x$

  æ˜¯çº¿æ€§æ¨¡å‹çš„ç®€å•å åŠ ,ä»ç„¶æ˜¯çº¿æ€§æ¨¡å‹

+ **It is linear no matter how many layers are in the MLP!**

+ çº¿æ€§æ¨¡å‹å¤ªç®€å•äº†,æ¯”å¦‚,æ— æ³•å¤„ç†**å¼‚æˆ–é—®é¢˜**

  å› ä¸ºçº¿æ€§æ¨¡å‹çš„å†³ç­–é¢ æ°¸è¿œ åªæ˜¯ä¸€ä¸ª**è¶…å¹³é¢**,æ— æ³•æ‰¾åˆ°ä¸€ä¸ªé¢æŠŠå¼‚æˆ–é—®é¢˜ çš„ æ•°æ®ç‚¹ å®Œå…¨ åˆ†å¼€

  è§£å†³åŠæ³•:ä½¿ç”¨**æ¿€æ´»å‡½æ•°**éçº¿æ€§åŒ–

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622184607941.png" alt="image-20210622184607941" style="zoom:67%;" />

+ **Activation Function**

  + åœ¨ç¥ç»å…ƒ åé¢ å¢åŠ ä¸€ä¸ªæ¿€æ´»å‡½æ•°$g(.)$,æ·»åŠ éçº¿æ€§

  + ä¸€ä¸ªç¥ç»å…ƒå˜æˆ$y=g(f(x))=g(w^Tx)$

  + å¸¸ç”¨çš„æ¿€æ´»å‡½æ•°

    + ReLU

    <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622184231638.png" alt="image-20210622184231638" style="zoom:80%;" />

+ åŠ å…¥æ¿€æ´»å‡½æ•°å,**è¶…è¿‡ä¸¤å±‚**çš„MLP(ä¹Ÿå«å…¨è¿æ¥å±‚)å¯ä»¥æ‹Ÿåˆä»»æ„çš„å‡½æ•°$f(x)$(**å·²ç»è¢«è¯æ˜äº†**)

+ **æ€æ ·è®­ç»ƒMLP**

  + ä¸å•ä¸ªç¥ç»å…ƒç±»ä¼¼,ä½¿ç”¨æ¢¯åº¦ä¸‹é™

    â€‹	![image-20210622185335068](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622185335068.png)

  + **back propagationåå‘ä¼ æ’­**

  + æ˜¯æ¢¯åº¦ä¸‹é™çš„ä¸€ç§æœ‰æ•ˆæ–¹å¼

+ æ­¥é•¿çš„é€‰æ‹©ç­–ç•¥ å„ç§ä¼˜åŒ–å™¨

  + SGD éšæœºæ¢¯åº¦ä¸‹é™
  + Adam

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/descent.png" alt="Variants of Gradient Descent" style="zoom: 67%;" />

### 9.Convolution Neural Network(CNN)

#### 1D Convolution

![image-20210622194513992](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622194513992.png)

+ $w$æ˜¯**å·ç§¯æ ¸**
  + å·ç§¯æ ¸é•¿åº¦æ˜¯  $k$
  + $w$ æ˜¯è®­ç»ƒå‚æ•°
+ $x$æ˜¯è¾“å…¥æ•°æ®
  + æ•°æ®ç»´åº¦: $n$
  + **æ„Ÿå—é‡**: $[x_t,x_{t+1},...,x_{t+k-1}]$  k ä¸ª å€¼
  + æ¯ä¸€ä¸ª**æ„Ÿå—é‡**æœ‰ä¸€ä¸ªè¾“å‡º $y_t$

+ $y$  :è¾“å‡º
  
+ è¾“å‡ºç»´åº¦:  $o$
  
+ å›¾ç¤º:

  â€‹	<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622194912186.png" alt="image-20210622194912186" style="zoom: 80%;" />

+ å·ç§¯è¿‡ç¨‹,å·ç§¯æ ¸æ¯æ¬¡å‘å‰ç§»åŠ¨sä¸ªæ•°å€¼

  ![image-20210622195052869](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622195052869.png)

+ ä½¿ç”¨CNNçš„ç†ç”±

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622195242764.png" alt="image-20210622195242764" style="zoom:80%;" />

  1. ç¨€ç–è¿æ¥,ä¸æ˜¯å…¨è¿æ¥

     + å‚æ•°é‡æ›´å°‘ 3 vs 18
     + æ›´å°‘çš„å‚æ•°é‡,å°±è¶Šä¸ä¼šå¯¼è‡´**è¿‡æ‹Ÿåˆ**

  2. æƒé‡å…±äº«

     + less overfitting

  3. å…·æœ‰ä¸å˜æ€§

     + ç‰¹å¾ä¸åº”è¯¥ä¸å‡ºç°åœ¨å›¾åƒä¸Šçš„ä½ç½®æœ‰å…³

     + æ— è®ºç‰©ä½“å‡ºç°åœ¨å“ªé‡Œ,æå–çš„ç‰¹å¾éƒ½åº”è¯¥æ˜¯ä¸€æ ·çš„

     + å› ä¸ºæœ‰æ„Ÿå—é‡çš„å­˜åœ¨,CNN æ»¡è¶³ä¸å˜å½¢:

       ![image-20210622195752091](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622195752091.png)

+ **Padding**

  ç”±ä¸Šè¿°å·ç§¯çš„è¿‡ç¨‹å¯çŸ¥:åœ¨å·ç§¯æ ¸ç§»åŠ¨çš„è¿‡ç¨‹ä¸­,ä¼šé‡åˆ°è¾¹ç•Œå€¼

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622211725887.png" alt="image-20210622211725887" style="zoom:80%;" />

  å¯¹äºè¾¹ç•Œå€¼,ä¸€èˆ¬åœ¨åŸå§‹æ•°æ®çš„è¾¹ç•Œå¤„è¿›è¡Œ**padding**æ“ä½œ,ä¸€èˆ¬æ˜¯è¡¥0,ä¹Ÿå¯ä»¥å¤åˆ¶è¾¹ç•Œå€¼

+ å¦‚æœpaddingçš„ä¸ªæ•°æ˜¯p,å·ç§¯æ ¸å¤§å° æ˜¯ k,è¾“å…¥æ•°æ®é•¿åº¦æ˜¯ n,å·ç§¯æ ¸ç§»åŠ¨æ­¥é•¿ä¸º1,é‚£ä¹ˆè¾“å‡ºç»“æœçš„é•¿åº¦æ˜¯:

  $o=(n+p)-k+1$

  æ²¡æœ‰paddingçš„è¯

  $o=n-k+1$

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622212636939.png" alt="image-20210622212636939" style="zoom:67%;" />

+ å·ç§¯æ ¸ç§»åŠ¨çš„æ­¥é•¿ **Stride**

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622212835432.png" alt="image-20210622212835432" style="zoom:80%;" />

  å¦‚æœç§»åŠ¨æ­¥é•¿s>1,ä¼šå¸¦æ¥:

  + æ›´å°‘çš„è®¡ç®—é‡
  + æ›´å¤§çš„æ„Ÿå—é‡,ä¸Šå›¾,å·¦è¾¹æœ€ä¸Šé¢ä¸€ä¸ªç¥ç»å…ƒ,å¯ä»¥çœ‹åˆ°åŸå§‹æ•°æ®çš„7ä¸ªæ•°æ®,è€Œå³è¾¹çš„åªèƒ½çœ‹åˆ°5ä¸ªæ•°æ®

+ **å·ç§¯ç»“æœé•¿åº¦çš„è®¡ç®—**

  + å·ç§¯æ ¸å¤§å°: k
  + è¾“å…¥å¤§å°: n
  + padding: p
  + stride:s

  ![image-20210622213643680](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622213643680.png)

#### 2D Convolution

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622215535376.png" alt="image-20210622215535376" style="zoom:80%;" />

+ 2D å·ç§¯çš„è¿‡ç¨‹ç¤ºæ„å›¾:

  ä¹Ÿæ˜¯ä¸€ä¸ªå·ç§¯æ ¸åœ¨2Dæ•°æ®ä¸Šé¢æ²¿ç€ä¸¤ä¸ªç»´åº¦è¿›è¡Œæ»‘åŠ¨

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622215627778.png" alt="image-20210622215627778" style="zoom:80%;" />

+ å‡ ç§ paddingçš„æ–¹æ³•

  + valid :padding=0,é€šå¸¸è¾“å…¥å¤§å°è¦æ¯”è¾“å…¥è¦å°
  + **same-padding**:åŠ ä¸Špaddingä¹‹å,ä½¿å¾—è¾“å…¥è¾“å‡ºçš„å¤§å°æ˜¯ä¸€æ ·çš„

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622220155273.png" alt="image-20210622220155273" style="zoom:80%;" />

+ **å¤šä¸ªå·ç§¯æ ¸**

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622220323247.png" alt="image-20210622220323247" style="zoom:80%;" />

â€‹	ä¸åŒçš„**å·ç§¯æ ¸**å¯ä»¥æå–ä¸åŒçš„ç‰¹å¾,æœ‰ä¸åŒçš„ç‰¹å¾å›¾**feature_map**,æ‰€ä»¥å¯ä»¥ä½¿ç”¨å¤šä¸ªå·ç§¯æ ¸æ¥æå–å›¾ç‰‡ç‰¹å¾

â€‹	å¦‚æœè¾“å…¥ä¸æ˜¯å•é€šé“æ•°æ®,è€Œæ˜¯$C_i *H*W$,å·ç§¯æ ¸ä¸ªæ•°:$c_o$,æ¯ä¸€ä¸ªå·ç§¯æ ¸éƒ½è¦åœ¨è¾“å…¥è¾“å…¥çš„æ¯ä¸€ä¸ªé€šé“ä¸Šé¢åšå·ç§¯,å¾—åˆ°$C_i$ä¸ª`feature_map`,ç„¶åè¿™äº›`feature_map`å¯¹åº”ä½ç½®å–å¹³å‡å€¼æˆ–è€…å…¶ä»–æ“ä½œ,å¾—åˆ°ä¸€å¼ `feature_map`,æœ€å$c_o$ä¸ªå·ç§¯æ ¸å¾—åˆ°$c_o$å¼ `feature_map`

+ **Pooling æ± åŒ–**

  + èšåˆæ¯ä¸€ä¸ªæ„Ÿå—é‡ä¸­çš„ä¿¡æ¯
  + æ²¡æœ‰è®­ç»ƒå‚æ•°
  + è¾“å…¥/è¾“å‡º é€šé“æ•°ä¸€è‡´
  + æœ€å¤§æ± åŒ–,å¹³å‡æ± åŒ–
  + ç®€åŒ–ç‰ˆçš„å·ç§¯

+ **2Då·ç§¯æ€»ç»“**

  + ä¼šæœ‰$c_0$ä¸ªå·ç§¯æ ¸,å…±äº«strideå’Œpadding,ä½†æ˜¯å‚æ•°ä¸å…±äº«

  +  å‚æ•°é‡$c_{in}*k_h*k_w*c_{out}$

  + å·ç§¯ç»“æœsize

    <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622222441326.png" alt="image-20210622222441326" style="zoom:80%;" />

  + è®¡ç®—é‡

    $O((c_{in}*k_h*k_w*c_{out})*(o_h*o_w))$

#### 3D Convolution

+ æ˜¯2Dçš„è‡ªç„¶æ‰©å±•

+ è“è‰²:è¾“å…¥

+ æ©™è‰²:å·ç§¯æ ¸

+ ç»¿è‰²:è¾“å‡º

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622224103265.png" alt="image-20210622224103265" style="zoom:80%;" />

### 10. Deep Learning for Point Cloud

#### **åœ¨ç‚¹äº‘ä¸Šé¢è¿›è¡Œæ·±åº¦å­¦ä¹ çš„å‡ ç§å°è¯•:**

+ 3D å·ç§¯

+ ä»å¤šä¸ªè§†è§’å¯¹ç‚¹äº‘è¿›è¡ŒæŠ•å½±,å¾—åˆ°2Då›¾ç‰‡,ç„¶åä½¿ç”¨2Då·ç§¯

+ æŠŠç‚¹äº‘è¡¨ç¤ºæˆ`3*N`çš„çŸ©é˜µ,ç›´æ¥ä½¿ç”¨2Då·ç§¯

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622231321306.png" alt="image-20210622231321306" style="zoom: 80%;" />



#### **VoxNet,IROS,2015    ---- 3D CNN**

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622231527212.png" alt="image-20210622231527212" style="zoom:80%;" />

+ voxelä¸­å¯ä»¥å­˜æ”¾çš„å†…å®¹:
  + 0,1æ˜¯å¦å ç”¨
  + ç‚¹çš„ä¸ªæ•°
  + æ¦‚ç‡
  + TSDF,TDFç­‰
+ ç¼ºç‚¹
  + voxelä¹‹åæŸå¤±ç²¾åº¦,å¦‚æœåˆ†è¾¨ç‡å¾ˆé«˜,å¾ˆå å†…å­˜

#### **MVCNN-ICCV 2015**

**ä¸åŒè§†è§’æŠ•å½±--> 2D image -->2D CNN**

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622232603764.png" alt="image-20210622232603764" style="zoom:80%;" />

ç¼ºç‚¹:

æŠ•å½±æ¬¡æ•°å¾ˆå¤š,è®¡ç®—é‡å¾ˆå¤§

#### **MLP for Point Cloud?**

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622232810463.png" alt="image-20210622232810463" />

![image-20210624085016630](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624085016630.png)

**æ— æ³•å®ç°:**

å¦‚ä¸Šæˆªå›¾æ‰€ç¤º,è¾“å…¥**ç›¸åŒçš„ç‚¹äº‘æ•°æ®**,å¦‚æœç‚¹çš„é¡ºåºä¸åŒ,ç»“æœä¹Ÿä¼šä¸åŒ,æœ‰å·¥ä½œæå‡ºï¼ŒæŠŠè¾“å…¥æ•°æ®çš„æ‰€æœ‰å¯èƒ½çš„æ’åˆ—é¡ºåºéƒ½åˆ—ä¸¾å‡ºæ¥ï¼Œè¿™ä¹Ÿä¸å¤ªç°å®ï¼Œæ•°æ®é‡å¤ªå¤§äº†

#### ==PointNet CVPR 2017==

ä»ä¸Šè¿°ä½¿ç”¨æ·±åº¦å­¦ä¹ å¤„ç†ç‚¹äº‘çš„å°è¯•ä¸­å¯ä»¥çœ‹å‡º,ä¸åŒäºå›¾åƒæ•°æ®åœ¨è®¡ç®—æœºä¸­çš„è¡¨ç¤ºé€šå¸¸ç¼–ç äº†åƒç´ ç‚¹ä¹‹é—´çš„ç©ºé—´å…³ç³»ï¼Œç‚¹äº‘æ•°æ®ç”±**æ— åº**çš„æ•°æ®ç‚¹æ„æˆä¸€ä¸ª**é›†åˆ**æ¥è¡¨ç¤º,ç‚¹äº‘æ•°æ®æ˜¯åœ¨æ¬§å¼ç©ºé—´ä¸‹çš„ä¸€ä¸ªå­é›†,å®ƒå…·æœ‰ä»¥ä¸‹ä¸‰ä¸ªç‰¹å¾:

> **1. æ— åº**
>
> ç‚¹äº‘æ•°æ®æ˜¯ä¸€ä¸ªé›†åˆ,å¯¹æ•°æ®çš„é¡ºåºæ˜¯ä¸æ•æ„Ÿçš„.è¿™å°±æ„å‘³ç€å¤„ç†ç‚¹äº‘æ•°æ®çš„æ¨¡å‹éœ€è¦å¯¹æ•°æ®çš„ä¸åŒæ’åˆ—ä¿æŒä¸å˜å½¢.
>
> ç›®å‰æ–‡çŒ®ä¸­ä½¿ç”¨çš„æ–¹æ³•åŒ…æ‹¬å°†æ— åºçš„æ•°æ®é‡æ’åºã€ç”¨æ•°æ®çš„æ‰€æœ‰æ’åˆ—è¿›è¡Œæ•°æ®å¢å¼ºç„¶åä½¿ç”¨RNNæ¨¡å‹(è®¡ç®—é‡å¤ªå¤§)ã€ç”¨==å¯¹ç§°å‡½æ•°==æ¥ä¿è¯æ’åˆ—ä¸å˜æ€§ã€‚ç”±äºç¬¬ä¸‰ç§æ–¹å¼çš„ç®€æ´æ€§ä¸”å®¹æ˜“åœ¨æ¨¡å‹ä¸­å®ç°ï¼Œåœ¨PointNetä¸­ä½¿ç”¨**maxpooling**è¿™ä¸ªå¯¹ç§°å‡½æ•°æ¥æå–ç‚¹äº‘æ•°æ®çš„ç‰¹å¾
>
> **2. ç‚¹ä¸ç‚¹ä¹‹é—´çš„ç©ºé—´å…³ç³»**
>
> ä¸€ä¸ªç‰©ä½“é€šå¸¸ç”±ç‰¹å®šç©ºé—´å†…çš„ä¸€å®šæ•°é‡çš„ç‚¹äº‘æ„æˆ,ä¹Ÿå°±æ˜¯è¯´,è¿™äº›ç‚¹äº‘ä¹‹é—´å­˜åœ¨ç©ºé—´å…³ç³».ä¸ºäº†èƒ½æœ‰æ•ˆåˆ©ç”¨è¿™ç§ç©ºé—´å…³ç³»,åœ¨PointNetä¸­,é€šè¿‡å°†å±€éƒ¨ç‰¹å¾å’Œå…¨å±€ç‰¹å¾**ä¸²è”**çš„æ–¹å¼æ¥èšåˆä¿¡æ¯.
>
> **3. ä¸å˜æ€§**
>
> ç‚¹äº‘æ•°æ®æ‰€ä»£è¡¨çš„ç›®æ ‡å¯¹æŸäº›ç©ºé—´è½¬æ¢åº”è¯¥å…·æœ‰ä¸å˜æ€§ï¼Œå¦‚æ—‹è½¬å’Œå¹³ç§»ã€‚PointNetæå‡ºäº†åœ¨è¿›è¡Œç‰¹å¾æå–ä¹‹å‰ï¼Œå…ˆå¯¹ç‚¹äº‘æ•°æ®è¿›è¡Œå¯¹é½çš„æ–¹å¼æ¥ä¿è¯ä¸å˜æ€§ã€‚å¯¹é½æ“ä½œæ˜¯é€šè¿‡è®­ç»ƒä¸€ä¸ªå°å‹çš„ç½‘ç»œæ¥å¾—åˆ°è½¬æ¢çŸ©é˜µï¼Œå¹¶å°†ä¹‹å’Œè¾“å…¥ç‚¹äº‘æ•°æ®ç›¸ä¹˜æ¥å®ç°ã€‚

PointNetæ˜¯ç¬¬ä¸€ä¸ªç›´æ¥å¤„ç†ç‚¹äº‘æ•°æ®çš„æ·±åº¦å­¦ä¹ æ¨¡å‹

+ **PointNet**å¯ä»¥åšçš„äº‹æƒ…:

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622233129630.png" alt="image-20210622233129630" style="zoom:80%;" />

+ **PointNetç½‘ç»œæ¶æ„**

**shared_mlp + max_pool = PointNet**

![image-20210630085837872](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210630085837872.png)

**PointNet**çš„æ¨¡å‹ç»“æ„å¦‚ä¸Šå›¾æ‰€ç¤º,å…¶ä¸­ä¸¤ä¸ª**transform**æ¨¡å—åœ¨åç»­çš„å·¥ä½œä¸­è¢«å»é™¤äº†,å®ƒæœ¬æ¥çš„ä½œç”¨æ˜¯æ±‚ä¸€ä¸ªæ—‹è½¬çŸ©é˜µ,æ˜¯ä¸€ä¸ªå°å‹çš„PointNet

ç¬¬ä¸€ä¸ªT-Netï¼Œå°†è¾“å…¥ç‚¹äº‘è½¬æ¢æˆä¸€ä¸ªé•¿åº¦ä¸º9çš„å‘é‡ï¼ŒæŠŠå®ƒè½¬æ¢æˆä¸€ä¸ª3x3çš„çŸ©é˜µï¼ˆè½¬ç§»çŸ©é˜µï¼‰

ç¬¬äºŒä¸ªT-Netï¼Œå°†è¾“å…¥ç‚¹äº‘è½¬æ¢æˆä¸€ä¸ªé•¿åº¦ä¸º64x64çš„å‘é‡ï¼ŒæŠŠå®ƒè½¬æ¢æˆä¸€ä¸ª64x64çš„çŸ©é˜µï¼ˆè½¬ç§»çŸ©é˜µï¼‰

åŸæ¥çš„ç›®çš„æ˜¯æƒ³åº”å¯¹è¾“å…¥ç‚¹äº‘çš„æœå‘é—®é¢˜ï¼Œæ‰€ä»¥å°±æƒ³é€šè¿‡æ·±åº¦å­¦ä¹ æ‰¾åˆ°ä¸€ä¸ªè¾“å…¥æ•°æ®çš„æ ‡å‡†æœå‘ï¼ŒæŠŠè¾“å…¥æ•°æ®éƒ½è½¬æ¢åˆ°è¿™ä¸ªæœå‘ä¸Šï¼Œä½†å®é™…ä¸Šæ˜¯æ²¡æœ‰ç”¨çš„ï¼Œå› ä¸ºåªè¦ä¸€ä¸ªç¥ç»ç½‘ç»œè¶³å¤Ÿå¼ºå¤§ï¼Œå¯ä»¥é€‚åº”è¿™ç§æ—‹è½¬ã€‚

> 1ã€
>
> è¾“å…¥ä¸ºä¸€å¸§çš„å…¨éƒ¨ç‚¹äº‘æ•°æ®çš„é›†åˆï¼Œè¡¨ç¤ºä¸ºä¸€ä¸ªnx3çš„2d tensorï¼Œå…¶ä¸­nä»£è¡¨ç‚¹äº‘æ•°é‡ï¼Œ3å¯¹åº”xyzåæ ‡ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ç»´åº¦çš„ï¼ŒåŠ å…¥é¢å¤–çš„ä¿¡æ¯ï¼Œå˜æˆnxm
> 2ã€
>
> è¾“å…¥æ•°æ®å…ˆé€šè¿‡å’Œä¸€ä¸ªT-Netå­¦ä¹ åˆ°çš„è½¬æ¢çŸ©é˜µç›¸ä¹˜æ¥å¯¹é½ï¼Œä¿è¯äº†æ¨¡å‹çš„å¯¹ç‰¹å®šç©ºé—´è½¬æ¢çš„ä¸å˜æ€§ã€‚
> 3ã€
>
> é€šè¿‡å¤šæ¬¡MLPå¯¹å„ç‚¹äº‘æ•°æ®è¿›è¡Œç‰¹å¾æå–åï¼Œå†ç”¨ä¸€ä¸ªT-Netå¯¹ç‰¹å¾è¿›è¡Œå¯¹é½ã€‚
> 4ã€
>
> ä¸Šé¢çš„æ­¥éª¤ï¼Œéƒ½æ˜¯å¯¹å•ä¸ªç‚¹çš„æ“ä½œï¼Œå¯¹ä¸€ä¸ªç‰©ä½“åšåˆ†ç±»ï¼Œè‚¯å®šä¸èƒ½å•ç‹¬çœ‹ä¸€ä¸ªç‚¹ï¼Œç±»ä¼¼CNNçš„æ„Ÿå—é‡çš„æ¦‚å¿µï¼Œè¦ä½¿ç”¨å…¨å±€ä¿¡æ¯ï¼Œè¿™æ˜¯é€šè¿‡max_poolå®ç°çš„ï¼Œè¿™æ˜¯PointNetçš„æ ¸å¿ƒï¼Œæ— è®ºæ€ä¹ˆäº¤æ¢è¾“å…¥é¡ºåºï¼Œæœ€åçš„maxéƒ½æ˜¯ä¸€æ ·çš„ï¼ˆä¹Ÿå¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼å®ç°ï¼Œæ¯”å¦‚å¹³å‡å€¼ç­‰ï¼Œä½†æ˜¯å®éªŒè¯æ˜maxæ•ˆæœæœ€å¥½ï¼‰
> 5ã€
>
> å¯¹åˆ†ç±»ä»»åŠ¡ï¼Œå°†å…¨å±€ç‰¹å¾é€šè¿‡mlpæ¥é¢„æµ‹æœ€åçš„åˆ†ç±»åˆ†æ•°ï¼›
>
> å¯¹åˆ†å‰²ä»»åŠ¡ï¼Œå°†å…¨å±€ç‰¹å¾å’Œä¹‹å‰å­¦ä¹ åˆ°çš„å„ç‚¹äº‘çš„å±€éƒ¨ç‰¹å¾è¿›è¡Œä¸²è”ï¼Œå†é€šè¿‡mlpå¾—åˆ°æ¯ä¸ªæ•°æ®ç‚¹çš„åˆ†ç±»ç»“æœã€‚

+ **shared_mlp+max_pooling**

  + å•ç‹¬å¤„ç†æ¯ä¸€ä¸ªç‚¹/ç‰¹å¾  $n*C_1 -> n*C_2$

  + ç»è¿‡ä¸€ä¸ª**element-wise-max**  $n*C_2->1*C_2$

    <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624090901769.png" alt="image-20210624090901769" style="zoom:80%;" />

+ **Proof**

  æˆ‘ä»¬çŸ¥é“ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªä¸­é—´å±‚çš„MLPå¯ä»¥æ‹Ÿåˆä»»æ„çš„å‡½æ•°ï¼ŒåŒæ ·çš„PointNetè¢«è¯æ˜å®ƒå¯ä»¥æ‹Ÿåˆç‚¹äº‘ä¸Šçš„ä»»ä½•å‡½æ•°ï¼ˆPNæœ‰maxï¼Œç²¾åº¦æœ‰æŸå¤±ï¼Œä½†æ˜¯ä»ç„¶æ»¡è¶³ï¼ŒåŸæ–‡ä¸­æœ‰è¯æ˜ï¼‰

  + ä¸€äº›æ¦‚å¿µ

    ![image-20210624092641741](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624092641741.png)

  + è¯æ˜å½¢å¼

    <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624092820971.png" alt="image-20210624092820971" style="zoom:80%;" />

    > h(.)æ˜¯ä¸€ä¸ªç¥ç»ç½‘ç»œ
    >
    > r(.)ä¹Ÿæ˜¯ä¸€ä¸ªç¥ç»ç½‘ç»œ

    + <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624094656403.png" alt="image-20210624094656403" style="zoom:80%;" />
    + æŠŠåŸå§‹ç‚¹äº‘ä¸­çš„æ¯ä¸€ä¸ªç‚¹æ˜ å°„åˆ°voxelgridä¸­çš„ä¸€ä¸ªæ ¼å­é‡Œé¢ï¼Œå‡å¦‚voxelgridå¤§å°æ˜¯MxMxMï¼Œå†æŠŠè¿™ä¸ªæ ¼å­è¡¨ç¤ºä¸ºä¸€ä¸ªé•¿åº¦ä¸ºMxMxMçš„å‘é‡ï¼Œå…¶ä¸­è¿™ä¸ªæ ¼å­å¯¹åº”çš„ä½ç½®ä¸º1ï¼Œå…¶ä½™ä¸º0ï¼Œ**h(.)æ¨¡æ‹Ÿè¿™ä¸ªæŠ•å½±å‡½æ•°**     ï¼ˆå‡è®¾voxelgrid åˆ†è¾¨ç‡å¾ˆé«˜ï¼Œæ¯ä¸€ä¸ªç‚¹å ä¸€ä¸ªvoxelï¼‰
    + ç»è¿‡ä¸€ä¸ªMAXå‡½æ•°ï¼Œå¾—åˆ°MxMxMçš„å‘é‡
    + ç»è¿‡$\gamma()$å‡½æ•°å¯¹è¿™äº›ç‚¹è¿›è¡Œé‡å»ºï¼Œå¾—åˆ°è¾“å…¥ç‚¹é›†ï¼Œåªè¦voxelgridç²¾åº¦è¶³å¤Ÿé«˜ï¼Œå°±å¯ä»¥å®Œç¾é‡å»º

+ **PointNet â€“ Classification**

  ![image-20210624095756174](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624095756174.png)

+ **PointNet â€“ Segmentation**

  + åˆ†å‰²å°±æ˜¯åœ¨æ¯ä¸€ä¸ªç‚¹ä¸Šé¢åšåˆ†ç±»

  + å¯¹æ¯ä¸€ä¸ªç‚¹çš„ç‰¹å¾åšä¸€ä¸ªMLP

  + æ€æ ·æå–æ¯ä¸€ä¸ªç‚¹çš„ç‰¹å¾ï¼Ÿå•ç‹¬ç‚¹çš„ç‰¹å¾+å…¨å±€ç‰¹å¾

    ![image-20210624100025215](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624100025215.png)

+ **PointNet - Critical Points Set & Upper Bound Shape**

  åšmaxæ“ä½œæ—¶ï¼Œæœ‰äº›ç‚¹æ˜¯ä¸ä¼šè¢«é€‰ä¸­çš„ï¼Œ

  è¢«é€‰ä¸­çš„ç‚¹å«åšï¼š**Critical Points**

  æ²¡æœ‰è¢«é€‰ä¸­çš„ç‚¹å«åšï¼š**Upper Bound Shape** æ— è®ºå¾€è¾“å…¥ç‚¹é›†ä¸­åŠ å…¥å¤šå°‘è¿™ç§ç‚¹ï¼Œå¯¹æœ€åçš„maxç»“æœéƒ½æ²¡æœ‰å½±å“

  åœ¨ç©ºé—´ä¸­éšæœºé€‰ä¸€äº›ç‚¹ï¼Œå¦‚æœå®ƒå¯¹æœ€åçš„maxç»“æœæ²¡æœ‰å½±å“ï¼Œå°±æŠŠå®ƒæ’å…¥Original Shape

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624100656674.png" alt="image-20210624100656674" style="zoom:80%;" />

+ **PointNet - Improved as VFE**

  + **==Voxel Feature Encoding(VFE)==**

    + åœ¨VoxelNetä¸­æå‡º
    + ä¸¤ä¸ª PN
    + æ¯”PNæ•ˆæœæ›´å¥½

    <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624101039192.png" alt="image-20210624101039192" style="zoom:80%;" />

+ **PointNet - å±€é™æ€§**

  + ç¼ºå°‘é€å±‚ç‰¹å¾æå–ï¼Œå°±ç®—æ˜¯VFEï¼Œä¹Ÿåªæ˜¯ä¸¤å±‚
  + PointNetåªæœ‰ä¸€ä¸ªæ„Ÿå—é‡ï¼Œçœ‹åˆ°æ‰€æœ‰çš„ç‚¹ï¼Œä½†æ˜¯CNNæœ‰å¤šä¸ªé€å±‚å¢åŠ çš„æ„Ÿå—é‡

  ![image-20210624101717140](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624101717140.png)

#### PointNet++

ä¸ºäº†è§£å†³PointNetä¸èƒ½é€å±‚ç‰¹å¾æå–ï¼Œæ— æ³•è·å¾—å¤šä¸ªå°ºåº¦çš„ä¿¡æ¯çš„é—®é¢˜ï¼ŒåŸPointNetä½œè€…æå‡ºäº†PointNet++ï¼ŒåŠ å…¥äº†é€å±‚ç‰¹å¾æå–åŠŸèƒ½

PointNet++ç”±ä»¥ä¸‹å‡ ä¸ªå…³é”®éƒ¨åˆ†æ„æˆï¼š

> **é‡‡æ ·å±‚ï¼ˆsamplingï¼‰**
> æ¿€å…‰é›·è¾¾å•å¸§çš„æ•°æ®ç‚¹å¯ä»¥å¤šè¾¾100kä¸ªï¼Œå¦‚æœå¯¹æ¯ä¸€ä¸ªç‚¹éƒ½æå–å±€éƒ¨ç‰¹å¾ï¼Œè®¡ç®—é‡æ˜¯éå¸¸å·¨å¤§çš„ã€‚å› æ­¤ï¼Œä½œè€…æå‡ºäº†å…ˆå¯¹æ•°æ®ç‚¹è¿›è¡Œé‡‡æ ·ã€‚ä½œè€…ä½¿ç”¨çš„é‡‡æ ·ç®—æ³•æ˜¯æœ€è¿œç‚¹é‡‡æ ·ï¼ˆfarthest point sampling, FPSï¼‰ï¼Œç›¸å¯¹äºéšæœºé‡‡æ ·ï¼Œè¿™ç§é‡‡æ ·ç®—æ³•èƒ½å¤Ÿæ›´å¥½åœ°è¦†ç›–æ•´ä¸ªé‡‡æ ·ç©ºé—´ã€‚
>
> **ç»„åˆå±‚ï¼ˆgroupingï¼‰**
> ä¸ºäº†æå–ä¸€ä¸ªç‚¹çš„å±€éƒ¨ç‰¹å¾ï¼Œé¦–å…ˆéœ€è¦å®šä¹‰è¿™ä¸ªç‚¹çš„â€œå±€éƒ¨â€æ˜¯ä»€ä¹ˆã€‚ä¸€ä¸ªå›¾ç‰‡åƒç´ ç‚¹çš„å±€éƒ¨æ˜¯å…¶å‘¨å›´ä¸€å®šæ›¼å“ˆé¡¿è·ç¦»ä¸‹çš„åƒç´ ç‚¹ï¼Œé€šå¸¸ç”±å·ç§¯å±‚çš„å·ç§¯æ ¸å¤§å°ç¡®å®šã€‚åŒç†ï¼Œç‚¹äº‘æ•°æ®ä¸­çš„ä¸€ä¸ªç‚¹çš„å±€éƒ¨ç”±å…¶å‘¨å›´ç»™å®šåŠå¾„åˆ’å‡ºçš„çƒå½¢ç©ºé—´å†…çš„å…¶ä»–ç‚¹æ„æˆã€‚ç»„åˆå±‚çš„ä½œç”¨å°±æ˜¯æ‰¾å‡ºé€šè¿‡é‡‡æ ·å±‚åçš„æ¯ä¸€ä¸ªç‚¹çš„æ‰€æœ‰æ„æˆå…¶å±€éƒ¨çš„ç‚¹ï¼Œä»¥æ–¹ä¾¿åç»­å¯¹æ¯ä¸ªå±€éƒ¨æå–ç‰¹å¾ã€‚
>
> **ç‰¹å¾æå–å±‚ï¼ˆfeature learningï¼‰**
> å› ä¸ºPointNetç»™å‡ºäº†ä¸€ä¸ªåŸºäºç‚¹äº‘æ•°æ®çš„ç‰¹å¾æå–ç½‘ç»œï¼Œå› æ­¤å¯ä»¥ç”¨PointNetå¯¹ç»„åˆå±‚ç»™å‡ºçš„å„ä¸ªå±€éƒ¨è¿›è¡Œç‰¹å¾æå–æ¥å¾—åˆ°å±€éƒ¨ç‰¹å¾ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶ç»„åˆå±‚ç»™å‡ºçš„å„ä¸ªå±€éƒ¨å¯èƒ½ç”±ä¸åŒæ•°é‡çš„ç‚¹æ„æˆï¼Œä½†æ˜¯é€šè¿‡PointNetåéƒ½èƒ½å¾—åˆ°ç»´åº¦ä¸€è‡´çš„ç‰¹å¾ï¼ˆç”±ä¸Šè¿°Kå€¼å†³å®šï¼‰ï¼ˆmaxpoolingæ“ä½œè¾“å‡ºçš„æ•°æ®ç»´åº¦(K)ï¼‰

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210625091121389.png" alt="image-20210625091121389" style="zoom:80%;" />

+ **Hierarchical Features å¤šå±‚ç‰¹å¾æå–** 

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210625092356399.png" alt="image-20210625092356399"  />

  å¤šå±‚çš„ç‰¹å¾æå–ç”±å¤šä¸ª`set abstraction`ç»„æˆï¼Œåœ¨æ¯ä¸€ä¸ª`set abstraction`å†…ï¼š

  1. **Sampling layer** é¦–å…ˆè¿›è¡Œé‡‡æ ·   FPSé‡‡æ ·

+ ç‚¹æ•°ä»$N_{i-1}->N_i$
  
2. **Grouping layer**
  
   **è¾“å…¥**æ˜¯ç‚¹é›†$N\times(d+C)$, ç»è¿‡é‡‡æ ·åå¾—åˆ°çš„ä¸­å¿ƒç‚¹ç‚¹é›†$N^\prime\times d$
  
     **è¾“å‡º**æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„ç‚¹é›†,$N^\prime\times K \times (d+C)$, `K`ä»£è¡¨é‚»åŸŸå†…çš„ç‚¹æ•°
  
   è®ºæ–‡ä¸­è¯´,ä¸åŒgroupçš„Kå€¼æ˜¯ä¸åŒçš„,ç»è¿‡PointNetä¹‹å,ç»´åº¦æ˜¯ä¸€æ ·çš„
  
   ä»¥é‡‡æ ·çš„åé€‰æ‹©çš„ç‚¹ä¸ºä¸­å¿ƒé€‰æ‹©ä¸€ä¸ªå°é‚»åŸŸï¼Œæœ‰ä¸¤ç§æ–¹å¼[å¾…å®š]
  
   1. radius neighbors+random sampling,å› ä¸ºç¥ç»ç½‘ç»œéœ€è¦è¾“å…¥ç‚¹æ•°ä¸€æ ·ï¼Œæ‰€ä»¥å¦‚æœæ˜¯åŠå¾„é¢†åŸŸï¼Œè¿˜éœ€è¦ä¸€ä¸ªéšæœºé‡‡æ ·ï¼Œä¿è¯æ¯ä¸€ä¸ªé‚»åŸŸå†…ç‚¹æ•°ä¸€è‡´
     2. K Nearest Neighbors
     3. ä¸Šé¢ä¸¤ç§æ–¹æ³•æ•ˆæœå·®ä¸å¤š
  
3. **PointNet**
  
   **è¾“å…¥**æ˜¯$N^\prime$ä¸ªgroup,å¤§å°æ˜¯$N^\prime\times K \times (d+C)$, `K`ä»£è¡¨é‚»åŸŸå†…çš„ç‚¹æ•°
  
     **è¾“å‡º**æ˜¯$N^\prime$ä¸ªgroupçš„ç‰¹å¾,å¤§å°æ˜¯$N^\prime\times(d+C^\prime)$
  
     å¯¹ä¸€ä¸ªå°é‚»åŸŸå†…çš„ç‚¹åšPointNet
  
     + ==éœ€è¦å…ˆå¯¹ä¸€ä¸ªé‚»åŸŸå†…çš„ç‚¹è¿›è¡Œå½’ä¸€åŒ–å¤„ç†==ï¼Œå› ä¸ºï¼Œè¿œå¤„å’Œè¿‘å¤„çš„åŒä¸€ä¸ªç‰©ä½“æå–åˆ°çš„ç‰¹å¾åº”è¯¥æ˜¯ç›¸åŒçš„ï¼Œä¸åº”è¯¥è¢«è¿œè¿‘å½±å“
     + é€šé“æ•°å˜åŒ–$C_{i-1}-> C_i$
     + è¦å’Œå½“å‰ç‚¹çš„åæ ‡(d)è”åˆèµ·æ¥$C_{i-1}->C_{i-1}+d->C_i$
  
  4. ä¸€ä¸ª`set abstraction`çš„
  
     è¾“å…¥æ˜¯ä¸€ä¸ª$N\times(d+C)$çš„çŸ©é˜µï¼ŒNï¼šè¡¨ç¤ºNä¸ªç‚¹ï¼Œdï¼šdç»´åæ ‡ï¼ŒCï¼šç‚¹ç‰¹å¾ç»´åº¦
  
     è¾“å‡ºæ˜¯ä¸€ä¸ª$N^\prime\times(d+C^\prime)$ çš„çŸ©é˜µï¼Œ$N^\prime$ï¼šé™é‡‡æ ·åçš„ç‚¹æ•°ï¼Œdï¼šdç»´åæ ‡ï¼Œ$C^\prime$ï¼šæ–°çš„ç‚¹ç‰¹å¾ç»´åº¦ï¼Œèšåˆäº†å±€éƒ¨ç‰¹å¾
  
     é€šè¿‡`set abstraction`çš„å åŠ ,æœ€åæ¯ä¸€ä¸ªgroupå¯¹åº”è¾“å…¥ç‚¹äº‘ä¸­çš„ç‚¹äº‘å°±è¶Šæ¥è¶Šå¤š,å’ŒCNNçš„æ„Ÿå—é‡ç±»ä¼¼

+ **PointNetå˜ç§1 Multi-scale grouping (MSG)**

  é€‰æ‹©ä¸åŒå°ºåº¦çš„groupè¾“å…¥PointNet

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210625151621227.png" alt="image-20210625151621227" style="zoom:80%;" />

  åœ¨groupå±‚åšå‡ºæ”¹è¿›:

  å¯¹äºåŒä¸€ä¸ªé‡‡æ ·ç‚¹,é€‰æ‹©ä¸åŒå¤§å°çš„neighbors,groupä¹‹åè¾“å…¥ä¸åŒçš„PointNet,æœ€åæŠŠä¸åŒå°ºåº¦neighboræå–å‡ºçš„ç‰¹å¾ä¸²è”åœ¨ä¸€èµ·

  + ç”±äºå¤šäº†ä¸¤ä¸ªPointNet,è®¡ç®—é‡å¢åŠ ,åŒæ—¶,æ¨¡å‹èƒ½åŠ›ä¹Ÿå¾—åˆ°äº†æå‡

  ![image-20210625151900938](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210625151900938.png)

+ **PointNetå˜ç§2 Multi-resolution grouping (MRG)**

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210625152325808.png" alt="image-20210625152325808" style="zoom:80%;" />

  + åšPointNetæ—¶,ä¸ä»…çœ‹n-1å±‚çš„è¾“å‡º,ä¹Ÿçœ‹n-2å±‚çš„ç»“æœ
  + ä¸MSGæœ‰ç±»ä¼¼çš„ä¼˜ç¼ºç‚¹

+ **PointNet++    Segmentation**

  **Segmentation**æ˜¯å¯¹æ¯ä¸€ä¸ªç‚¹çš„åˆ†ç±»,ä½†ç»è¿‡PointNet++å¤„ç†å,ç‚¹äº‘åšäº†ä¸‹é‡‡æ ·,è¦æƒ³æ¢å¤åˆ°åŸæ¥çš„ç‚¹äº‘,éœ€è¦**æ’å€¼**,å…·ä½“çš„åšæ³•æ˜¯:

  ![image-20210625154432563](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210625154432563.png)

  

![image-20210625155911293](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210625155911293.png)

â€‹	ä»å‰é¢çš„å±‚ä¸­ä¸Šé‡‡æ ·,è“è‰²çš„æ˜¯ä¹‹å‰çš„å±‚,(N_1,d+C1),C2æ˜¯å½“å‰è“è‰²ä¸­æ¯ä¸€ä¸ªç‚¹,åœ¨ç»“æœ(æ©™è‰²)ä¸­,æ‰¾ä¸€ä¸ªé‚»åŸŸ,å¯¹å…¶ä¸­çš„ç‰¹å¾å‘é‡è¿›è¡ŒåŠ æƒå¹³å‡,æ’å€¼å¾—åˆ°çš„,å†ç»è¿‡ä¸€ä¸ªMLP(unit pointnet),ç„¶åå†ä¸Šé‡‡æ ·æ’å€¼ä¸€æ¬¡,å¾—åˆ°(N,k)çš„çŸ©é˜µ,Næ˜¯ç‚¹çš„ä¸ªæ•°,kæ˜¯ç±»åˆ«ä¸ªæ•°.

æ€»çš„æ¥è¯´,å°±æ˜¯ä¸Šé‡‡æ ·ä¹‹å‰çš„å±‚æå–çš„ç‰¹å¾,å…·ä½“çš„:

+ $x\in R^3$: ä¸Šé‡‡æ ·å±‚ä¸­çš„ç‚¹(N1ä¸ªç‚¹)
+ $f\in R^{c_2}$:æ’å€¼å¾—åˆ°çš„ç‰¹å¾
+ $x_i\in R^3$: å‰ä¸€å±‚ä¸­çš„ç‚¹(N2ä¸ªç‚¹)
+ $w_i\in R$: $d(x,x_i)$è·ç¦»çš„å€’æ•°,è·ç¦»è¶Šè¿‘,æƒé‡è¶Šå¤§
+ $f_i\in R^{c_2}$:å‰ä¸€å±‚ä¸­ç‚¹çš„ç‰¹å¾

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210625162330151.png" alt="image-20210625162330151" style="zoom:80%;" />

+ **PointNet & PointNet++   Summary** 

  **PointNet**

  + ç¬¬ä¸€ä¸ªç›´æ¥å¤„ç†ç‚¹äº‘çš„æ·±åº¦å­¦ä¹ æ–¹æ³•
  + ç¼ºå°‘é€å±‚çš„ç‰¹å¾æå–

  **PointNet++**

  + é€šè¿‡é‡å¤`sampling-group-PointNet`å®ç°å¤šå±‚çš„ç‰¹å¾æå–
  + æ¨¡å‹æ€§èƒ½å¾—åˆ°æ˜¾è‘—æå‡
  + éœ€è¦æ›´å¤šçš„è®¡ç®—é‡

+ **Tricks â€“ Data Augmentation**

  è®­ç»ƒæ—¶çš„ä¸€äº›å°æŠ€å·§

  **1. Normalization**

  + PointNet
    + æŠŠè¾“å…¥å½’ä¸€åŒ–åˆ°0å‡å€¼
  + PointNet++
    + é‡‡æ ·ç‚¹  é‚»åŸŸçš„å½’ä¸€åŒ–,centerd-with-node
    + zero-mean

  **2.Input Point Dropout**

  â€‹		ä¾‹å¦‚,è¾“å…¥ç‚¹æ•°æœ€å¤šæ˜¯5000,æ¯ä¸ªè®­ç»ƒbatch,éšæœºé€‰æ‹©[100,5000]ä¸ªç‚¹(æœ‰ç‚¹åƒé™é‡‡æ ·)

  â€‹		å¯ä»¥æå‡ç½‘ç»œçš„ç¨³å®šæ€§

  **3.åæ ‡åŠ é«˜æ–¯å™ªå£°**

  $(x+\Delta x,y+\Delta y,z+\Delta z)$  $\Delta \sim N(0,\sigma^2)$

  **4.æ—‹è½¬**

  + æ›´ä¸å®¹æ˜“è¿‡æ‹Ÿåˆ
  + æ¨¡å‹æ€§èƒ½æœ‰æ‰€ä¸‹é™
  + å¯¹äºç‰©ä½“çš„æ—‹è½¬æ›´åŠ é²æ£’

#### SO-Net



#### Graph Convolutional Network for Point Cloud

å›¾å·ç§¯ç¥ç»ç½‘ç»œåœ¨ç‚¹äº‘ä¸Šçš„åº”ç”¨







## class 6 3D Object Detection

+ **ä»€ä¹ˆæ˜¯3D ç›®æ ‡æ£€æµ‹**

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210627103614079.png" alt="image-20210627103614079" style="zoom:80%;" />

  + **è¾“å…¥**:å›¾ç‰‡æˆ–è€…ç‚¹äº‘
  + **è¾“å‡º**:æ¡†ä½3Dç‰©ä½“çš„ä¸‰ç»´æ¡† 3D bounding boxes-`[x,y,z,length,width,height,heading,class]`
  + **heading**:  æœå‘,æ²¿ç€zè½´çš„è§’åº¦(yaw)

### 1.ç›®æ ‡æ£€æµ‹åŸºç¡€çŸ¥è¯†

å¤§å¤šæ•°ä¸‰ç»´çš„ç›®æ ‡æ£€æµ‹æ˜¯ä»äºŒç»´ç›®æ ‡æ£€æµ‹æ–¹æ³•å€Ÿé‰´æ¥çš„

+ **æ€æ ·å®ç°ç›®æ ‡æ£€æµ‹æ£€æµ‹?**

  ç›®æ ‡æ£€æµ‹ä»»åŠ¡é€šå¸¸å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªä»»åŠ¡

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210627105522165.png" alt="image-20210627105522165" style="zoom:80%;" />

  + **ç›®æ ‡å®šä½:** å…ˆä¸ç®¡ç‰©ä½“æ˜¯ä»€ä¹ˆ,å…ˆæŠŠå®ƒä»å›¾ç‰‡ä¸­æ‰¾åˆ°
  + **ç›®æ ‡åˆ†ç±»**: å¯¹æ‰¾åˆ°çš„ç‰©ä½“è¿›è¡Œåˆ†ç±»

+ **ç›®æ ‡æ£€æµ‹çš„éš¾ç‚¹**

  + **å›¾åƒ**ç›®æ ‡æ£€æµ‹éš¾ç‚¹

    + é®æŒ¡
    + å°ºåº¦
    + ç±»åˆ«ä¸å‡è¡¡
    + æ—‹è½¬(è§†è§’çš„ä¸åŒ)
    + æ³›åŒ–æ€§
    + å…‰ç…§

  + **ç‚¹äº‘**ç›®æ ‡æ£€æµ‹çš„éš¾ç‚¹

    + é®æŒ¡
    + ~~å°ºåº¦~~
    + ç±»åˆ«ä¸å‡è¡¡
    + è§†è§’ æ—‹è½¬
    + æ³›åŒ– æ€§
    + ~~å…‰ç…§~~
    + ç¼ºå°‘çº¹ç†ä¿¡æ¯
    + è¿œå¤„ç‚¹ç¨€ç–

  + **é•¿å°¾æ•ˆåº”**

    **å°‘æ•°ç±»(å¤´ç±»)å ç”¨å¤§éƒ¨åˆ†æ•°æ®ï¼Œè€Œå¤§å¤šæ•°ç±»(å°¾ç±»)åªæœ‰å°‘é‡çš„æ•°æ®**

    ![image-20210627110624022](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210627110624022.png)

    ä½¿ç”¨ç›®å‰æ¯”è¾ƒå…ˆè¿›çš„äººä½“æ£€æµ‹ç½‘ç»œå»æ£€æµ‹ä¸Šé¢è¿™å¼ å›¾,ä¹Ÿåªæ£€æµ‹å‡ºå‡ ä¸ªäººä½“,å› ä¸ºå›¾ç‰‡ä¸­äººä½“çš„å½¢çŠ¶æ¯”è¾ƒå¥‡æ€ª,åœ¨ç¥ç»ç½‘ç»œçš„è®­ç»ƒæ•°æ®ä¸­å‡ ä¹æ²¡æœ‰å‡ºç°è¿‡;

    å®é™…ä¸Šæ·±åº¦å­¦ä¹ æœ€å¤šåªèƒ½è§£å†³å®é™…ä¸­80%-90%çš„æƒ…å†µ,å‰©ä¸‹çš„æƒ…å†µæ— æ³•è§£å†³,è€Œè¿™å‰©ä¸‹çš„10%å¾€å¾€æ˜¯è‡´å‘½çš„,æ‰€ä»¥æ·±åº¦å­¦ä¹ ä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„,è™½ç„¶åŸºäºæ·±åº¦å­¦ä¹ çš„3Dç›®æ ‡æ£€æµ‹æ•ˆæœè¦æ¯”`åœ°é¢åˆ†å‰²-éšœç¢ç‰©èšç±»-ç‰¹å¾æå–-åˆ†ç±»`çš„å‡†ç¡®åº¦è¦é«˜å¾ˆå¤š,ä½†æ˜¯ä¹Ÿæœ‰æ·±åº¦å­¦ä¹ æ— æ³•è§£å†³çš„é—®é¢˜,æ­¤å¤–,ä¼ ç»Ÿæ–¹æ³•ç›¸æ¯”æ·±åº¦å­¦ä¹ æ³›åŒ–æ€§èƒ½è¦å¥½å¾ˆå¤š,æ¯”å¦‚è¯´åœ°é¢åˆ†å‰²

+ **ç›®æ ‡æ£€æµ‹æ€§èƒ½è¯„ä»·æŒ‡æ ‡**

  â€‹		<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210627111753880.png" alt="image-20210627111753880" style="zoom:80%;" />

  + **Intersection over Union(IoU) äº¤å¹¶æ¯”**

    åˆ¤æ–­ä¸€ä¸ªé¢„æµ‹æ¡†å’Œground truthçš„åŒ¹é…ç¨‹åº¦

    <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210627113700826.png" alt="image-20210627113700826" style="zoom:80%;" />

  + **Precision & Recal**

    **å‡†ç¡®ç‡ å’Œ å¬å›ç‡**

    ![image-20210627115102336](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210627115102336.png)

    å¯¹äºæ£€æµ‹å‡ºæ¥çš„æ¡†:

  > true positives: æ­£ç¡®çš„æ¡†çš„ä¸ªæ•°,çœŸå€¼ä¸ºæ­£ç±»,æ£€æµ‹ä¸ºæ­£ç±»
  >
  > false positives: é”™è¯¯çš„æ¡†çš„ä¸ªæ•°,çœŸå€¼ä¸ºè´Ÿç±»,æ£€æµ‹ä¸ºæ­£ç±»

  â€‹		å¯¹äºæ²¡æœ‰æ£€æµ‹å‡ºæ¥çš„æ¡†:

  > true negatives: çœŸå€¼æ˜¯è´Ÿç±»,ä¹Ÿæ²¡æœ‰æ£€æµ‹å‡ºæ¥(ä¹Ÿæ˜¯è´Ÿç±»)
  >
  > false negatives: çœŸå€¼æ˜¯æ­£ç±»,æ£€æµ‹å‡ºæ¥ä¸ºè´Ÿç±»

  â€‹		å‡†ç¡®ç‡æ˜¯å¯¹äºæ£€æµ‹å‡ºæ¥çš„ç»“æœä¸­,æ­£ç¡®æ¡†çš„æ¯”ä¾‹

  â€‹		å¬å›ç‡æ˜¯å¯¹äºæ‰€æœ‰çš„çœŸå€¼æ¡†,æ£€æµ‹å‡ºæ¥çš„çœŸå€¼æ¡†çš„æ¯”ä¾‹;

  â€‹		è¿™ä¸¤ä¸ªæŒ‡æ ‡é€šå¸¸ æ˜¯ä¸èƒ½éƒ½å¾ˆé«˜çš„,é€šè¿‡ä¸€äº›æ–¹æ³•,å¯ä»¥æŠŠæŸä¸€ä¸ªå˜çš„å¾ˆé«˜,ä½†æ˜¯å¦ä¸€ä¸ªå°±ä¼šå˜ä½,æ¯”å¦‚è¯´,

  â€‹		æŠŠç½®ä¿¡åº¦è°ƒçš„å¾ˆä½,recallä¼šå˜çš„å¾ˆé«˜,ä½†æ˜¯precisionä¼šå¾ˆä½,æ ¹æ®å®é™…åº”ç”¨è¿›è¡Œè°ƒèŠ‚

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210627120300667.png" alt="image-20210627120300667" style="zoom:80%;" />

  > æ³¨æ„:ä¸€ä¸ªground truth åªèƒ½æœ‰ä¸€ä¸ªTP,å…¶ä»–æ£€æµ‹å‡ºæ¥çš„æ¡†æ˜¯FP

  + **Average Precision(AP)**

    å¯¹äºæ¯ä¸€ä¸ªç±»,å¯ä»¥ç®—ä¸€ä¸ªAP,ç„¶åè®¡ç®—å‡ºæ‰€æœ‰ç±»çš„AP,è®¡ç®—å¹³å‡å€¼,å¾—åˆ°mAP;

    mAPæ˜¯ç›®æ ‡æ£€æµ‹æœ€é‡è¦çš„ä¸€ä¸ªæ€§èƒ½è¯„ä»·æŒ‡æ ‡;

    **mAPçš„è®¡ç®—æ–¹æ³•:**

    **å¯¹äºä¸€ä¸ªç±»åˆ«è®¡ç®—AP:**

    1. é€‰æ‹©ä¸€ä¸ªIoUé˜ˆå€¼

    2. é€‰æ‹©ä¸€ä¸ªconfidenceç½®ä¿¡åº¦é˜ˆå€¼

       åªé€‰æ‹©ç½®ä¿¡åº¦å¤§äºé˜ˆå€¼çš„æ¡†

    3. ç¡®è®¤æ¯ä¸€ä¸ªæ¡†æ˜¯TPè¿˜æ˜¯FP
  
       + TP: IoU > threshold & Highest IoU â€“ ==One TP per GT Box!ä¸€ä¸ªGTåªèƒ½æœ‰ä¸€ä¸ªTP,å…¶ä»–éƒ½åˆ¤æ–­ä¸ºFP==
     + FP:  IoU < threshold / Duplicated box(é‡å¤çš„æ¡†)
         + Duplicated box: each ground truth box can be associated with one TP only, others are FP.

    4. Compute Precision / Recall

       ![image-20210629155256304](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210629155256304.png)

    5. æ ¹æ®ä»é«˜åˆ°ä½ä¸åŒçš„ç½®ä¿¡åº¦é˜ˆå€¼,é‡å¤**2-4**å¾—åˆ°å¤šç»„Precision / Recall, ç»˜åˆ¶**P-R**æ›²çº¿

    6. è®¡ç®—**P-R**æ›²çº¿ä¸‹çš„é¢ç§¯(Area Under Curve ;AUC)å°±æ˜¯AP,é¢ç§¯è¶Šå¤§,æ€§èƒ½è¶Šå¥½

    å¯¹äºæ‰€æœ‰ç±»åˆ«,åˆ†åˆ«è®¡ç®—AP

    è®¡ç®—å®ƒä»¬çš„å¹³å‡å€¼,å¾—åˆ°mAP

  + **P-R Curve**

    ä»¥ä¸‹å›¾ä¸ºä¾‹,è®¡ç®—çŒ«çš„P-Ræ›²çº¿

    <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210627120300667.png" alt="image-20210627120300667" style="zoom:80%;" />
  
  ![image-20210629162801708](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210629162801708.png)

æ ¹æ®ç½®ä¿¡åº¦é˜ˆå€¼ä»é«˜åˆ°ä½æ’åº

å¦‚æœé€‰æ‹©é˜ˆå€¼æ˜¯0.98,å°±åªæœ‰ç¬¬ä¸€è¡Œæ•°æ®æœ‰æ•ˆ,æ­¤æ—¶P=1,R=0.25,å¾—åˆ°PRæ›²çº¿ä¸Šé¢çš„ä¸€ä¸ªç‚¹,ä¾æ¬¡ç±»æ¨å¯ä»¥å¾—åˆ°7ä¸ªç‚¹,ç»˜åˆ¶å‡ºPRæ›²çº¿(è“è‰²çš„çº¿):

(è“è‰²å’Œçº¢è‰² å›¾ä¾‹å†™åäº†)

![image-20210629165117882](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210629165117882.png)

è“è‰²çš„çº¿æ˜¯é”¯é½¿çŠ¶çš„,ä¸€èˆ¬è¯´æ¥,På’ŒRæ˜¯ä¸€ä¸ªå¤§ä¸€ä¸ªå°çš„,å‘ˆç°è´Ÿç›¸å…³çš„çŠ¶æ€,ä¸ºäº†è®©è¿™ä¸ªPRæ›²çº¿æ›´å¥½çœ‹,æœ‰ä¸€ç§æ’å€¼æ–¹æ³•(Precision Interpolated)

![image-20210629165431506](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210629165431506.png)

ä¸ºäº†æ¶ˆæ‰è¿™ä¸ªé”¯é½¿,å¯¹äºæ¯ä¸€ä¸ªP-Rç‚¹,ç”¨å¤§äºç­‰äºrçš„ç‚¹ä¸­,æœ€é«˜çš„på€¼ä½œä¸ºå½“å‰ç‚¹çš„på€¼,è¿™æ ·å°±æŠŠé”¯é½¿æ¶ˆé™¤æ‰äº†,æœ‰äº†ä¸Šé¢å›¾ä¸­çº¢è‰²çš„çº¿.

![image-20210629165725947](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210629165725947.png)

+ **Non-Maximum Suppresson(NMS) éæå¤§å€¼æŠ‘åˆ¶**

  é€šå¸¸æ·±åº¦å­¦ä¹ ç›®æ ‡æ£€æµ‹å¯¹äºæ¯ä¸€ä¸ªç‰©ä½“ä¼šè¾“å‡ºå¾ˆå¤šä¸ªæ¡†,è¿™æ ·å°±ä¼šå¯¼è‡´,åœ¨ç®—Precisionçš„æ—¶å€™,æ•°å€¼å¾ˆä½,mAP å¾ˆä½;

  åŒæ—¶,æˆ‘ä»¬ä¹Ÿå¸Œæœ›,æ¯ä¸€ä¸ªç‰©ä½“åªè¾“å‡ºä¸€ä¸ªæœ€å¥½çš„æ¡†;

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210629172502501.png" alt="image-20210629172502501" style="zoom:80%;" />

  **NMSçš„è®¡ç®—æ–¹æ³•**

  1. æŠŠ**æ‰€æœ‰çš„æ£€æµ‹æ¡†(åŒä¸€ä¸ªç±»åˆ«çš„?)** ä¿å­˜åˆ° è¾“å…¥åˆ—è¡¨ä¸­input list

  2. æ ¹æ®ç½®ä¿¡åº¦å¯¹è¿™äº›æ£€æµ‹æ¡†è¿›è¡Œæ’åº

  3. é€‰æ‹©ä¸€ä¸ªç½®ä¿¡åº¦æœ€å¤§çš„æ”¾åˆ°è¾“å‡ºåˆ—è¡¨output list,åŒæ—¶å°†å…¶ä»è¾“å…¥åˆ—è¡¨input listä¸­å»é™¤

  4. éå†è¾“å…¥åˆ—è¡¨input listä¸­æ‰€æœ‰çš„æ£€æµ‹æ¡†

     + è®¡ç®—3ä¸­ç½®ä¿¡åº¦æœ€å¤§çš„æ£€æµ‹æ¡†å’Œå…¶ä»–æ£€æµ‹æ¡†çš„IoU
     + å¦‚æœ $IoU > threshold\ \tau $,å°±æŠŠè¿™ä¸ªæ£€æµ‹æ¡†åˆ é™¤,ä»è¾“å…¥åˆ—è¡¨ä¸­åˆ é™¤

  5. é‡å¤ æ­¥éª¤3,4 ç›´åˆ°è¾“å…¥åˆ—è¡¨ä¸­æ²¡æœ‰æ£€æµ‹æ¡†

  6. è¾“å‡ºåˆ—è¡¨å°±æ˜¯æœ€åçš„ç»“æœ

     ![image-20210629185854281](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210629185854281.png)

### 2.Image Based Object Detection

åŸºäºå›¾åƒçš„ç›®æ ‡æ£€æµ‹å‘å±•è¿›ç¨‹

+ ä¼ ç»Ÿæ–¹æ³•
+ æ·±åº¦å­¦ä¹ æ–¹æ³•
  + one-stage
  + two-stage

![image-20210629190128915](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210629190128915.png)

#### 2.1 Two Stage

##### 1.RCNN

**Detection=Localization+Classification**

+ åˆ†ç±»ä½¿ç”¨ç¥ç»ç½‘ç»œ

+ å®šä½    -----  å¯ä»¥å…ˆé€šè¿‡ä¸€äº›æ–¹æ³•æ‰¾åˆ°å€™é€‰åŒºåŸŸ

  + æ¯”å¦‚è¯´,ç®€å•çš„é¢œè‰²èšç±»

  ![image-20210629192508075](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210629192508075.png)

è¿™ç§æ€è·¯ä¸‹çš„å¼€å±±ä¹‹ä½œæ˜¯**RCNN**

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210629194102328.png" alt="image-20210629194102328" style="zoom:80%;" />

+ ä¸Šå›¾æ˜¯RCNNçš„æµç¨‹

  1. é¦–å…ˆä½¿ç”¨ä¼ ç»Ÿæ–¹æ³•(select search)ç”Ÿæˆä¸€äº›**å€™é€‰åŒºåŸŸ/æ„Ÿå…´è¶£åŒºåŸŸROI,**å¤§æ¦‚æœ‰2000ä¸ªå€™é€‰æ¡†

     RCNNä¸­ä½¿ç”¨çš„æ–¹æ³•:

  > Selective Search:
  > \1. Generate initial sub-segmentation, we generate many candidate  regions
  > \2. Use greedy algorithm to recursively combine similar regions into larger ones 
  > \3. Use the generated regions to produce the final candidate region proposals 

  2. æŠŠå›¾ç‰‡ä¸­å¯¹åº”çš„å€™é€‰æ¡†åŒºåŸŸè£å‰ªå‡ºæ¥ï¼Œç„¶åç¼©æ”¾åˆ°å›ºå®šçš„å¤§å°
  3. æŠŠè¿™äº›å›ºå®šå¤§å°çš„å›¾ç‰‡è¾“å…¥CNNæå–ç‰¹å¾ï¼ŒRCNNåŸæ–‡æ˜¯ä½¿ç”¨SVMè¿›è¡Œåˆ†ç±»ï¼Œå…¶å®å¯ä»¥ç›´æ¥ä½¿ç”¨CNNè¿›è¡Œåˆ†ç±»
  4. ç¬¬ä¸€æ­¥ä¸­ç”Ÿæˆçš„å€™é€‰æ¡†è‚¯å®šä¸å‡†ï¼Œæ‰€ä»¥è¦è¿›è¡Œå›å½’ï¼ŒRCNNåŸæ–‡æŠŠbboxçš„å››ä¸ªåç§»é‡å›å½’å‡ºæ¥ï¼Œ**å¯¹å€™é€‰æ¡†è¿›è¡Œä¿®æ­£**

+ RCNNçš„é—®é¢˜

  + å› ä¸ºå€™é€‰æ¡†å¤ªå¤šäº†ï¼Œæ‰€ä»¥ååˆ†è€—æ—¶
  + å€™é€‰æ¡†çš„é€‰æ‹©æ˜¯æ²¡æœ‰å­¦ä¹ è¿‡ç¨‹çš„ï¼Œæ‰€ä»¥ç”Ÿæˆæ•ˆæœä¸æ˜¯å¾ˆå¥½

è®­ç»ƒä¸€ä¸ªRCNNæ¨¡å‹éå¸¸æ˜‚è´µï¼Œå¹¶ä¸”æ­¥éª¤è¾ƒå¤šï¼š

+ æ ¹æ®é€‰æ‹©æ€§æœç´¢ï¼Œè¦å¯¹æ¯å¼ å›¾ç‰‡æå–2000ä¸ªå•ç‹¬åŒºåŸŸï¼›
+ ç”¨CNNæå–æ¯ä¸ªåŒºåŸŸçš„ç‰¹å¾ã€‚å‡è®¾æˆ‘ä»¬æœ‰Nå¼ å›¾ç‰‡ï¼Œé‚£ä¹ˆCNNç‰¹å¾å°±æ˜¯N*2000ï¼›
+ ç”¨RCNNè¿›è¡Œç›®æ ‡æ£€æµ‹çš„æ•´ä¸ªè¿‡ç¨‹æœ‰ä¸‰ä¸ªæ¨¡å‹ï¼š

1. ç”¨äºç‰¹å¾æå–çš„**CNN**
2. ç”¨äºç›®æ ‡ç‰©ä½“è¾¨åˆ«çš„çº¿æ€§**SVMåˆ†ç±»å™¨**
3. è°ƒæ•´è¾¹ç•Œæ¡†çš„**å›å½’æ¨¡å‹**ã€‚

è¿™äº›è¿‡ç¨‹åˆå¹¶åœ¨ä¸€èµ·ï¼Œä¼šè®©RCNNçš„é€Ÿåº¦å˜æ…¢ï¼Œé€šå¸¸æ¯ä¸ªæ–°å›¾ç‰‡éœ€è¦40â€”50ç§’çš„æ—¶é—´è¿›è¡Œé¢„æµ‹ï¼ŒåŸºæœ¬ä¸Šæ— æ³•å¤„ç†å¤§å‹æ•°æ®é›†ã€‚

##### 2.Fast RCNN

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/v2-a0df0942bb7092b2be31f151b1b76f78_720w.jpg" alt="img" style="zoom:80%;" />

![image-20210707111945648](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707111945648.png)

RCNNé€Ÿåº¦å¾ˆæ…¢çš„åŸå› æ˜¯

1. RoIçš„è·å–å¤ªéº»çƒ¦ï¼ˆé€‰æ‹©æ€§æœç´¢Selective Searchï¼‰ä¸”æ­£ç¡®ç‡æ„Ÿäºº,è€Œä¸”æœ‰å¾ˆå¤šé‡å çš„éƒ¨åˆ†,è¿›è¡Œç‰¹å¾æå–æ—¶å°±ä¼šæœ‰å¾ˆå¤šå†—ä½™çš„éƒ¨åˆ†
2. RoIçš„ç‰¹å¾æå–å¤ªè€—æ—¶ï¼ˆå…ˆåˆ‡å›¾ç‰‡ï¼Œç„¶åCNNæç‰¹å¾ï¼Œå¯¼è‡´æ•°æ®æ— æ³•å…±äº«ï¼‰ï¼Œä¸”ä¸­é—´æ¶‰åŠå¤§é‡çš„ç¡¬ç›˜è¯»å†™ï¼Œæ•°æ®è¦åœ¨ç¡¬ç›˜ï¼Œå†…å­˜ï¼Œç°å­˜ä¸‰è€…ä¹‹é—´æ¥å›å€’è…¾ã€‚

åœ¨Fast RCNNä¸­ï¼Œè§£å†³äº†ç¬¬äºŒä¸ªé—®é¢˜ï¼ŒR-CNNçš„ä¸»è¦æ€§èƒ½ç“¶é¢ˆåœ¨äºéœ€è¦**å¯¹æ¯ä¸ªæè®®åŒºåŸŸç‹¬ç«‹æŠ½å–ç‰¹å¾**ã€‚

ç”±äºè¿™äº›åŒºåŸŸé€šå¸¸æœ‰å¤§é‡é‡å ï¼Œç‹¬ç«‹çš„ç‰¹å¾æŠ½å–ä¼šå¯¼è‡´å¤§é‡çš„é‡å¤è®¡ç®—ã€‚

Fast R-CNNå¯¹R-CNNçš„ä¸€ä¸ªä¸»è¦æ”¹è¿›åœ¨äºåªå¯¹**æ•´ä¸ªå›¾åƒ**åšå·ç§¯ç¥ç»ç½‘ç»œçš„å‰å‘è®¡ç®—ã€‚

è¾“å…¥å›¾ç‰‡é¦–å…ˆç»è¿‡ä¸€ä¸ªCNNç”Ÿæˆä¸€å¼ feature mapï¼Œäºæ­¤åŒæ—¶åœ¨åŸå›¾ä¸Šè¿›è¡Œå’ŒRCNNç›¸åŒçš„ROIå€™é€‰åŒºåŸŸæå–ï¼Œç„¶åè¿™äº›å€™é€‰æ¡†åŒæ¯”ä¾‹çš„ç¼©æ”¾åˆ°è¿™å¼ feature mapä¸Šï¼Œè¿™äº›å€™é€‰æ¡†ç»è¿‡â€œROI pooling"æ“ä½œï¼Œè°ƒæ•´åˆ°ä¸€ä¸ªå›ºå®šçš„å°ºå¯¸ï¼Œå†æŠŠå®ƒä»¬è¾“å…¥ä¸€ä¸ªMLPï¼Œè¾“å‡ºç±»åˆ«å’Œå›å½’æ¡†ï¼Œ

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210630000258945.png" alt="image-20210630000258945" style="zoom:80%;" />

**Fast RCNN è®¡ç®—æ­¥éª¤ï¼š**

**1. æå–ç‰¹å¾**

ä¸R-CNNç›¸æ¯”ï¼ŒFast R-CNNç”¨æ¥**æå–ç‰¹å¾çš„å·ç§¯ç¥ç»ç½‘ç»œçš„è¾“å…¥æ˜¯æ•´ä¸ªå›¾åƒï¼Œè€Œä¸æ˜¯å„ä¸ªæè®®åŒºåŸŸ**ã€‚

è€Œä¸”ï¼Œç”±äºç”¨äºæå–ç‰¹å¾å¾—ç½‘ç»œå‚æ•°å¯ä»¥é€šè¿‡è®­ç»ƒæ›´æ–°ã€‚

è®¾è¾“å…¥ä¸€å¼ å›¾åƒï¼Œå°†CNNçš„è¾“å‡ºå°ºå¯¸è®°ä¸º ![[å…¬å¼]](https://www.zhihu.com/equation?tex=1+%5Ctimes+c+%5Ctimes+h_%7B1%7D+%5Ctimes+w_%7B1%7D)

**2. RoIä¸Roi pooling**

å‡è®¾å·²ç»æœ‰é€‰æ‹©æ€§æœç´¢Selective Searchç”Ÿæˆäº† ![[å…¬å¼]](https://www.zhihu.com/equation?tex=n+) ä¸ªæè®®åŒºåŸŸRegion Proposal/Region of Interestï¼ˆRoIï¼‰ã€‚è¿™äº›RoIçš„å¤§å°å„å¼‚ï¼Œå› æ­¤éœ€è¦é¢å¤–æ“ä½œæå–ç›¸åŒå°ºå¯¸çš„ç‰¹å¾ï¼ˆå‡è®¾é«˜å’Œå®½ä¸º ![[å…¬å¼]](https://www.zhihu.com/equation?tex=+h_%7B2%7D) å’Œ ![[å…¬å¼]](https://www.zhihu.com/equation?tex=w_%7B2%7D+) ï¼‰ä»¥ä¾¿äºè¿ç»“åè¾“å‡ºã€‚Fast R-CNNå¼•å…¥å…´è¶£åŒºåŸŸæ± åŒ–ï¼ˆregion of interest poolingï¼ŒRoIæ± åŒ–ï¼‰å±‚ï¼Œå°†å·ç§¯ç¥ç»ç½‘ç»œçš„è¾“å‡ºå’Œæè®®åŒºåŸŸä½œä¸ºè¾“å…¥ï¼Œè¾“å‡ºè¿ç»“åçš„å„ä¸ªæè®®åŒºåŸŸæŠ½å–çš„ç‰¹å¾ï¼Œè¾“å‡ºå¤§å°ä¸º ![[å…¬å¼]](https://www.zhihu.com/equation?tex=n+%5Ctimes+c+%5Ctimes+h_%7B2%7D+%5Ctimes+w_%7B2%7D) ã€‚

![img](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/v2-e55e66c9c21136efa62beacfcb02f9ef_b.webp)

**3. é¢„æµ‹**

é€šè¿‡å…¨è¿æ¥å±‚å°†è¾“å‡ºå½¢çŠ¶å˜æ¢ä¸º nÃ—d ï¼Œå…¶ä¸­è¶…å‚æ•° d å–å†³äºæ¨¡å‹è®¾è®¡ï¼Œnä¸ºROIçš„ä¸ªæ•°ã€‚

â€¢ é¢„æµ‹ç±»åˆ«æ—¶ï¼Œå°†å…¨è¿æ¥å±‚çš„è¾“å‡ºçš„å½¢çŠ¶å†å˜æ¢åˆ° nÃ—q å¹¶ä½¿ç”¨softmaxå›å½’ï¼ˆq ä¸ºç±»åˆ«ä¸ªæ•°ï¼‰ã€‚

â€¢ é¢„æµ‹è¾¹ç•Œæ¡†æ—¶ï¼Œå°†å…¨è¿æ¥å±‚çš„è¾“å‡ºçš„å½¢çŠ¶å˜æ¢ä¸º nÃ—4ã€‚ï¼ˆä¸ºæ¯ä¸ªæè®®åŒºåŸŸé¢„æµ‹ç±»åˆ«å’Œè¾¹ç•Œæ¡†ï¼‰

Fast R-CNNä¸­æå‡ºçš„å…´è¶£åŸŸæ± åŒ–å±‚ Roi Pooling ä¸æˆ‘ä»¬ç†ŸçŸ¥çš„å„ç±»æ± åŒ–å±‚ä¸åŒã€‚

+ ä¼ ç»Ÿæ± åŒ–å±‚é€šè¿‡è®¾ç½®æ± åŒ–çª—å£å®½åº¦ width ã€å¡«å…… padding å’Œæ­¥å¹… stride æ¥é—´æ¥æ§åˆ¶è¾“å‡ºå½¢çŠ¶ã€‚
+ è€Œ RoI Pooling å±‚åˆ™é€šè¿‡å‚æ•°è®¾ç½®ç›´æ¥æ§åˆ¶è¾“å‡ºå½¢çŠ¶ã€‚

###### **==Fast RCNN â€“ ROI Pooling==**

![image-20210706232053253](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210706232053253.png)

ä¸€å¼ å›¾ç‰‡ç»è¿‡CNNåè¾“å‡ºä¸€å¼ feature map,å¤§å°ä¼šç¼©æ”¾,æŠŠåœ¨åŸå›¾ä¸Šå¾—åˆ°çš„RoIåŒºåŸŸåŒæ¯”ä¾‹ç¼©æ”¾åˆ°è¿™å¼ feature mapä¸Š,ä½ç½®åæ ‡è‚¯å®šæ˜¯æµ®ç‚¹æ•°,ä¸‹å›¾å³è¾¹çº¢è‰²çš„æ¡†,ç»è¿‡ä¸€ä¸ªfloorå–æ•´æ“ä½œå,å˜æˆé»‘è‰²çš„æ¡†;

![image-20210706232253670](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210706232253670.png)



+ è®¾ROI poolingè¾“å‡ºçš„å°ºå¯¸ä¸º2x2

  ![image-20210706232802002](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210706232802002.png)

  æ ¹æ®è®¾ç½®çš„ROIè¾“å‡ºå°ºå¯¸,å°†feature mapå¯¹åº”çš„ROIåŒºåŸŸåˆ†æˆ2x2ä»½,é•¿å®½éƒ½åˆ†æˆ2ä»½,ä¹Ÿæœ‰flooræ“ä½œç„¶å,æ¯ä¸€å°å—è¿›è¡Œmaxæ“ä½œ,å–æœ€å¤§å€¼ä½œä¸ºè¾“å‡º

  ä¸Šé¢è¿™å¼ å›¾æ˜¯å¯¹åº”ROIåŒºåŸŸæ¯”è¾“å‡ºå°ºå¯¸å¤§çš„æƒ…å†µ,å¦‚æœROIåŒºåŸŸæ¯”è¾“å‡ºå°ºå¯¸å°çš„æƒ…å†µå‘¢?

  ä¸‹å›¾ROI è¾“å‡ºå°ºå¯¸4x4

  ä¸å›¾åƒæ”¾å¤§ç±»ä¼¼:æ ¹æ®æ”¾å¤§æ¯”ä¾‹,å¯¹äºè¾“å‡ºå›¾åƒçš„ä¸€ä¸ªåæ ‡,è®¡ç®—åœ¨åŸå›¾ä¸­çš„åæ ‡,floorä¹‹å,å–åŸå›¾ä¸­å¯¹åº”åæ ‡çš„å€¼,å¡«åˆ°æ”¾å¤§åçš„å›¾åƒä¸Š

![image-20210706233309407](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210706233309407.png)

+ **åˆ†ç±»ä»¥åŠè¾¹ç•Œæ¡†å›å½’**

![image-20210707145650446](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707145650446.png)

![image-20210707145720976](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707145720976.png)

![image-20210707145808591](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707145808591.png)

+ **Fast RCNN summary**

  ![image-20210707145930653](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707145930653.png)

##### 3.ROI Align(Mask-RCNN)

åœ¨ä¸Šé¢ROI Poolingæ“ä½œä¸­ä½¿ç”¨äº†å¾ˆå¤šfloor,å› ä¸ºä»åŸå›¾åˆ°feature map,ç¼©æ”¾æ¯”ä¾‹æ˜¯å¾ˆå·¨å¤§çš„,æ‰€ä»¥è¿™ä¸ªå–æ•´æ“ä½œå°±ä¼šæŸå¤±å¾ˆå¤šç²¾åº¦;

![image-20210707090624481](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707090624481.png)

åœ¨å›¾åƒç¼©æ”¾ä¸­,åœ¨æ–°å›¾åƒä¸­å¯»æ‰¾åŸå›¾ä¸­çš„äººå¯¹åº”åæ ‡,æ’å€¼çš„æ–¹æ³•è¦æ¯”ç›´æ¥ä½¿ç”¨æœ€è¿‘é‚»ç‚¹æ•ˆæœè¦å¥½,åŒæ ·çš„,æˆ‘ä»¬å¯ä»¥æŠŠROI pooling ä¸­å„ç§å–æ•´çš„æ“ä½œ,æ”¹æˆæ’å€¼çš„æ–¹å¼,ç›´æ¥åœ¨æµ®ç‚¹æ•°ä¸Šé¢æ“ä½œ,è¿™å°±æ˜¯ROI Align

å¦‚ä¸Šå›¾æ‰€ç¤º,æŠŠåŸå›¾ä¸Šçš„ROIåŒºåŸŸç¼©æ”¾åˆ°feature mapä¸Šé¢,æ¡†çš„å››ä¸ªé¡¶ç‚¹æ˜¯æµ®ç‚¹æ•°,å‡è®¾ROIè¾“å‡ºæ˜¯2x2,åœ¨2x2çš„æ¯ä¸€ä¸ªcellå†…é‡‡æ ·4ä¸ªç‚¹,æ¯ä¸€ä¸ªç‚¹çš„å€¼ä½¿ç”¨åŒçº¿æ€§æ’å€¼å¾—åˆ°,æœ€åæ¯ä¸€ä¸ªcell çš„è¾“å‡ºæ˜¯è¿™å››ä¸ªé‡‡æ ·ç‚¹çš„max/avg

+ **åŒçº¿æ€§æ’å€¼**

  ![image-20210707091641680](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707091641680.png)

  é¦–å…ˆæ’å€¼å¾—åˆ°R2å’ŒR1çš„å€¼,å†ä½¿ç”¨å®ƒä»¬æ’å€¼å¾—åˆ°é‡‡æ ·ç‚¹Pçš„å€¼

+ **ä¸€ä¸ªä¾‹å­**

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707092046462.png" alt="image-20210707092046462" style="zoom:80%;" />

![image-20210707092125922](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707092125922.png)

![image-20210707092239844](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707092239844.png)

![image-20210707092406232](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707092406232.png)

![image-20210707092426996](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707092426996.png)

+ **RCNN vs Fast RCNN**

  ![image-20210707092557582](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707092557582.png)



â€‹	Fast RCNNç›¸æ¯”äºRCNN,å®ƒåªåšä¸€æ¬¡å·ç§¯æ“ä½œ,åœ¨feature mapä¸Šè¿›è¡ŒROI pooling,æ—¶é—´å¤§å¹…åº¦å‡å°‘;

â€‹	ä½†æ˜¯,åˆ†æFast RCNN å„éƒ¨åˆ†çš„è€—æ—¶æ—¶å‘ç°,å¦‚ä¸Šå³å›¾,å¤§éƒ¨åˆ†çš„è€—æ—¶éƒ½å‘ç”Ÿåœ¨ä¸ä½¿ç”¨æ·±åº¦å­¦ä¹ çš„region proposalä¸Šé¢,å¦‚æœä½¿ç”¨æ·±åº¦å­¦ä¹ æ¥åšè¿™éƒ¨åˆ†å·¥ä½œ,è€—æ—¶ä¹Ÿä¼šé™ä¸‹æ¥,è¿™å°±æ˜¯Faster RCNN

##### 4.Faster RCNN

![image-20210707150218416](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707150218416.png)

![image-20210707093526442](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707093526442.png).

+ **Region Proposal Network(RPN)**
  + è¾“å…¥:
    + feature map
    + Anchors
    
  + è¾“å‡º:
    
    + Object proposals(x,y,h,w)
    
  + **Anchors -> Proposals**
  
    RPNçš„ä½œç”¨æ˜¯æŠŠé¢„å…ˆè®¾å¥½çš„anchorsè½¬æ¢ä¸ºproposals
  
    åœ¨feature mapçš„æ¯ä¸€ä¸ªä½ç½®ä¸Š,é¢„è®¾$k$ä¸ªanchors
  
    ![image-20210707094400516](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707094400516.png)



â€‹		è¿™$k$ä¸ªanchorsæœ‰ä¸åŒçš„å°ºåº¦å’Œé•¿å®½æ¯”

â€‹				![image-20210707160028636](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707160028636.png)

â€‹			åœ¨backboneè¾“å‡ºçš„feature mapä¸Š,å¯¹æ¯ä¸€ä¸ªç‚¹,ä½¿ç”¨ä¸€ä¸ª3x3çš„å·ç§¯

```python
self.conv = nn.Conv2d(in_channels, in_channels, kernel_size=3, stride=1, padding=1)
```

â€‹	è¿™ä¸ªè¾“å‡ºç»“æœå†å¹¶è”æ¥ä¸Šä¸¤ä¸ª1x1å·ç§¯å±‚,å·ç§¯æ ¸ä¸ªæ•°åˆ†åˆ«ä¸º2kå’Œ4k,ä¸€ä¸ªç”¨æ¥åˆ†ç±»,æ˜¯å‰æ™¯è¿˜æ˜¯èƒŒæ™¯,ä¸€ä¸ªç”¨æ¥å›å½’å‡ºanchorå’Œgtçš„åç§»é‡

```python
# è®¡ç®—é¢„æµ‹çš„ç›®æ ‡åˆ†æ•°ï¼ˆè¿™é‡Œçš„ç›®æ ‡åªæ˜¯æŒ‡å‰æ™¯æˆ–è€…èƒŒæ™¯ï¼‰,æ˜¯äºŒåˆ†ç±»,æ‰€ä»¥å·ç§¯æ ¸ä¸ªæ•°æ˜¯k
self.cls_logits = nn.Conv2d(in_channels, num_anchors, kernel_size=1, stride=1)
# è®¡ç®—é¢„æµ‹çš„ç›®æ ‡bbox regressionå‚æ•°
self.bbox_pred = nn.Conv2d(in_channels, num_anchors * 4, kernel_size=1, stride=1)
```

![image-20210707160621304](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707160621304.png)



**==é‚£ä¹ˆè¿™äº›Anchorsçš„ä½œç”¨åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢?==**

å¯¹äºç‰¹å¾å›¾ä¸­çš„æ¯ä¸€ä¸ªç‚¹,è®¡ç®—å®ƒåœ¨åŸå›¾åƒä¸­å¯¹åº”çš„åæ ‡,åœ¨è¿™ä¸ªåæ ‡å‘¨å›´ç”Ÿæˆ$k$ä¸ªanchors,è¿™$k$ä¸ªanchorså¯¹åº”çš„ç±»åˆ«(å‰æ™¯/èƒŒæ™¯)ä»¥åŠå’Œgt boxçš„åç§»é‡å°±æ˜¯**è®­ç»ƒæ•°æ®å¯¹åº”çš„çœŸå€¼**

å¯¹äºä¸€å¼ 1000x600x3çš„å›¾åƒï¼Œ å¤§çº¦æœ‰60x40x9(20k)ä¸ªanchorï¼Œ å¿½ç•¥è·¨è¶Šè¾¹ç•Œçš„anchorä»¥åï¼Œ å‰©ä¸‹çº¦6kä¸ªanchorã€‚ åœ¨æºç ä¸­,å¯¹äºå’Œgt box IoU>0.7çš„è®¾ç½®æˆä¸ºæ­£æ ·æœ¬,å¯¹äºIoU<0.3çš„,è®¾ä¸ºè´Ÿæ ·æœ¬,ä»‹äº0.3å’Œ0.7ä¹‹é—´çš„ä¹‹é—´èˆå¼ƒ,è¿™æ ·å°±è¿‡æ»¤äº†å¤§é‡çš„anchors

å¦‚æœæ²¡æœ‰IoU>0.7çš„,å°±æŠŠå’Œgt box IoUæœ€å¤§çš„è®¾ç½®ä¸ºæ­£æ ·æœ¬

ç„¶å,å†ä»è¿™äº›æ­£è´Ÿæ ·æœ¬ä¸­,éšæœºé‡‡æ ·256ä¸ªanchors,æ­£è´Ÿæ ·æœ¬1:1,å¦‚æœæ­£æ ·æœ¬ä¸ªæ•°ä¸è¶³128,å°±ç”¨è´Ÿæ ·æœ¬å»è¡¥å…¨;



**æŠŠè¿™äº›Anchorsç»è¿‡å€™é€‰æ¡†å›å½’çš„è°ƒæ•´,å°±å¾—åˆ°æœ€åçš„å€™é€‰æ¡†**,ç”±äºRPNç”Ÿæˆçš„å€™é€‰æ¡†ä¹‹é—´å­˜åœ¨å¤§é‡é‡å ï¼Œ

 (æµ‹è¯•æ—¶)åŸºäºå€™é€‰æ¡†çš„clså¾—åˆ†ï¼Œ é‡‡ç”¨éæå¤§å€¼æŠ‘åˆ¶ï¼Œ IoUè®¾ä¸º0.7ï¼Œ è¿™æ ·æ¯å¼ å›¾ç‰‡åªå‰©2kä¸ªå€™é€‰æ¡†



+ åªæœ‰åœ¨trainæ—¶ï¼Œcls+regæ‰èƒ½å¾—åˆ°å¼ºç›‘ç£ä¿¡æ¯(æ¥æºäºground truth)ã€‚å³ground truthä¼šå‘Šè¯‰cls+regç»“æ„ï¼Œå“ªäº›æ‰æ˜¯çœŸçš„å‰æ™¯ï¼Œä»è€Œå¼•å¯¼cls+regç»“æ„å­¦å¾—æ­£ç¡®åŒºåˆ†å‰åæ™¯çš„èƒ½åŠ›ï¼›åœ¨inferenceé˜¶æ®µï¼Œå°±è¦é cls+regè‡ªåŠ›æ›´ç”Ÿäº†ã€‚
+ åœ¨trainé˜¶æ®µï¼Œä¼šè¾“å‡ºçº¦2000ä¸ªproposalï¼Œä½†åªä¼šæŠ½å–å…¶ä¸­256ä¸ªproposalæ¥è®­ç»ƒRPNçš„cls+regç»“æ„ï¼ˆå…¶ä¸­ï¼Œ128ä¸ªå‰æ™¯proposalç”¨æ¥è®­ç»ƒcls+regï¼Œ128ä¸ªèƒŒæ™¯proposalç”¨æ¥åªè®­ç»ƒclsï¼‰ï¼›åˆ°äº†inferenceé˜¶æ®µï¼Œåˆ™ç›´æ¥è¾“å‡ºæœ€é«˜scoreçš„300ä¸ªproposalã€‚æ­¤æ—¶ç”±äºæ²¡æœ‰äº†ç›‘ç£ä¿¡æ¯ï¼Œæ‰€æœ‰RPNå¹¶ä¸çŸ¥é“è¿™äº›proposalæ˜¯å¦ä¸ºå‰æ™¯ï¼Œæ•´ä¸ªè¿‡ç¨‹åªæ˜¯æƒ¯æ€§åœ°æ¨é€ä¸€æ³¢æ— tagçš„proposalç»™åé¢çš„Fast R-CNNã€‚
+ RPNçš„è¿ç”¨ä½¿å¾—region proposalçš„é¢å¤–å¼€é”€å°±åªæœ‰ä¸€ä¸ªä¸¤å±‚ç½‘ç»œã€‚
  



å›å½’æ¡†æŸå¤±:

å›å½’çš„ç›®æ ‡æ˜¯åç§»å€¼,anchor_boxå’Œgroud truth çš„åç½®

![image-20210810171806465](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210810171806465.png)

+ **Faster RCNN summary**

  æ•´ä½“ç½‘ç»œæ¡†æ¶

  (é»„è‰²éƒ¨åˆ†åªåœ¨è®­ç»ƒæ—¶æœ‰æ•ˆ)

  + **AnchorsGenerator + RPNHead = Proposals**

![image-20210707162937260](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707162937260.png)

+ **æ£€æµ‹**

![image-20210707163313748](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707163313748.png)

+ CSDNæ‰¾åˆ°çš„ä¸€å¼ å¾ˆæ¸…æ™°çš„ç½‘ç»œç»“æ„å›¾,https://blog.csdn.net/JNingWei/article/details/80337660

  RPNä¸­è®¡ç®—Lossçš„éƒ¨åˆ†å¯¹åº”ä¸GTä¸­çš„éƒ¨åˆ†å¯¹åº”é”™äº†,cls lossåº”è¯¥å¯¹åº”object/non-obj,reg losså¯¹åº” location gt,ä¸è¿‡æ— ä¼¤å¤§é›…

![è¿™é‡Œå†™å›¾ç‰‡æè¿°](https://img-blog.csdn.net/20180607101134784?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0pOaW5nV2Vp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

+ **Steps**
  1. CNN  ->  Feature map
  2. RPN   ->  proposals
  3. ROI  Pooling
  4. CNN+MLP  -> bounding boxes
+ **Losses**
  1. RPN åˆ†ç±»æŸå¤±
  2. RPN è¾¹ç•Œæ¡†å›å½’æŸå¤±
  3. æœ€ç»ˆçš„è¾¹ç•Œæ¡†åˆ†ç±»æŸå¤±
  4. æœ€ç»ˆçš„è¾¹ç•Œæ¡†å›å½’æŸå¤±

##### 5.Mask RCNN

+ è¾“å…¥: å›¾åƒ
+ è¾“å‡º:
  + ç›®æ ‡æ¡†
  + per-pixel mask
+ å¯¹äºFaster RCNNçš„ä¸¤ä¸ªæ”¹è¿›
  + ROI Align
  + ç›®æ ‡æ£€æµ‹+å®ä¾‹åˆ†å‰²
+ **RCNN å®¶æ—**

![image-20210707165119842](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707165119842.png)

##### 6.FPN

**Feature Pyramid Networks for Object Detection**

RCNNå®¶æ—æ²¡æœ‰è€ƒè™‘å›¾ç‰‡çš„å¤šå°ºåº¦ä¿¡æ¯,å¯¼è‡´å¯¹äºå°ç›®æ ‡çš„æ£€æµ‹æ•ˆæœä¸å¥½;

Faster RCNN + FPN å åœ¨cocoæ•°æ®é›†mAPæå‡2.3

+ **åˆ©ç”¨å¤šå°ºåº¦ä¿¡æ¯çš„å‡ ç§æ–¹æ³•**

![image-20210708224624933](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210708224624933.png)

â€‹		(a) ä½¿ç”¨**å›¾åƒé‡‘å­—å¡”**,é¦–å…ˆå¾—åˆ°ä¸åŒçš„å›¾åƒ,ç„¶ååˆ†åˆ«é¢„æµ‹,æ•ˆç‡å¾ˆä½

â€‹		(b)åªä½¿ç”¨ä»åŸå›¾æå–çš„ç‰¹å¾å›¾è¿›è¡Œé¢„æµ‹,RCNNç³»åˆ—çš„åšæ³•,æ²¡æœ‰ä¸“é—¨å¤„ç†å¤šå°ºåº¦ä¿¡æ¯,æ¡†ä¸å‡ºå°ç‰©ä½“;

â€‹	    (c)åœ¨ä¸åŒçš„ç‰¹å¾å›¾ä¸­è¿›è¡Œé¢„æµ‹,ç±»ä¼¼SSD,åº•å±‚å¤§scaleçš„feature mapè¯­ä¹‰ä¿¡æ¯å°‘ï¼Œè™½ç„¶æ¡†å‡ºäº†å°ç‰©ä½“ï¼Œä½†å°ç‰©ä½“å®¹æ˜“è¢«é”™åˆ†;

â€‹	    (d)FPN:æŠŠä¸åŒå°ºåº¦çš„ç‰¹å¾å›¾èåˆèµ·æ¥,å†å»é¢„æµ‹,æ¯”(c)æ•ˆæœè¦å¥½

+ **FPNæ ¸å¿ƒæ€æƒ³**

  ![image-20210708230429896](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210708230429896.png)

è®¾è®¡å‡ºåŒ…å« â€œ **top-downè·¯å¾„** â€ å’Œ â€œ **æ¨ªå‘è¿æ¥** â€ çš„å¥—ä»¶ï¼Œæ¥ **èåˆ** â€œ **å°‘ä½ç½®ä¿¡æ¯è€Œå¤šè¯­ä¹‰ä¿¡æ¯çš„topå±‚feature map** â€ å’Œ â€œ **å¤šä½ç½®ä¿¡æ¯è€Œå°‘è¯­ä¹‰ä¿¡æ¯çš„downå±‚feature map** â€ :

é¦–å…ˆè¦ä¿è¯èåˆçš„ç‰¹å¾å›¾ä¹‹é—´çš„å°ºåº¦å…³ç³»æ˜¯2å€çš„å…³ç³»,ä¸€èˆ¬backboneç‰¹å¾æå–ç½‘ç»œ,æ¯ä¸€å±‚çš„è¾“å‡ºç‰¹å¾å›¾ä¹Ÿæ»¡è¶³è¿™ä¸ªå…³ç³»,æ¯”å¦‚

`c1xHxW ->c1x(H/2)x(W/2)`,è¿™äº›ç‰¹å¾å›¾ç»è¿‡ä¸€ä¸ª`1x1`å·ç§¯è°ƒæ•´äººé€šé“æ•°ä¸ºç›¸åŒ,FPNæºç ä¸­`1x1`å·ç§¯æ ¸ä¸ªæ•°ä¸º256,è¿™æ ·ä¸åŒå°ºåº¦ä¹‹é—´çš„ç‰¹å¾å›¾å°±å¯ä»¥èåˆäº†,

å…ˆæŠŠå°çš„ç‰¹å¾å›¾ä¸Šé‡‡æ ·(é‡‡ç”¨æœ€è¿‘é‚»æ’å€¼æ³•)åˆ°å’Œå¤§çš„ç‰¹å¾å›¾ç›¸åŒçš„å°ºåº¦,ç„¶åå†å’Œå¤§çš„ç‰¹å¾å›¾ç›¸åŠ ;

+ **åº•å±‚feature mapä½ç½®ä¿¡æ¯å¤šä½†è¯­ä¹‰ä¿¡æ¯å°‘ï¼ŒFPNä¸ºå…¶å¢å¼ºäº†è¯­ä¹‰ä¿¡æ¯ï¼Œæå‡äº†å¯¹å°ç‰©ä½“çš„æ£€æµ‹æ•ˆæœ**ï¼›

+ æå‡æ£€æµ‹ç²¾åº¦ï¼ŒåŒ…æ‹¬åŠ å¼ºå¯¹å°ç‰©ä½“çš„æ£€æµ‹æ•ˆæœå’Œå¯¹å¤§ç‰©ä½“çš„æ£€æµ‹æ•ˆæœã€‚**ä¸€èˆ¬æ¥è¯´ï¼Œé¡¶å±‚feature mapæ˜¯æ£€æµ‹å¤§ç‰©ä½“çš„å…³é”®ï¼Œå› ä¸ºå®¹æ˜“æ¡†å‡ºå¤§ç‰©ä½“ï¼›åº•å±‚feature mapæ˜¯æ£€æµ‹å°ç‰©ä½“çš„å…³é”®ï¼Œå› ä¸ºå®¹æ˜“æ¡†å‡ºå°ç‰©ä½“ï¼›**

+ **FPNåªæ˜¯ç»™åº•å±‚featue mapæä¾›äº†ç¦åˆ©ï¼Œæ‰€ä»¥ä»…ä»…æå‡äº†å¯¹å°ç‰©ä½“çš„æ£€æµ‹æ•ˆæœ**ï¼›

+ é¡¶å±‚feature mapè¯­ä¹‰ä¿¡æ¯å¤šä½†ä½ç½®ä¿¡æ¯å°‘ï¼Œè¿˜æ˜¯å¯¹æ£€æµ‹å¤§ç‰©ä½“ä¸åˆ©ã€‚åæ¥è€…PANåœ¨FPNçš„åŸºç¡€ä¸Šå†åŠ äº†ä¸€ä¸ªbottom-upæ–¹å‘çš„å¢å¼ºï¼Œä½¿å¾—é¡¶å±‚feature mapä¹Ÿå¯ä»¥äº«å—åˆ°åº•å±‚å¸¦æ¥çš„ä¸°å¯Œçš„ä½ç½®ä¿¡æ¯ï¼Œä»è€ŒæŠŠå¤§ç‰©ä½“çš„æ£€æµ‹æ•ˆæœä¹Ÿæä¸Šå»äº†

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/20180612110548362" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" style="zoom: 67%;" />

+ **å…·ä½“ä¾‹å­**

  backboneä½¿ç”¨resnet50

  ![image-20210708232158488](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210708232158488.png)

C5å¾—åˆ°çš„ç‰¹å¾å›¾ä¸‹é‡‡æ ·å’ŒC4å¾—åˆ°çš„ç‰¹å¾å›¾èåˆ,å†æŠŠèåˆå¾—åˆ°çš„ç‰¹å¾å›¾ä¸‹é‡‡æ ·å’ŒC3èåˆ,ä¾æ¬¡ç±»æ¨,

èåˆä¹‹å,åœ¨ç»è¿‡ä¸€ä¸ª`3x3`å·ç§¯,å¾—åˆ°`P2~P5`,å†å¯¹P5ä¸‹é‡‡æ ·,å¾—åˆ°P6

åœ¨FPN+ Faster RCNN ä¸­,RPNä½¿ç”¨`P2~P6`é¢„æµ‹proposals,æŠŠå¾—åˆ°çš„proposalsæŠ•å½±åˆ°`P2~P5`ä¸Š,ä½¿ç”¨`P2~P5`è¿›è¡Œæ£€æµ‹;

æŠ•å½±å…¬å¼:

![image-20210708234503698](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210708234503698.png)

å¯¹äº`P2~P6`è¿™5ä¸ªé¢„æµ‹ç‰¹å¾å±‚,æ¯ä¸€å±‚å¯¹åº”ä¸åŒçš„å°ºåº¦:

![image-20210708234140184](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210708234140184.png)

å¯¹äºP2,å®ƒæ˜¯æ¯”è¾ƒåº•å±‚çš„ç‰¹å¾,å«æœ‰æ›´å¤šçš„åº•å±‚çš„ä¿¡æ¯,ä½ç½®ä¿¡æ¯æ¯”è¾ƒä¸°å¯Œ,æ¯”è¾ƒé€‚åˆé¢„æµ‹å°ç›®æ ‡,æ‰€ä»¥ç”Ÿæˆé¢ç§¯ä¸º32x32çš„anchors

#### 2.2 One Stage

##### 1.SSD

**SSD:Single Shot MultiBox Detector**

+ **Faster RCNN**

  ![image-20210707150218416](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707150218416.png)

  ![image-20210707093526442](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210707093526442.png)



â€‹	Faster RCNNå­˜åœ¨ä¸¤ä¸ªé—®é¢˜:

 1. å¯¹å°ç›®æ ‡æ£€æµ‹æ•ˆæœå¾ˆå·®

    åªä½¿ç”¨äº†ä¸€ä¸ªfeature map,è¿™ä¸ªfeature mapæ¯”è¾ƒé«˜å±‚,ç»†èŠ‚ä¿¡æ¯å¾ˆå°‘

 2. æ¨¡å‹å¤§,æ£€æµ‹é€Ÿåº¦è¾ƒæ…¢

    two-stageçš„é€šç—…

+ **SSD ç½‘ç»œç»“æ„**

  ![image-20210801153331488](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801153331488.png)

  + è¾“å…¥æ˜¯300x300x3

  + åœ¨ä¸åŒç‰¹å¾å°ºåº¦ä¸Šé¢„æµ‹ä¸åŒå°ºåº¦çš„ç›®æ ‡

    å¤§å°ºåº¦ç‰¹å¾å›¾,ç»†èŠ‚ä¿¡æ¯æ¯”è¾ƒå¤š,é¢„æµ‹å°ç›®æ ‡,å°ç‰¹å¾å›¾é¢„æµ‹å¤§ç›®æ ‡

  + ![image-20210801154118963](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801154118963.png)

  + å°ä¾‹å­

    ![image-20210801154227267](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801154227267.png)

    â€‹	8x8:é¢„æµ‹çŒ«

    â€‹	4x4:é¢„æµ‹ç‹—

+ **default box**

  ![image-20210801160445998](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801160445998.png)

  ![image-20210801160526035](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801160526035.png)

  ![image-20210801160658489](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801160658489.png)

  6ä¸ªé¢„æµ‹ç‰¹å¾å±‚æ‰€æœ‰çš„default boxå°±å¯ä»¥åŸºæœ¬ä¸ŠæŠŠæ‰€æœ‰çš„objectç»™è¦†ç›–

+ **predictorçš„å®ç°**

  åœ¨æ¯ä¸€ä¸ªé¢„æµ‹ç‰¹å¾ç‰¹å¾å±‚ä½¿ç”¨ä¸€ä¸ª3x3çš„å·ç§¯æ ¸è¿›è¡Œé¢„æµ‹æ¯ä¸€ä¸ªä½ç½®çš„ç›®æ ‡ç±»åˆ«åˆ†æ•°å’Œè¾¹ç•Œæ¡†å›å½’å‚æ•°

  é¢„æµ‹ç‰¹å¾å±‚çš„æ¯ä¸€ä¸ªä½ç½®å¯¹åº”kä¸ªdefault box,é¢„æµ‹(c+4)ä¸ªä¿¡æ¯,æ‰€ä»¥éœ€è¦$(c+4)k$ä¸ªå·ç§¯æ ¸,c:åŒ…æ‹¬èƒŒæ™¯ç±»

  å¯¹äºmxnçš„feature map,è¾“å‡ºä¸º$m\times n \times k\times (c+4)$

  ![image-20210801162559516](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801162559516.png)

+ **æ­£è´Ÿæ ·æœ¬çš„é€‰æ‹©**

  + **æ­£æ ·æœ¬**

    ![image-20210801164250678](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801164250678.png)

    + ä¸gt boxçš„IoUæœ€å¤§çš„default box
    + å¯¹äºä¸€ä¸ªdefault box,åªè¦ä¸ä¸€ä¸ªgt boxçš„IoUå¤§äº0.5,å°±è®¤ä¸ºæ˜¯æ­£æ ·æœ¬

  + **è´Ÿæ ·æœ¬**

    ![image-20210801164416760](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801164416760.png)

    8732çš„default boxä¸­å…¶å®æ­£æ ·æœ¬ä¸ªæ•°ä¼šå¾ˆå°‘,å¦‚æœç›´æ¥å°†æ­£æ ·æœ¬ä»¥å¤–çš„æ‰€æœ‰æ ·æœ¬è®¾ä¸ºè´Ÿæ ·æœ¬,é‚£ä¹ˆå°±ä¼šå¯¼è‡´å¾ˆä¸¥é‡çš„æ ·æœ¬ä¸å‡è¡¡é—®é¢˜

    æ ¹æ®ç½‘ç»œè®¡ç®—çš„confidence loss,å°†æ’åœ¨å‰é¢çš„default boxè®¾ä¸ºè´Ÿæ ·æœ¬,è¿™å®é™…ä¸Šæ˜¯éš¾ä¾‹æŒ–æ˜çš„è¿‡ç¨‹,

    æœ€ç»ˆæ­£è´Ÿæ ·æœ¬æ¯”ä¾‹1:3

+ **æŸå¤±è®¡ç®—**

  ![image-20210801165221401](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801165221401.png)

  ![image-20210801165344192](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801165344192.png)

  ![image-20210801165417424](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210801165417424.png)







### 3. 3D Object Detection

ä½¿ç”¨æ·±åº¦å­¦ä¹ è¿›è¡Œ3Dç›®æ ‡æ£€æµ‹çš„å‡ ç§æ€è·¯

![image-20210718224755230](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210718224755230.png)

+ å¤šè§†è§’æŠ•å½±,å¾—åˆ°å¾ˆå¤š2Då›¾åƒ,ä½¿ç”¨2Dæ–¹æ³•å¤„ç†
+ Point-wise (pointnet)
+ voxel-based
+ pointcloud & image fusion

#### 1.MV3D

Multi-View 3D Object Detection Network for Autonomous Driving[CVPR 2017]



![image-20210708211158745](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210708211158745.png)

å› ä¸ºé›·è¾¾çš„ä¿¯è§†å›¾BEVå¯ä»¥æœ‰æ•ˆé˜²æ­¢é®æŒ¡,æ‰€ä»¥MV3Dé¦–å…ˆåœ¨BEVä¸Šä½¿ç”¨RPNå¾—åˆ°ä¸€äº›3Då€™é€‰æ¡†,ç„¶åæŠŠè¿™äº›å€™é€‰æ¡†æŠ•å½±åˆ°é›·è¾¾å‰è§†å›¾å’ŒRGBå›¾åƒä¸Š,å†ç»è¿‡ROI poolingå¾—åˆ°å°ºåº¦ç›¸åŒçš„feature map,å†æŠŠå®ƒä»¬è¿æ¥åœ¨ä¸€èµ·åšä¸€ä¸ªèåˆ,ç»è¿‡ç¥ç»ç½‘ç»œ,å¯¹è¿™äº›æ¡†è¿›è¡Œåˆ†ç±»å’Œå›å½’;

æ€»çš„æ¥è¯´,**MV3D = Multi-View Projection + Faster RCNN**

#### 2.VoxelNet

VoxelNet: End-to-End Learning for Point Cloud Based 3D Object Detection

![image-20210710153537326](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210710153537326.png)

ä¸Šå›¾æ˜¯VoxelNetçš„ç½‘ç»œç»“æ„å›¾,ç”±ä¸‰ä¸ªæ¨¡å—ç»„æˆ:

**Feature Learning Network + Convolutional Middle Layers + RPN**

+ **Feature Learning Network**

  1. **Build voxel grid  and Random Sampling** 

     å»ºç«‹å®Œvoxel grid å, 10x400x352

     å¯¹æ¯ä¸€ä¸ªvoxelä¸­çš„ç‚¹è¿›è¡Œé‡‡æ ·,å¦‚æœç‚¹æ•°å¤§äºT,éšæœºé‡‡æ ·åˆ°Tä¸ªç‚¹,å¦‚æœç‚¹æ•°å°äºT,å¡«0æˆ–è€…å¤åˆ¶å…¶ä¸­çš„ç‚¹åˆ°Tä¸ª

  2. **Stacked VFE**

     ![image-20210710161111879](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210710161111879.png)

     å¯¹äºæ¯ä¸€ä¸ªvoxel,ä½¿ç”¨ä¸¤ä¸ªç®€åŒ–ç‰ˆçš„PointNetçš„ä¸²è”æå–ç‰¹å¾(å»æ‰äº†T-Net)

     VFEçš„è¾“å…¥7xT    7è¡¨ç¤ºç‚¹çš„7ä¸ªç‰¹å¾$V_{in}=\{\hat{p_i}=[x_i,y_i,z_i,r_i,x_i-v_x,y_i-v_y,z_i-v_z]^t\in R^7\}_{i=1...t}$

     <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210624101039192.png" alt="image-20210624101039192" style="zoom:80%;" />

     å…ˆç»è¿‡ä¸€ä¸ªFCNæå–ç‰¹å¾,max-poolingä¹‹åå¤åˆ¶nä»½å’Œä¹‹å‰FCNçš„è¾“å‡ºæ‹¼æ¥åœ¨ä¸€èµ·,å†é€šè¿‡ä¸€ä¸ªFCN+MaxPoolingå¾—åˆ°è¿™ä¸ªvoxelæœ€ç»ˆçš„ç‰¹å¾,

     è¿™æ ·å°±æŠŠé€ç‚¹çš„ç‰¹å¾å’Œå±€éƒ¨çš„èšåˆç‰¹å¾ç»„åˆåœ¨äº†ä¸€èµ·

     ä¸€ä¸ªä¾‹å­:

     ![image-20210710162436943](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210710162436943.png)

     è¾“å…¥æ˜¯:`7xTx10x400x352`

     è¾“å‡º:`1x128x10x400x352`

  3. **Sparse Tensor Representation**

     ![image-20210710164535039](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210710164535039.png)

     + `10x400x352`voxels,ä¸å¯èƒ½éƒ½è·‘VFE,éå¸¸è€—æ—¶,å ç”¨å†…å­˜,è€Œä¸”90%çš„voxeléƒ½æ˜¯ç©ºçš„,åœ¨voxelNetä¸­æŠŠè¿™äº›éç©ºvoxelè¡¨ç¤ºä¸ºç¨€ç–å¼ é‡çš„å½¢å¼;

     + é¦–å…ˆå»ºç«‹ä¸¤ä¸ªå®¹å™¨

       + K:ä¸€å¸§ç‚¹äº‘æœ€å¤šKä¸ªvoxel

       + T:æ¯ä¸ªvoxelæœ‰Tä¸ªç‚¹

       + 7:æ¯ä¸ªç‚¹ç”¨7ä¸ªå±æ€§è¡¨ç¤º

       + æ‰€ä»¥ä¸Šå›¾ç¬¬ä¸€ä¸ªå¤§é•¿æ–¹ä½“`KxTx7`çš„æ¯ä¸€å±‚è¡¨ç¤ºä¸€ä¸ªvoxel,è¿™ä¸ªå¤§çš„é•¿æ–¹ä½“

         æ˜¯ç¬¬ä¸€ä¸ªå®¹å™¨(1)

         å®ƒæ­£ä¸‹æ–¹çš„`1x3xk`å­˜å‚¨æ¯ä¸€ä¸ªéç©ºvoxelçš„åæ ‡,æ˜¯ç¬¬äºŒä¸ªå®¹å™¨(2)

     + ç„¶åä½¿ç”¨ä¸€ä¸ªhash_map,å®ƒçš„é”®æ˜¯voxelåæ ‡,å€¼æ˜¯points

       éå†æ¯ä¸€ä¸ªç‚¹,è®¡ç®—å®ƒçš„voxelåæ ‡ `vx,vy,vz`  å¹¶ä½¿ç”¨hashå‡½æ•°æŠŠåæ ‡è½¬æ¢ä¸ºå°äºKçš„ä¸€ä¸ªæ•°`k=hasn(Vx,Vy,Vz)`

       å¦‚æœè¿™ä¸ªåæ ‡å¯¹åº”çš„hashå·²ç»å­˜åœ¨è¿‡äº†,è€Œä¸”å…¶ä¸­çš„ç‚¹æ•°<T,å°±æŠŠå®ƒæ’å…¥è¿™ä¸ªvoxel,å¦‚æœç‚¹æ•°>T,å°±å¿½ç•¥

       å¦‚æœè¿™ä¸ªåæ ‡ä¸å­˜åœ¨,å°±æ–°å»ºä¸€ä¸ªvoxel,å¹¶æŠŠè¿™ä¸ªç‚¹æ’å…¥åˆ°hash_mapä¸­

     + åœ¨ç¬¬ä¸€ä¸ªå®¹å™¨ä¸­è¿›è¡ŒVFEs,ç»è¿‡VFEså,æ¯ä¸€ä¸ªvoxelå˜æˆäº†ä¸€ä¸ª1xCçš„ç‰¹å¾å‘é‡,`Kx128`

     + ç‰¹å¾æå–å®Œæˆå,å†æŠŠå®¹å™¨1  æŠ•å½±å› åŸå§‹çš„voxel grid,å¯¹äºæ²¡æœ‰æŠ•å½±åˆ°çš„voxel grid (ç©ºçš„voxel)è®¾ä¸º0

       `->128x10x400x352`åªæœ‰è¿™æ ·,æ‰èƒ½ä½¿ç”¨3D CNN

+ **Convolutional Middle Layers**

  + input:`128x10x400x352`

  + 3D CNN

    + ä¸€å…±æœ‰**ä¸‰å±‚ä¸‰ç»´å·ç§¯**
    + `Conv3D(in_channels,out_channels,kerne-size,strides,padding)`
    + `#1 Conv3D(128,64,3,(2,1,1),(1,1,1))`
    + `#2 Conv3D(64,64,3,(1,1,1),(0,1,1))`
    + `#3 Conv3D(64,64,3,(2,1,1),(1,1,1))`

    å·ç§¯è¾“å‡ºå°ºåº¦çš„è®¡ç®—å…¬å¼ä¸º:

    ![image-20210622213643680](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210622213643680.png)

    ä¸‰å±‚å·ç§¯å:`128x10x400x352 -> 64x2x400x352`
    
    reshapeæˆ`64x2x400x352 -> 128x400x352`
    
    ==**this is image-like feature map!**==
  
+ **RPN**

   æœ€ååˆ†åˆ«é€šè¿‡ä¸€ä¸ª1x1çš„å·ç§¯,ä¸€ä¸ªåšåˆ†ç±»,ä¸€ä¸ªåšå›å½’

   ![image-20210718135608017](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210718135608017.png)

ä¸å›¾åƒä¸­çš„RPNåŠŸèƒ½ç›¸åŒ,å¾—åˆ°2kä¸ªåˆ†ç±»åˆ†æ•°,7kä¸ª3D boxçš„åç§»é‡

+ ä¸€ä¸ªRPNå¯¹åº”ä¸€ä¸ªç±»åˆ«
+ RPNåªé¢„æµ‹anchor boxæ˜¯å¦æ˜¯ç‰©ä½“

k=2,æ¯ä¸€ä¸ªç‚¹å¯¹åº”2ä¸ªanchor

ä¸€ä¸ª0åº¦ä¸€ä¸ª90åº¦

7:`x,y,z,dx,dy,dz,heading`

+ ==RPNä¸­ä½¿ç”¨çš„feature map æ€æ ·æ˜ å°„å›åŸå§‹voxel grid,å¾—åˆ°anchor box?==

  

+ **Loss Function**

  + ![image-20210718210100752](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210718210100752.png)

    å¸¸è§„çš„RPNæŸå¤±

  + ç¡®å®šæ­£è´Ÿæ ·æœ¬
    + æ­£æ ·æœ¬:IoU>0.5,æˆ–è€…ä¸GT çš„ IoUæœ€å¤§çš„
    + è´Ÿæ ·æœ¬:IoU<0.35
    + IoUåœ¨0.35 0.5 ä¹‹é—´ çš„ä¸è€ƒè™‘

  + å›å½’æ¡†æŸå¤±
    + ä¸å›¾åƒä¸­ç±»ä¼¼,è®¡ç®—åç§»é‡
    + ä¸‹å›¾æœ‰äº›åœ°æ–¹åº”è¯¥æ˜¯é”™äº†,$u^*$åº”è¯¥æ˜¯anchorå’Œgtçš„çœŸå®åç§»é‡,$u$æ˜¯é¢„æµ‹çš„åç§»é‡
    + ![image-20210718144141391](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210718144141391.png)



+ **ç‚¹äº‘æ•°æ®å¢å¼ºæ–¹æ³•**

  + Zè½´æ—‹è½¬ä¸€ä¸ªè§’åº¦$\theta$

    + ä¸€èˆ¬$\theta\in[-\pi/4,\pi/4]$,ä¸ä¼šæ—‹è½¬å¤ªå¤§,å› ä¸ºå¤ªå¤§ä¼šä¸çœŸå®

      <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210718210934820.png" alt="image-20210718210934820" style="zoom:67%;" />

  + å°ºåº¦ç¼©æ”¾så€,$s\in[0.95,1.05]$

  + éšæœºæ—‹è½¬å¹³ç§»æ¯ä¸€ä¸ªground truth box

    ![image-20210718211623224](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210718211623224.png)

    + åŒæ ·,ä¹Ÿä¸èƒ½æ—‹è½¬å¹³ç§»å¤ªå¤š,ä¼šä¸çœŸå®
    + å¦‚æœä¸¤ä¸ªboxå‘ç”Ÿç¢°æ’,æ”¾å¼ƒè¿™ä¸ªå¢å¼º

+ VoxelNet æ€§èƒ½è¡¨ç°

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210718211911136.png" alt="image-20210718211911136" style="zoom:67%;" />

#### 3.PointPillars

![image-20210718212424262](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210718212424262.png)

PointPillarsä»¥ç‚¹äº‘ä¸ºè¾“å…¥,ä¼°è®¡è½¦è¾†,è¡Œäºº,éª‘è¡Œè€…çš„3D box,ç½‘ç»œä¸»è¦åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µ:

(1)ä¸€ä¸ªç‰¹å¾ç¼–ç ç½‘ç»œ,å°†ç‚¹äº‘è½¬åŒ–ä¸º2Dä¼ªå›¾åƒpseudo- image;

(2)ä¸€ä¸ª2Då·ç§¯backboneå°†(1)ä¸­çš„ä¼ªå›¾åƒè½¬åŒ–ä¸ºé«˜çº§çš„feature map;

(3)ä¸€ä¸ªæ£€æµ‹å¤´SSD dection head,æ£€æµ‹å¹¶å›å½’å‡º3Dæ¡†

+ **Pointcloud to Pseudo-Image**

  To apply a 2D convolutional architecture, we first convert the point cloud to a pseudo-image.

  + **ç¬¬ä¸€æ­¥**,å°†ç‚¹äº‘æŠ•å½±åˆ°x-yå¹³é¢,ç­‰é—´è·æ …æ ¼åŒ–,å¾—åˆ°ä¸€ä¸ªpillarçš„é›†åˆ
  + **ç¬¬äºŒæ­¥**,å¯¹äºæ¯ä¸€ä¸ªpillarå†…çš„ç‚¹,è¿›è¡Œå±æ€§å¢å¼º,å¢åŠ $r, x_c, y_c, z_c, x_p, y_p$,r:åå°„ç‡,ä¸‹æ ‡cè¡¨ç¤ºåˆ°pillarä¸­æ‰€æœ‰ç‚¹çš„å‡ ä½•ä¸­å¿ƒçš„åç§»,ä¸‹æ ‡pè¡¨ç¤ºåˆ°pillarçš„xyä¸­å¿ƒçš„åç§»,æœ€åå’Œx,y,zåŠ èµ·æ¥èƒ½å¾—åˆ°9ç»´çš„ç‚¹,æ¯”voxelnetå¤šäº†ä¸¤ä¸ª:$x_p, y_p$

  + **ç¬¬ä¸‰æ­¥**,ç”±äºç‚¹äº‘çš„ç¨€ç–æ€§,å¤§å¤šæ•°pillarséƒ½æ˜¯ç©ºçš„,éç©ºçš„pillarä¸­é€šå¸¸ä¹Ÿåªæœ‰å‡ ä¸ªç‚¹,==è¿™ç§ç¨€ç–æ€§å¾—åˆ°äº†åˆ©ç”¨==:
    + æ¯ä¸€å¸§æ•°æ®,æœ€å¤šæå–$P$ä¸ªéç©ºPillar
    + æ¯ä¸€ä¸ªPillarå†…æœ€å¤šæœ‰$N$ä¸ªç‚¹
    + å¯¹äºè¶…å‡ºçš„,ä½¿ç”¨éšæœºé‡‡æ ·,å¯¹äºä¸å¤Ÿçš„,ä½¿ç”¨0å»padding
    + æœ€åå¾—åˆ°ä¸€ä¸ªè‡´å¯†çš„tensor$(D,P,N)$
  + **ç¬¬å››æ­¥**,ç”¨ä¸€ä¸ªç®€åŒ–ç‰ˆçš„PointNet:FC+BN+ReLUæå–æ¯ä¸€ä¸ªç‚¹çš„ç‰¹å¾,å¾—åˆ°$(C,P,N)$çš„tensor,è¿™æ˜¯point-wiseç‰¹å¾
  + **ç¬¬äº”æ­¥,**æœ€å¤§æ± åŒ–,å¾—åˆ°$(C,P)$çš„tensor,å¾—åˆ°pillar-wiseçš„ç‰¹å¾
  + **ç¬¬å…­æ­¥,**æœ€å,æ ¹æ®æ¯ä¸€ä¸ªpillarçš„index,æŠŠè¿™ä¸ª$(C,P$)å¤§çš„æ¯ä¸€åˆ—éƒ½æ”¾åˆ°$H*W$çš„æ …æ ¼ä¸Š,è¿™é‡Œçš„H,Wå°±æ˜¯ç¬¬ä¸€æ­¥æ …æ ¼åŒ–åçš„æ …æ ¼mapå°ºå¯¸å¤§å°,Cæ˜¯ç‰¹å¾ç»´æ•°,è¿™å°±å½¢æˆäº†ä¸€å¼ ä¼ªå›¾åƒ;

+ **Backbone**

  ![image-20210718215404009](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210718215404009.png)

  + æœ‰ä¸¤ä¸ªå­ç½‘ç»œæ„æœ‰ä¸¤ä¸ªå­ç½‘ç»œæ„æˆ:

    ä¸€ä¸ªè‡ªä¸Šè€Œä¸‹çš„ç½‘ç»œä»¥è¶Šæ¥è¶Šå°çš„ç©ºé—´åˆ†è¾¨ç‡äº§ç”Ÿç‰¹å¾ï¼Œå¦ä¸€ä¸ªç½‘ç»œå¯¹è‡ªä¸Šè€Œä¸‹çš„ç‰¹å¾è¿›è¡Œä¸Šé‡‡æ ·å’Œè¿æ¥.

+ **Detection Head SSD**

  ![image-20210718215651398](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210718215651398.png)



+ **Loss function**

  ![image-20210718220143686](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210718220143686.png)

  + $L_{loc}$ å›å½’æŸå¤±

    ![image-20210718221045362](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210718221045362.png)

  

![image-20210718221114744](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210718221114744.png)

â€‹		**SmoothL1:**

â€‹		<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210718221246977.png" alt="image-20210718221246977"  />

â€‹		![image-20210718221400163](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210718221400163.png)


  + $L_{dir}$ æœå‘æŸå¤±


      + åœ¨å›å½’æŸå¤±ä¸­,ä½¿ç”¨sinå‡½æ•°,ä¸èƒ½åŒºåˆ†180åº¦çš„ç¿»è½¬
      + æŠŠæœå‘0åˆ°360åº¦ç¦»æ•£åŒ–æˆbins,ä½¿ç”¨softmaxåˆ†ç±»å±äºå“ªä¸€ä¸ªbin
      + æ¯”å¦‚è¯´,åˆ†æˆ4ä¸ªbins,[0, 90], [90, 180], [180, 270], [270, 360]

+ $L_{cls}$åˆ†ç±»æŸå¤±


  + ä½¿ç”¨focal loss,å¯ä»¥ä¸€å®šç¨‹åº¦è§£å†³æ ·æœ¬ä¸å‡è¡¡çš„é—®é¢˜

  + å¼•å‡º:

    + æ£€æµ‹è¡Œäºº,ä¸€å¼ å›¾ç‰‡ä¸­æœ‰ä¸€ä¸ªè¡Œäºº

    + ç½‘ç»œè¾“å‡ºäº†100ä¸ªæ¡†

      + 99ä¸ªæ¡†æ˜¯èƒŒæ™¯æ¡†,èƒŒæ™¯çš„æ¦‚ç‡æ˜¯0.6
      + 1ä¸ªæ¡†æ˜¯è¡Œäºº,è¡Œäººçš„æ¦‚ç‡æ˜¯0.2

    + **äº¤å‰ç†µæŸå¤±**ä¸º:

      ![image-20210718223849343](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210718223849343.png)

      æŸå¤±å‡½æ•°å®Œå…¨è¢«æ­£ç¡®åˆ†ç±»çš„èƒŒæ™¯ä¸»å¯¼äº†,æ¢¯åº¦ä¸‹é™å,èƒŒæ™¯çš„æ¦‚ç‡åˆæå‡äº†,è¿™æ ·å¯¹äºæ•°é‡å°‘çš„æ ·æœ¬,è™½ç„¶å®ƒåˆ†é”™äº†,æ¦‚ç‡åªæœ‰0.2,ä½†æ˜¯ç½‘ç»œä¹Ÿä¸ä¼šæœç€æé«˜å®ƒçš„æ–¹å‘è®­ç»ƒ,å› ä¸ºå¤§éƒ¨åˆ†æ˜¯è´Ÿæ ·æœ¬,éƒ½åˆ†å¯¹äº†,æŸå¤±å‡½æ•°æ¥è¿‘0 

    + **ç®€å•æ”¹åŠ¨ä¸€ä¸‹,è®©æŸå¤±å‡½æ•°æ›´åŠ å…³æ³¨åˆ†ç±»é”™è¯¯çš„ç±»åˆ«**

      å¯¹äº$p_t>0.5$çš„,åˆ†ç±»æ•ˆæœå·²ç»å¾ˆå¥½äº†,å°±é™ä½å®ƒçš„ç›¸å¯¹æŸå¤±

      å¯¹äº$p_t<0.5$çš„,åˆ†ç±»æ•ˆæœä¸æ˜¯å¾ˆå¥½äº†,å°±å¢åŠ å®ƒåœ¨æŸå¤±å‡½æ•°ä¸­çš„æ¯”é‡

      ![image-20210718224630883](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210718224630883.png)



â€‹				æ”¹åŠ¨ä¹‹å,åˆ†ç±»é”™è¯¯çš„ç±»åˆ«å çš„æ¯”é‡å‡é«˜å¾ˆå¤š

#### 4.PointRCNN








































## class 7 Feature Detection

**ç‰¹å¾ç‚¹æå–->ç‰¹å¾æè¿°**

### 1.Introduction

ä»¥å›¾åƒä¸ºä¾‹

+ **Feature Detection:**

  æ‰¾åˆ°å›¾ç‰‡/ç‚¹äº‘ä¸­çš„ç‰¹å¾ç‚¹/åŒºåŸŸ

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210701145545016.png" alt="image-20210701145545016" style="zoom:80%;" />

+ ==**ç‰¹å¾ç‚¹çš„åº”ç”¨**==

+ **ç”¨äºç‰¹å¾æè¿°å’Œç‰¹å¾åŒ¹é…**

  **Feature Detection:**ç¡®è®¤å…´è¶£ç‚¹

  **Feature Description:**æ£€æµ‹åˆ°ç‰¹å¾ç‚¹ä¹‹å,åœ¨ç‰¹å¾ç‚¹é™„è¿‘å¯ä»¥æå–**ç‰¹å¾å‘é‡**å»æè¿°å®ƒ

  **Feature Matching:**ä½¿ç”¨æå–åˆ°çš„ç‰¹å¾å‘é‡å¯ä»¥ç¡®è®¤ç‰¹å¾ç‚¹ä¹‹é—´çš„å¯¹åº”å…³ç³»

  ä¸‹é¢å°±æ˜¯ä¸€ä¸ªå›¾åƒæ‹¼æ¥çš„ä¾‹å­:
  
  ![image-20210806145251686](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210806145251686.png)

![image-20210701145929698](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210701145929698.png)

![image-20210701145953268](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210701145953268.png)

+ **SLAM**

  è§†è§‰SLAMå»ºå‡ºçš„åœ°å›¾é€šå¸¸æ˜¯ç¨€ç–çš„**ç‰¹å¾ç‚¹åœ°å›¾**

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210701150141339.png" alt="image-20210701150141339"  />

+ **3Dç‚¹äº‘ç‰¹å¾ç‚¹ç¤ºæ„å›¾**

  æ‰¾åˆ°ç‰¹å¾ç‚¹,ç„¶åå»åŒ¹é…

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210701150307262.png" alt="image-20210701150307262" style="zoom:80%;" />

+ **ç‚¹äº‘ç‰¹å¾ç‚¹çš„åº”ç”¨----ç‚¹äº‘é…å‡†**

  ç‚¹äº‘é…å‡†ä»»åŠ¡:

  + **å¯»æ‰¾ä¸€ä¸ªè½¬ç§»çŸ©é˜µå°†ä¸¤å¸§ç‚¹äº‘å¯¹é½åˆ°ä¸€èµ·**
  + **ä¸€ä¸ªè½¬ç§»çŸ©é˜µåŒ…æ‹¬**
    + æ—‹è½¬ R
    + å¹³ç§» T
  + **Method1 -- ICP**
    + éœ€è¦ä¸€ä¸ªåˆå§‹ä½å§¿
    + éœ€è¦ä¸¤å¸§ç‚¹äº‘æ¯”è¾ƒå¤§çš„é‡åˆç‡
  + **Method2 -- ç‰¹å¾ç‚¹æ£€æµ‹å’ŒåŒ¹é…**
    + ä¸éœ€è¦åˆå§‹ä½å§¿
    + ä¸éœ€è¦è¾ƒé«˜çš„é‡åˆç‡
    + åœ¨class9ä¸­ä¼šè¯¦ç»†è®²è§£ç‚¹äº‘åŒ¹é…

+ **ç‚¹äº‘ç‰¹å¾ç‚¹æå–çš„æ–¹æ³•**

  + å€Ÿé‰´å›¾åƒæå–ç‰¹å¾ç‚¹çš„æ–¹æ³•
    + Harris
    + SUSAN (Small Univalue Segment Assimilating Nucleus)
    + SIFT (Scale-Invariant Feature Transform)
  + ç›´æ¥ä»3Då½¢çŠ¶å‡ºå‘
    + ISS (Intrinsic Shape Signatures)
  + æ·±åº¦å­¦ä¹ çš„æ–¹æ³•
    + ç”±äºç¼ºå°‘ç›¸å…³æ•°æ®é›†,ç›®å‰è¿˜å¾ˆå°‘

### 2.Harris2D Detector

è§’ç‚¹æ£€æµ‹

+ **Patch Matching**

  é¦–å…ˆè¯´ä¸€ä¸‹æ¨¡æ¿åŒ¹é…é—®é¢˜

  å¦‚ä¸‹å›¾æ‰€ç¤º,åœ¨å·¦è¾¹æ¡†å¤„ä¸€ä¸ªæ¨¡æ¿,åœ¨å³è¾¹è¿™å¹…å›¾ä¸­æ‰¾åˆ°å’Œç´«è‰²æ¡†ä¸­æœ€ç›¸ä¼¼çš„

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210701151950543.png" alt="image-20210701151950543" style="zoom:80%;" />

  + å¦‚æœéšä¾¿é€‰patchçš„è¯,åŒ¹é…èµ·æ¥å°±å¾ˆè‹¦éš¾:

    <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210701152254861.png" alt="image-20210701152254861" style="zoom:80%;" />

  + æ‰€ä»¥è¦å¯»æ‰¾ä¸€äº›æ¯”è¾ƒç‹¬ç‰¹çš„ç‚¹,åœ¨è¿™äº›ç‚¹ä¸Šé¢å–å‡ºpatchè¿›è¡ŒåŒ¹é…

    ![image-20210806150208978](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210806150208978.png)
    
    + è§’ç‚¹/äº¤ç•Œç‚¹æ˜¯æ¯”è¾ƒå¥½çš„é€‰æ‹©
    + é‚»åŸŸå†…å˜åŒ–å¾ˆå¤§
    + å¯¹è§†è§’å˜åŒ–ä¸æ•æ„Ÿ

+ **å¯¹äºè§’ç‚¹çš„ç›´è§‚æè¿°**

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210701152805623.png" alt="image-20210701152805623" style="zoom:80%;" />

  + flat:å¾€ä»»ä½•æ–¹å‘ç§»åŠ¨,patchå†…çš„å†…å®¹éƒ½ä¸å˜åŒ–
  + edge:å¾€ä¸€ä¸ªæ–¹å‘ç§»åŠ¨,pathæœ‰å˜åŒ–,ä½†æ˜¯å¦ä¸€ä¸ªæ–¹å‘(è¾¹çš„æ–¹å‘),patchå†…å®¹æ²¡æœ‰å˜åŒ–
  + corner:å¾€ä»»æ„æ–¹å‘ç§»åŠ¨,patchå†…å®¹éƒ½ä¼šå˜åŒ–
  
+ **Harris-æ•°å­¦æè¿°**

  + æ€æ ·ç”¨æ•°å­¦è¯­è¨€å»æè¿°,ç§»åŠ¨ä¸€ä¸ªpatchä¹‹å,å‘ç”Ÿçš„å˜åŒ–é‡å‘¢?

  + ç»™å®šä¸€å¼ è¾“å…¥å›¾ç‰‡$I$.ä¸€ä¸ªpatch $x,y\in \Omega$

  + åœ¨xå’Œyæ–¹å‘ä¸Šç§»åŠ¨è¿™ä¸ªpatch,[u,v],è®¡ç®—å¯¹åº”åƒç´ å€¼çš„å˜åŒ–å’Œ:

    ![image-20210806152908900](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210806152908900.png)

    ![image-20210806152943757](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210806152943757.png)

  + ç§»åŠ¨çš„è·ç¦»u,væ˜¯å›ºå®šçš„

  + æ€æ ·å»é€‰æ‹©u,vå‘¢?

  + è¶Šå°è¶Šå¥½,è¶Šå°å°±è¶Šæ¥è¿‘ä¸€ä¸ªåæ ‡çš„æ¢¯åº¦

+ **2D å‡½æ•° çš„ æ³°å‹’å±•å¼€**

  ![image-20210806162122053](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210806162122053.png)

+ **u,vè¶³å¤Ÿå°æ—¶å°†æ³°å‹’å±•å¼€ä»£å…¥**$E(u,v)$

  ![image-20210806162450549](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210806162450549.png)
  + $M$æ˜¯å›¾åƒæ¢¯åº¦çš„åæ–¹å·®çŸ©é˜µ

  + $I_x,I_y$è¡¨ç¤ºå›¾åƒ$I$åœ¨$(x_i,y_i)$å¯¹äºx,yçš„ä¸€é˜¶å¯¼æ•°

    $I_x=I(x+1,y)-I(x,y)$

    $I_y=I(x,y+1)-I(x,y)$

    å®šä¹‰$I_i=[I_{x_i},I_{y_i}]^T\in R^2$

    é‚£ä¹ˆåæ–¹å·®çŸ©é˜µ$M=\Sigma_i I_iI_i^T$

+ **æ€æ ·ä»åæ–¹å·®çŸ©é˜µä¸­è·å¾—å…³äºç‰¹å¾ç‚¹çš„ä¿¡æ¯å‘¢?**

  + Linear edge:x,yä¸­çš„ä¸€ä¸ªæ–¹å‘å¯¼æ•°ä¸º0å·¦å³,å¦ä¸€ä¸ªæ–¹å‘ä¼šæœ‰ä¸€ä¸ªå¾ˆå¤§çš„å€¼

  + flat:æ²¿x,yæ–¹å‘çš„æ¢¯åº¦éƒ½åœ¨0å·¦å³

  + corner:æ²¿x,yä¸¤ä¸ªæ–¹å‘éƒ½æœ‰å¾ˆå¤§çš„å€¼

  + ![image-20210806165618687](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210806165618687.png)

  + æŠŠæ¢¯åº¦$I_i=[I_{x_i},I_{y_i}]^T\in R^2$çœ‹åšä¸€ä¸ªä¸€ä¸ªç‚¹,æŠŠflat,linear edge,cornerä¸‰ç§æƒ…å†µå¯¹åº”çš„å¯¼æ•°ç”»å‡ºæ¥:

    ![image-20210806170113754](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210806170113754.png)

  å¯ä»¥é€šè¿‡**åæ–¹å·®çŸ©é˜µ**çš„ç‰¹å¾å€¼$\lambda_1,\lambda_2$,æŠŠè¿™ä¸‰ç§æƒ…å†µåŒºåˆ†å‡ºæ¥

  å› ä¸ºçŸ©é˜µå¯ä»¥è¡¨ç¤ºä¸ºä¸¤ä¸ªæ—‹è½¬åŠ ä¸€ä¸ªç¼©æ”¾(æ²¿å„ä¸ªè½´çš„ç¼©æ”¾)

  ![image-20210806171148191](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210806171148191.png)

  ![image-20210806171559724](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210806171559724.png)

  + å¯¹äºæ¯ä¸€ä¸ªä½ç½®,è®¡ç®—åæ–¹å·®çŸ©é˜µM,æ ¹æ®Mçš„ä¸¤ä¸ªç‰¹å¾å€¼æ¥åˆ¤æ–­æ˜¯å¦ä¸ºç‰¹å¾ç‚¹
  
+ **Response Function ğ‘…**

  ![image-20210806172216127](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210806172216127.png)

  æ ¹æ®ç‰¹å¾å€¼$\lambda_1,\lambda_2$è®¡ç®—å‡º**Response Function ğ‘…**,å¦‚æœ$R>th$,è¿™ä¸ªç‚¹å°±æ˜¯ç‰¹å¾ç‚¹

+ åšå›¾åƒç‰¹å¾ç‚¹æ£€æµ‹çš„ä¾‹å­

  + 1.è¾“å…¥å›¾åƒ

    ![image-20210806172620267](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210806172620267.png)

  + 2.å¯¹æ¯ä¸€ä¸ªä½ç½®è®¡ç®—åæ–¹å·®çŸ©é˜µ,å†è®¡ç®—response å‡½æ•°R,æ ¹æ®è¿™ä¸ªå€¼Rå¯è§†åŒ–

    ![image-20210806172735535](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210806172735535.png)

  + 3.æ ¹æ®é˜ˆå€¼ç¡®å®šå“ªäº›ç‚¹æ˜¯ç‰¹å¾ç‚¹

    ![image-20210806172830661](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210806172830661.png)

  + NMS,å¯¹äºRæœ€å¤§çš„å€¼æ‰€åœ¨çš„ä½ç½®,æŠŠè¿™ä¸ªä½ç½®ä¸€ä¸ªåŒºåŸŸå†…å…¶ä»–çš„ç‰¹å¾ç‚¹å»æ‰

    ![image-20210806173144313](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210806173144313.png)

  + æŠŠæœ€åç‰¹å¾ç‚¹ç»“æœæ˜¾ç¤ºåœ¨è¾“å…¥å›¾åƒä¸Š

    ![image-20210806173242836](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210806173242836.png)

### 2.Harris3D Detector

å›é¡¾å›¾åƒä¸­çš„Harrisåšæ³•,å°±æ˜¯è®¡ç®—ä¸€ä¸ªpatchå†…intensityçš„å˜åŒ–,è¿™ä¸ªå˜åŒ–å¯ä»¥ç”¨è¿™ä¸ªç‚¹ä½ç½®patchå†…çš„intensityå˜åŒ–å¾—åˆ°

![image-20210806203348277](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210806203348277.png)

å‡è®¾ç‚¹äº‘ä¸­çš„æ¯ä¸€ä¸ªç‚¹ä¹Ÿæœ‰intensity,å¯ä»¥å°†Harrisæ¨å¹¿åˆ°ä¸‰ç»´å—?

é¦–å…ˆéœ€è¦è§£å†³å‡ ä¸ªé—®é¢˜:

1. ==ç‚¹äº‘ä¸­çš„ç‚¹æ˜¯ç¦»æ•£çš„,æ€æ ·è®¡ç®—å„ä¸ªæ–¹å‘çš„ä¸€é˜¶å¯¼æ•°?==
2. æ€æ ·é€‰æ‹©ä¸€ä¸ªpatch?  ->   åŠå¾„å°äºr
3. æ€æ ·å–ç§»åŠ¨ä¸€ä¸ªpatch?  ->  [u,v,w]





### 3.ISS

Intrinsic Shape Signatures

+ ç‰¹å¾ç‚¹å°±æ˜¯é‚£äº›åœ¨å®ƒçš„é‚»åŸŸå†…ç‚¹çš„åˆ†å¸ƒå˜åŒ–æ¯”è¾ƒå¤§çš„ç‚¹

+ æè¿°ç‚¹åœ¨ä¸‰ä¸ªæ–¹å‘çš„åˆ†å¸ƒ,è‡ªç„¶æƒ³åˆ°==PCA==
+ å¯¹æ¯ä¸€ä¸ªç‚¹å‘¨å›´çš„ä¸€ä¸ªåŒºåŸŸå»ºç«‹ä¸€ä¸ªåæ–¹å·®çŸ©é˜µM,å¯¹Mè¿›è¡Œç‰¹å¾å€¼åˆ†è§£,æœ€å°ç‰¹å¾å€¼æœ€å¤Ÿå¤§,å°±è¯´æ˜æ˜¯ä¸€ä¸ªç‰¹å¾ç‚¹



+ **ISS-åŠ æƒåæ–¹å·®çŸ©é˜µ**

  ç»™å®šä¸€ä¸ªç‚¹$p_i$,è®¡ç®—å®ƒåŠå¾„$r$å†…çš„åŠ æƒåæ–¹å·®çŸ©é˜µ

  + ç¨€ç–åŒºåŸŸç‚¹çš„æƒé‡ è¦æ¯” ç¨ å¯†åŒºåŸŸç‚¹çš„æƒé‡å¤§

    ![image-20210807152556910](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210807152556910.png)

  + **Weighted covariance matrix:**

    ![image-20210807152634275](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210807152634275.png)

+ **ISS-å»æ‰å¹³é¢å’Œçº¿**

  + è®¡ç®—$Cov(p_i)$çš„ç‰¹å¾å€¼ ,æŒ‰ç…§é™åºæ’åº:$\lambda_i^1,\lambda_i^2,\lambda_i^3$

  + åˆ¤æ–­$p_i$æ˜¯å¦æ˜¯ç‰¹å¾ç‚¹:

    ![image-20210807153246496](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210807153246496.png)

    è¿™æ ·å°±æŠŠå¹³é¢ç‚¹å’Œçº¿æ®µç‚¹å»æ‰äº†:

    + å¹³é¢ç‚¹:$\lambda_i^1=\lambda_i^2>\lambda_i^3\approx0$  (åœ¨ä¸¤ä¸ªç‰¹å¾å‘é‡æ–¹å‘ä¸Šç‚¹çš„åˆ†å¸ƒå·®ä¸å¤šå¤§,å…¶ä»–ä¸€ä¸ªç‰¹å¾å‘é‡æ–¹å‘åŸºæœ¬ä¸Šæ²¡æœ‰ç‚¹)
    + ç›´çº¿ç‚¹:$\lambda_i^1>\lambda_i^2\approx\lambda_i^3\approx0$  (åœ¨ä¸¤ä¸ªç‰¹å¾å‘é‡æ–¹å‘ä¸Šå‡ ä¹æ²¡æœ‰ç‚¹,å…¶ä»–ä¸€ä¸ªç‰¹å¾å‘é‡æ–¹å‘ä¸Šæœ‰å¾ˆå¤šç‚¹)

    + æ‰€ä»¥ç‰¹å¾ç‚¹è¦ä¿è¯$\lambda_i^1>\lambda_i^2>\lambda_i^3$
    + åªè¦$\lambda_i^3$è¶³å¤Ÿå¤§,è¿™ä¸ªç‚¹å°±æ˜¯ä¸€ä¸ªç‰¹å¾ç‚¹

+ æœ€åå¯¹$\lambda_i^3$è¿›è¡Œä¸€ä¸ªNMS



==å› ä¸ºä¼ ç»Ÿæ–¹æ³•éƒ½æ˜¯éœ€è¦è®¡ç®—é‚»åŸŸå†…ç‚¹çš„åæ–¹å·®çŸ©é˜µ,é€‰æ‹©ç‰¹å¾å€¼æ¯”è¾ƒå¤§çš„ç‚¹,æ‰€ä»¥**å¯¹å™ªå£°æ¯”è¾ƒæ•æ„Ÿ**==

+ KITTIæ•°æ®ä¸­æå–ç‰¹å¾ç‚¹:

  å› ä¸ºæœ‰å¾ˆå¤šå™ªå£°ç‚¹,ç‚¹äº‘ä¸æ˜¯å¾ˆè§„åˆ™,æ‰€ä»¥æ•ˆæœä¸æ˜¯å¾ˆå¥½

  ![image-20210807154018454](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210807154018454.png)

+ ModelNetä¸­çš„æ•ˆæœ

  åœ¨è§„æ•´çš„ç‚¹äº‘ä¸­,ä¼ ç»Ÿç‰¹å¾ç‚¹æ£€æµ‹æ•ˆæœè¿˜å¯ä»¥æ¥æ”¶

  ![image-20210807154137620](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210807154137620.png)

+ ModelNet with Noise

  åŠ äº†å™ªå£°ä¹‹å,æ•ˆæœå°±ä¸å¥½äº†

![image-20210807154225186](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210807154225186.png)





## class 8 Feature Description

ä¼ ç»Ÿç‚¹äº‘çš„ç‰¹å¾æè¿°æ–¹æ³•ä¸»è¦å¯ä»¥åˆ†ä¸ºä¸¤ç±»:

+ **Histogram basedåŸºäºç›´æ–¹å›¾çš„**

  + Encode local geometric variations, put them into a histogramç¼–ç å±€éƒ¨çš„é›†åˆå˜åŒ–,æ”¾åˆ°ç›´æ–¹å›¾ä¸­

    ![image-20210701155610883](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210701155610883.png)

  + Methods

    + Point Feature Histogram (PFH)
    + Fast Point Feature Histogram (FPFH)

  + å¦‚ä¸Šå›¾ä¸­æ‰€ç¤ºçš„æ–¹æ³•,æŠŠç‚¹äº‘æŠ•å½±åˆ°ä¸€ä¸ªä¸€ä¸ªç¯ä¸­,è®¡ç®—ç‚¹æ•°ä½œä¸ºç‰¹å¾

  + å›¾ä¸­æ–¹æ³•çš„ç¼ºé™·

    + æ— æ³•åŒºåˆ†é•œåƒ 

+ **Signature based**

  æŠŠç‚¹äº‘åˆ†ä¸ºå››ä¸ªè±¡é™,åˆ†åˆ«æ±‚æ¯ä¸€ä¸ªè±¡é™çš„ä¸­å¿ƒç‚¹,å¾—åˆ°ä¸€ä¸ª8ç»´çš„ç‰¹å¾,å®ƒå¯ä»¥åŒºåˆ†å‡ºé•œåƒ,ä½†æ˜¯å¯¹äºæ—‹è½¬å¾ˆæ•æ„Ÿ

  ä¸€ç§å¸¸è§çš„æ€è·¯æ˜¯,åœ¨ç‰¹å¾ç‚¹é™„è¿‘å»ºä¸€ä¸ªå±€éƒ¨å‚è€ƒåæ ‡ç³»(LRF),ä½¿ç”¨è¿™ä¸ªåæ ‡ç³»,å¯¹é•œåƒå’Œæ—‹è½¬å¾ˆé²æ£’

  ![image-20210701155720164](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210701155720164.png)

  + Compute geometric measures based on local reference frame(LRF)
  + Methods
    + Structure Indexing
    + Signature of Histograms of OrienTations (SHOT)

### 1.PFH - Point Feature Histogram

+ **è¾“å…¥**

  + ç‚¹äº‘ä¸‰ç»´åæ ‡
  + æ¯ä¸€ä¸ªç‚¹çš„æ³•å‘é‡
  + ä¸€ä¸ªæŸ¥è¯¢ç‚¹,åœ¨è¿™ä¸ªç‚¹çš„é‚»åŸŸå†…è®¡ç®—ç‰¹å¾å‘é‡,è¿™ä¸ªç‚¹å°±æ˜¯ç‰¹å¾ç‚¹

+ **è¾“å‡º**

  + é•¿åº¦ä¸º$B^3$çš„ç‰¹å¾å‘é‡
    + $B$ :æ˜¯ä¸€ä¸ªç›´æ–¹å›¾ä¸Šçš„åˆ†å—æ•°é‡,the number of bins on each histogram, e.g., ğµ = 5(PCL)
    + 3  :æœ‰ä¸‰ä¸ªç›´æ–¹å›¾

+ **ç‰¹å¾æƒ³æ³•/å‡ºå‘ç‚¹**

  + æå–çš„ç‰¹å¾åº”è¯¥å¯¹ç‚¹äº‘çš„6D-pose ä¿æŒä¸å˜æ€§(æ—‹è½¬æˆ–å¹³ç§»å,ç‰¹å¾ç›¸åŒ)
  + é€šè¿‡ç‰¹å¾ç‚¹é¢†åŸŸå†…æ³•å‘é‡çš„å˜åŒ–æ¥æè¿°è¿™ç‰‡åŒºåŸŸ

+ **é‚»åŸŸNeighborhood**

  + ç»™å®šä¸€ä¸ªç‰¹å¾ç‚¹$p_q$,æ‰¾åˆ°åŠå¾„$r$å†…çš„ä¸€ä¸ªé‚»åŸŸ

  + **FPH** è€ƒè™‘é‚»åŸŸå†… çš„ æ¯ä¸€å¯¹ç‚¹, è®¡ç®—æ¯ä¸€å¯¹ç‚¹çš„ç‰¹å¾

    ![image-20210701221450698](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210701221450698.png)

  å¦‚ä¸Šå›¾æ‰€ç¤º, çº¢è‰²ç‚¹ä¸ºç‰¹å¾ç‚¹, ä»¥å®ƒä¸ºåŠå¾„çš„é‚»åŸŸå†…æœ‰5ä¸ªç‚¹,æ¯ä¸¤ä¸ªç‚¹ä¹‹é—´å½¢æˆä¸€ä¸ªç‚¹å¯¹,ä¸‹é¢å¯¹è¿™æ ·çš„ç‚¹å¯¹pairsæå–ç‰¹å¾:

+ **Local Reference Frame(LRF)**

  + åœ¨ç‚¹å¯¹ä¹‹é—´å»ºç«‹ä¸€ä¸ªå±€éƒ¨å‚è€ƒåæ ‡ç³»,å› ä¸ºæ˜¯ç‚¹ä¹‹é—´çš„ç›¸å¯¹å…³ç³»,æ‰€ä»¥å®ƒå’Œç‚¹äº‘çš„ç»å¯¹6Dä½å§¿æ˜¯æ— å…³çš„

    ![image-20210701222119950](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210701222119950.png)

  + åæ ‡ç³»çš„å»ºç«‹

    + ç‚¹å¯¹:$p_1,p_2$ä»¥åŠåœ¨è¿™ä¸¤ç‚¹çš„æ³•å‘é‡$n_1,n_2$
    + åœ¨$p_1$å»ºç«‹åæ ‡ç³»: 
    + **ç¬¬ä¸€ä¸ªè½´**æ˜¯$u=n_1$,
    + **ç¬¬äºŒä¸ªè½´**æ˜¯$u$å’Œç‚¹å¯¹ä¹‹é—´è¿çº¿æ³•å‘é‡çš„å‰ä¹˜$v=\frac{p_2-p_1}{||p_2-p_1||_2}\times u$(å˜ä¸ºç‰¹å¾å‘é‡æ˜¯æƒ³è®©vå˜æˆå•ä½å‘é‡)
    + **ç¬¬ä¸‰ä¸ªè½´**æ˜¯$u,v$çš„å‰ä¹˜,$w=u\times v$
    + p1å¤„çš„è¿™ä¸ªåæ ‡ç³»,å—åˆ°p1çš„æ³•å‘é‡n1å’Œ`p1,p2`çš„ç›¸å¯¹ä½ç½®å…³ç³»çš„å½±å“,ä¹Ÿå°±æºå¸¦äº†è¿™äº›ä¿¡æ¯

+ **ç‰¹å¾æå–**

  + ç›®æ ‡,æå–ä¸¤ä¸ªæ³•å‘é‡ä¹‹é—´çš„ä¸åŒdifference between surface normal ğ‘›1, ğ‘›2 â†’ [ğ›¼, ğœ™, ğœƒ, ğ‘‘]

  + æœ‰å››ä¸ªç‰¹å¾: [ğ›¼, ğœ™, ğœƒ, ğ‘‘]ä¸€ä¸ªè·ç¦»,ä¸‰ä¸ªè§’åº¦

    <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210701225002708.png" alt="image-20210701225002708" style="zoom:80%;" />

  + é€šå¸¸ä¸ä½¿ç”¨è·ç¦»ä½œä¸ºä¸€ä¸ªç‰¹å¾,å› ä¸ºè§†è§’çš„å…³ç³»,ç‚¹äº‘çš„å¯†åº¦ä¼šå‘ç”Ÿå˜åŒ–,è¿™æ ·ç‚¹å¯¹ä¹‹é—´çš„è·ç¦»ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–,è¿™æ ·ç‰¹å¾å°±å’Œè§†è§’æœ‰å…³äº†,ä¸å¸Œæœ›è¿™æ ·

  + å¦‚æœåœ¨é‚»åŸŸå†…æœ‰kä¸ªç‚¹,é‚£ä¹ˆå°±æœ‰$k^2$ä¸ªç‚¹å¯¹,å°±æœ‰$k^2$ä¸ªç‰¹å¾å‘é‡

  + rå†…ä¸€å…±æœ‰k+1ä¸ªç‚¹,ç‰¹å¾ç‚¹æœ‰kä¸ªç‚¹å¯¹,kä¸ªé‚»å±…ç‚¹ä¹‹é—´æœ‰k(k-1)ä¸ªç‚¹å¯¹,æ‰€ä»¥å…±æœ‰k^2ä¸ªç‚¹å¯¹

  + æŠŠè¿™$k^2$ä¸ªä¸‰å…ƒç»„[ğ›¼, ğœ™, ğœƒ] **æ”¾åˆ°ç›´æ–¹å›¾ä¸­**(PFHä¸­çš„åšæ³•å¾ˆåäººç±»,åœ¨FPFHä¸­å¾—åˆ°äº†æ”¹è¿›)

    + æŠŠæ¯ä¸€ä¸ªä¸‰å…ƒç»„å½“åšä¸€ä¸ª3D point
    + æ¯ä¸€ä¸ªç»´åº¦åˆ†æˆB ä»½,æ„æˆä¸€ä¸ªvoxel grid
    + æŠŠæ¯ä¸ªä¸‰å…ƒç»„ä»£è¡¨çš„ä¸‰ç»´ç‚¹,æ”¾åˆ°è¿™ä¸ªvoxel gridä¸­
    + æŠŠè¿™ä¸ªvoxel grid å‹å¹³,å˜æˆä¸€ä¸ªé•¿åº¦ä¸º$B^3$çš„ç‰¹å¾å‘é‡,å°±å¾—åˆ°äº†PFHç‰¹å¾å‘é‡
  + å½’ä¸€åŒ–
    
    <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210702001126679.png" alt="image-20210702001126679" style="zoom: 80%;" />

+ **PFH æ€»ç»“**

  **ç‰¹å¾æƒ³æ³•/å‡ºå‘ç‚¹:**

  + å¯¹ç‚¹äº‘çš„6D-pose åº”è¯¥ä¿æŒä¸å˜æ€§(æ—‹è½¬æˆ–å¹³ç§»å,ç‰¹å¾ç›¸åŒ)
    + ä»¥ç‚¹çš„æ³•å‘é‡å’Œç‚¹å¯¹ä¹‹é—´çš„ç›¸å¯¹ä½ç½®å…³ç³»å»ºç«‹ä¸€ä¸ªå±€éƒ¨å‚è€ƒåæ ‡ç³»
  + é€šè¿‡ç‰¹å¾ç‚¹é¢†åŸŸå†…æ³•å‘é‡çš„å˜åŒ–æ¥æè¿°è¿™ç‰‡åŒºåŸŸ
    + è®¡ç®—ç‚¹å¯¹çš„ä¸¤ä¸ªç‚¹çš„æ³•å‘é‡å·®å¼‚,ç”¨ä¸‰å…ƒç»„[ğ›¼, ğœ™, ğœƒ] è¡¨ç¤º

  **è®¡ç®—å¤æ‚åº¦:**

  + å¯¹äºé‚»åŸŸå†…æœ‰kä¸ªç‚¹çš„ç‰¹å¾ç‚¹p:   O(k^2)
  + n ä¸ªç‰¹å¾ç‚¹:  O(nk^2)
  + å¯ä»¥æ”¹è¿›ä¸ºO(nk)  (in FPFH)

  **ç‰¹ç‚¹:**

  + ç®€å•é«˜æ•ˆ
  + éå¸¸ä¾èµ–äºè¡¨é¢æ³•å‘é‡çš„ä¼°è®¡,å¦‚æœæ³•å‘é‡ä¼°è®¡é”™äº†,PFHç‰¹å¾ä¹Ÿä¼šæœ‰åå·®

### 2.FPFH - Fast Point Feature Histogram

+ **è¾“å…¥**
  + ç‚¹äº‘ä¸‰ç»´åæ ‡
  + æ¯ä¸€ä¸ªç‚¹çš„æ³•å‘é‡
  + ä¸€ä¸ªæŸ¥è¯¢ç‚¹,åœ¨è¿™ä¸ªç‚¹çš„é‚»åŸŸå†…è®¡ç®—ç‰¹å¾å‘é‡,è¿™ä¸ªç‚¹å°±æ˜¯ç‰¹å¾ç‚¹

+ **Simplified Point Feature Histogram(SPFH)**

  ![image-20210702113217779](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210702113217779.png)

  + åªè®¡ç®—ç‰¹å¾ç‚¹å’ŒåŠå¾„ä¸ºrçš„é‚»åŸŸå†…kä¸ªç‚¹ä¹‹é—´çš„ä¸‰å…ƒç»„$[\alpha\ \phi \ \theta]$,ä¸Šå›¾ $p_q$ç›¸è¿çš„5æ¡çº¢è‰²çš„çº¿

  + PFH   - è®¡ç®—rçš„é‚»åŸŸå†…æ¯ä¸€å¯¹ç‚¹å¯¹ä¹‹é—´çš„ä¸‰å…ƒç»„,æœ‰$k^2$ä¸ª

  + SPFHçš„è¾“å‡º:

    ä¸‰ä¸ªè¢«åˆ†ä¸ºBä»½çš„ç›´æ–¹å›¾,åˆ†åˆ«æ”¾ä¸‰å…ƒç»„çš„ä¸‰ä¸ªå€¼,å†æŠŠå®ƒä»¬æ‹¼èµ·æ¥,å¾—åˆ°ä¸€ä¸ªé•¿åº¦ä¸º  3B çš„ç›´æ–¹å›¾

    ![image-20210702113946281](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210702113946281.png)

+ **FPFH is the weighted sum of neighboring SPFH**

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210702120149225.png" alt="image-20210702120149225" style="zoom:80%;" />

  1. è®¡ç®—ç‰¹å¾ç‚¹çš„ SPFH

  2. å†è®¡ç®—ç‰¹å¾ç‚¹é‚»åŸŸå†…ç‚¹çš„ SPFH

  3. FPFH = weighted sum of (1) and (2)

     ![image-20210702120101554](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210702120101554.png)

  4. æœ‰ä¸€äº›è¾¹è®¡ç®—äº†ä¸¤æ¬¡,ä¸Šå›¾ä¸­,æ¯”è¾ƒç²—çš„é‚£äº›è¾¹

  5. æœ€åæŠŠä¸‰ä¸ªç›´æ–¹å›¾æ‹¼èµ·æ¥,è€Œä¸æ˜¯ä½¿ç”¨"voxel grid"

  6. ä¸€ä¸ªç›´æ–¹å›¾å¯è§†åŒ–çš„ä¾‹å­:

     <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210702121007283.png" alt="image-20210702121007283" style="zoom:80%;" />

+ **FPFH vs PFH**

  | FPFH                                     | PFH              |
  | :--------------------------------------- | :--------------- |
  | é‚»åŸŸå†…éƒ¨åˆ†è¿æ¥                           | é‚»åŸŸå†…å…¨è¿æ¥     |
  | é‚»åŸŸèŒƒå›´`[r,2r]`(å› ä¸ºè¦ç®—é‚»åŸŸå†…ç‚¹çš„SPFH) | é‚»åŸŸèŒƒå›´:r       |
  | æœ‰ä¸€äº›è¾¹è¢«è®¡ç®—ä¸¤æ¬¡                       | æ¯æ¡è¾¹åªè®¡ç®—ä¸€æ¬¡ |
  | å¤æ‚åº¦ O(nk)                             | å¤æ‚åº¦ O(nk^2)   |
  | ç›´æ–¹å›¾é•¿åº¦  3B                           | ç›´æ–¹å›¾é•¿åº¦ B^3   |

  (n:ç‰¹å¾ç‚¹çš„ä¸ªæ•°,k:åŠå¾„å†…çš„ç‚¹æ•°)
  
  FPFH å’Œ PFH æ•ˆæœå·®ä¸å¤š,æ‰€ä»¥é€šå¸¸ä½¿ç”¨æ›´å¿«çš„FPFH

### 3.SHOT â€“ Signature of Histograms of OrienTations

+ **è¾“å…¥**
  + ç‚¹äº‘ä¸‰ç»´åæ ‡
  + æ¯ä¸€ä¸ªç‚¹çš„æ³•å‘é‡
  + ä¸€ä¸ªæŸ¥è¯¢ç‚¹,åœ¨è¿™ä¸ªç‚¹çš„é‚»åŸŸå†…è®¡ç®—ç‰¹å¾å‘é‡,è¿™ä¸ªç‚¹å°±æ˜¯ç‰¹å¾ç‚¹

+ PFH/FPFHä½¿ç”¨ä¸‰ä¸ªè§’åº¦$[\alpha\ \phi \ \theta]$æ¥ç¼–ç è¡¨ç¤º ç‚¹å¯¹ **pair-wise**çš„ä¿¡æ¯

  + ä¸6Då§¿æ€æ— å…³
  + è·å–ä¸€ä¸ªé‚»åŸŸå†…è¡¨é¢çš„å˜åŒ–
  + é‚»åŸŸå†…çš„ç‚¹çš„ç»å¯¹åæ ‡æ²¡æœ‰è€ƒè™‘,**è¿™æ ·æ— æ³•å¤„ç†é¢å¯¹é•œåƒé—®é¢˜**

+ æ€æ ·å»åˆ©ç”¨é‚»åŸŸå†…ç‚¹çš„ä½ç½®ä¿¡æ¯ï¼Ÿ

  + æ¯”å¦‚è¯´ï¼Œåœ¨ï¼–ç‚¹ä¸­æ–¹å‘æœ‰ï¼•ä¸ªç‚¹ï¼Œåœ¨ï¼™ç‚¹é’Ÿæ–¹å‘æœ‰8ä¸ªç‚¹...
  + æƒ³è¦åˆ©ç”¨è¿™äº›ä½ç½®ä¿¡æ¯,**éœ€è¦å»ºç«‹ä¸€ä¸ªå±€éƒ¨å‚è€ƒåæ ‡ç³»,è€Œä¸”è¿™ä¸ªåæ ‡ç³»è¦æ»¡è¶³6Dæ— å…³çš„**

+ **LRF**

  æ€æ ·åˆ©ç”¨é‚»åŸŸå†…çš„ç‚¹å»ºç«‹ä¸€ä¸ªåæ ‡ç³»å‘¢?ä½¿ç”¨**PCA**

  1. åœ¨ç‰¹å¾ç‚¹$p$åŠå¾„$R$å‘¨å›´çš„é‚»åŸŸå†…è®¡ç®—ä¸€ä¸ªåŠ æƒçš„åæ–¹å·®çŸ©é˜µ$M$

     ![image-20210703094324593](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703094324593.png)

     æƒé‡ç”±ç‚¹åˆ°$p$çš„è·ç¦»å†³å®š,è·ç¦»è¶Šè¿œ,æƒé‡è¶Šä½

  2. å¯¹$M$ç‰¹å¾å€¼åˆ†è§£,å¾—åˆ°ç‰¹å¾å€¼ä»å¤§åˆ°å°å¯¹åº”çš„ä¸‰ä¸ªç‰¹å¾å‘é‡,è¿™å°±æ˜¯é‚»åŸŸå†…ç‚¹çš„ä¸‰ä¸ªè½´$x,y,z$,

     æ˜¯é‚»åŸŸå†…ç‚¹çš„å›ºæœ‰ç‰¹å¾,å’Œç‚¹äº‘çš„6Då§¿æ€æ— å…³,ä½†æ˜¯PCAåªèƒ½è·å–ä¸‰ä¸ªè½´,åæ ‡ç³»è¿˜éœ€è¦æ–¹å‘,æ¯ä¸€ä¸ªè½´æœ‰ä¸¤ä¸ªæ–¹å‘:

     + æ­£æ–¹å‘è®°ä¸º  $x^+,y^+,z^+$  
+ è´Ÿæ–¹å‘è®°ä¸º  $x^-,y^-,z^-$  
  
3. é¦–å…ˆç¡®å®šxè½´çš„æ–¹å‘
  
   **ä¸»è¦æ€æƒ³æ˜¯æ ¹æ®ä¸¤ä¸ªæ–¹å‘çš„ç‚¹æ•°ç¡®å®š**,å“ªä¸ªæ–¹å‘ç‚¹æ•°å¤š,å“ªä¸ªæ–¹å‘å°±æ˜¯æ­£æ–¹å‘,æ ¹æ®æ–¹å‘å°†é‚»åŸŸå†…çš„ç‚¹åˆ†ä¸ºä¸¤ä¸ªå­é›†:
  
     ![image-20210703104814145](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703104814145.png)
  
  4. ä»¥åŒæ ·çš„æ–¹å¼ç¡®å®šzè½´
  5. yè½´å°±æ˜¯xå’Œzçš„å‰ä¹˜  $y=z\times x$
  6. è¿™æ ·å¾—åˆ°çš„LRFæ˜¯**ä¸ä¼šéšç€ç‰©ä½“çš„æ—‹è½¬å¹³ç§»å‘ç”Ÿå˜åŒ–çš„**

+ **å»ºç«‹å¥½å±€éƒ¨å‚è€ƒåæ ‡ç³»LRFå**

  å°±å¯ä»¥åˆ©ç”¨ç‚¹çš„åæ ‡ä¿¡æ¯

  1. æŠŠç©ºé—´åˆ’åˆ†æˆå¾ˆå¤šå°å—,eg:åŠå¾„æ–¹å‘,ç»åº¦çº¬åº¦æ–¹å‘

  2. åœ¨æ¯ä¸€ä¸ªå°å—é‡Œé¢è®¡ç®—ç›´æ–¹å›¾

  3. æŠŠæ‰€æœ‰çš„ç›´æ–¹å›¾è¿æ¥èµ·æ¥,å¾—åˆ°ä¸€ä¸ª'signature'

     + æœ‰äº†æˆ‘ä»¬å»ºç«‹çš„è¿™ä¸ªLRF,å¯¹ç‚¹äº‘çš„æ—‹è½¬,å¹³ç§»,æ˜¯ä¸ä¼šå¯¹'signature'äº§ç”Ÿå½±å“çš„

  4. æŠŠ'signature'å½’ä¸€åŒ–åˆ°å’Œä¸º1,æœ€åå°±å¾—åˆ°äº†SHOTç‰¹å¾

+ **SHOTå…·ä½“çš„æ­¥éª¤:**

  1. æŠŠç‰¹å¾ç‚¹å‘¨å›´åŠå¾„ä¸ºRçš„ä¸€ä¸ªé‚»åŸŸåˆ’åˆ†æˆ 32 ä¸ªå°å—

     ![image-20210703144450466](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703144450466.png)

     + ç»åº¦æ–¹å‘  8ä»½
       + å›¾ç¤ºç»åº¦  4  ä»½,åªæ˜¯ä¸ºäº†çœ‹ç€æ¸…æ¥š
     + çº¬åº¦æ–¹å‘  2ä»½
     + åŠå¾„æ–¹å‘  2 ä»½
     
  2. åœ¨æ¯ä¸€ä¸ªå°å—å†…ä»¥$cos\theta_i$å»ºç«‹ç›´æ–¹å›¾

     + ä¸€ä¸ªå°å—$v_i$å†…çš„ä¸€ä¸ªç‚¹çš„æ³•å‘é‡  $n_{v_i}$
     
     + ç‰¹å¾ç‚¹çš„æ³•å‘é‡                             $n_u$
     
     + $cos\theta_i=n_{v_i}.n_u$
     
     + æŠŠæ¯ä¸€ä¸ªå°å—ä¸­çš„ç›´æ–¹å›¾è¿æ¥èµ·æ¥
     
     + ç›´æ–¹å›¾çš„é•¿åº¦,åœ¨pclä¸­
     
       pcl::SHOT352 builds histogram of length 11 for each volume. 11 Ã— 32 = 352
     
  3. **Boundary Effect!**

     ç›®å‰æå–ç‰¹å¾çš„è¿‡ç¨‹æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯**"ç¡¬åˆ‡å‰²"**çš„è¿‡ç¨‹,

     1.åˆ’åˆ†å°æ ¼å­æ—¶,ä¸€ä¸ªç‚¹ä¸æ˜¯è½åœ¨è¿™ä¸ªæ ¼å­å°±æ˜¯è½åœ¨å…¶ä»–æ ¼å­é‡Œé¢(è¾¹ç•Œç‚¹çš„å½±å“)

     2.æŠŠ$cos\theta_i$æ”¾è¿›ç›´æ–¹å›¾ä¸­æ—¶ä¹Ÿæ˜¯è¿™æ ·

     3.LRFå»ºç«‹ä¸å¥½,åæ ‡ç³»ä¼šæœ‰æŠ–åŠ¨,å»ºç«‹ç›´æ–¹å›¾çš„æ—¶å€™,ä¹Ÿä¼šå‡ºç°ç›´æ–¹å›¾ä¸¤ä¸ªåˆ†å—ç›¸äº¤å‡ºçš„ç‚¹

     4.ä¸ºäº†é˜²æ­¢å™ªå£°çš„å½±å“,**åœ¨è¾¹ç•Œå‡ºçš„ç‚¹å¯¹å®ƒçš„é‚»åŸŸ**ä¹Ÿåº”è¯¥æœ‰å½±å“,ä½¿ç”¨**"è½¯åˆ‡å‰²"**

  4. **"è½¯åˆ‡å‰²"**çš„å…·ä½“åšæ³• 

     ![image-20210703154927266](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703154927266.png)

     **åœ¨å››ä¸ªç»´åº¦çš„çº¿æ€§æ’å€¼**

     + åˆ’åˆ†volmueçš„æ—¶å€™,å¯¹å‘¨å›´8ä¸ªé‚»å±…ä¼šæœ‰å½±å“,3ä¸ªç»´åº¦,æ¯ä¸ªç»´åº¦éƒ½æœ‰å‘ä¸Šå–æ•´,å‘ä¸‹å–å€¼ä¸¤ç§æƒ…å†µ,æ‰€ä»¥æ˜¯8

     + åœ¨å»ºç«‹ç›´æ–¹å›¾æ—¶,ä¸€ä¸ª$cos\theta_i$å€¼å¯¹ä¸¤ä¸ªbinæœ‰å½±å“,ä¹Ÿæ˜¯å‘ä¸Šå–æ•´,å‘ä¸‹å–æ•´ä¸¤ç§æƒ…å†µ

     + ä¸€ä¸ªå°ä¾‹å­,æœ€åå¾—åˆ°ä¸€ä¸ª åœ¨ ç›´æ–¹å›¾  ä¸­çš„æƒé‡

       é€šè¿‡ä¸Šè¿°çš„åˆ†å‰²æ–¹æ³•

       ![image-20210703160244433](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703160244433.png)

       åœ¨æ¯ä¸€ä¸ªç»´åº¦ä¸Šçš„æƒé‡

       ![image-20210703160324247](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703160324247.png)

       ä»¥$w_\rho$ä¸ºä¾‹,$r_\rho$æ˜¯$\rho$çš„åˆ†è¾¨ç‡,åˆ†å­æ˜¯è·ç¦»$\rho_i$çš„è·ç¦»,è·ç¦»è¶Šè¿‘,æƒé‡è¶Šå¤§,å°±æ˜¯ç®€å•çš„çº¿æ€§æ’å€¼

       <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/199866231910519262.jpg" alt="199866231910519262" style="zoom: 25%;" />

       æœ€åå¾—åˆ°åœ¨ç›´æ–¹å›¾ä¸­çš„æƒé‡w:

       ![image-20210703161544191](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703161544191.png)

+ **PFH, FPFH, SHOTæ€»ç»“**

  ![image-20210703161746940](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703161746940.png)

### 4.RoPS

**å‡ºå‘ç‚¹:**

å¤§è„‘ä¸­å­˜å‚¨çš„æ˜¯ç‰©ä½“çš„å¤šè§†ç‚¹å›¾åƒåŠå…¶ç‰¹å¾,ä»å¤šä¸ªè§’åº¦è§‚å¯Ÿç‰©ä½“ï¼Œåˆ™è¯†åˆ«ç‰©ä½“çš„èƒ½åŠ›å¤§å¤§æé«˜,

è¿™å°±å¯å‘æˆ‘ä»¬,åœ¨æ„å»ºç‰¹å¾æè¿°å­æ—¶ï¼Œè‹¥èƒ½å°†ä»å¤šä¸ªè§†ç‚¹è·å¾—çš„ç‰©ä½“è¡¨é¢ ä¿¡æ¯è¿›è¡Œèåˆï¼Œå°†æœ‰åŠ©äºæé«˜ç‰¹å¾æè¿°å­çš„é‰´åˆ«åŠ›.



**æ—‹è½¬æŠ•å½±ç»Ÿè®¡ç‰¹å¾**:

ç›®å‰åœ¨ç”¨çš„ç»„åˆç‰¹å¾ä¹‹ä¸€,æ˜¯ç”µç§‘ä¸€ä½åšå£«çš„æˆæœ

ç°æœ‰ç®—æ³•è¦ä¹ˆé‰´åˆ«åŠ›ä¸é«˜ï¼Œ è¦ä¹ˆå¯¹å™ªå£°ã€åˆ†è¾¨ç‡å˜åŒ–ã€é®æŒ¡ã€èƒŒæ™¯å¹²æ‰°ã€ç½‘æ ¼å­”æ´ä»¥åŠæ‹“æ‰‘å˜åŒ–ç­‰å¹²æ‰°ååˆ†æ•æ„Ÿã€‚

é’ˆå¯¹æ­¤ï¼Œæœ¬æ–‡æå‡ºäº†ä¸¤ç§é«˜é‰´åˆ«åŠ›ä¸”ç¨³å¥çš„å±€éƒ¨ç‰¹å¾æè¿°å­ï¼Œå³ RoPS åŠ TriSI ç‰¹å¾æè¿°å­.



**ç®—æ³•æ¡†æ¶**

åŒ…æ‹¬å±€éƒ¨è¡¨é¢å§¿æ€å½’ä¸€åŒ–,è§†ç‚¹è®¾ç½®,äºŒç»´å›¾åƒç”Ÿæˆ,äºŒç»´å›¾åƒç‰¹å¾æå–ä»¥åŠå¤šè§†è§’ç‰¹å¾èåˆ;

RoPS å’Œ TriSI æ˜¯è¯¥ç†è®ºæ¡†æ¶çš„ä¸¤ä¸ªå…·ä½“å®ç°ï¼ŒäºŒè€…é‡‡ç”¨äº†ç›¸åŒçš„å±€éƒ¨è¡¨ é¢å§¿æ€å½’ä¸€åŒ–ç®—æ³•(LRF),ä¸åŒçš„è§†ç‚¹è®¾ç½®æ–¹æ¡ˆã€ä¸åŒçš„äºŒç»´å›¾åƒç”Ÿæˆæ–¹å¼ä»¥åŠä¸åŒçš„äºŒç»´å›¾åƒç‰¹å¾æå–æ–¹ æ³•ï¼Œä½†äºŒè€…å‡è·å¾—äº†ä¼˜å¼‚çš„æ€§èƒ½ï¼Œä»è€Œè¡¨æ˜äº†è¯¥ç†è®ºæ¡†æ¶çš„æœ‰æ•ˆæ€§

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703170116703.png" alt="image-20210703170116703" style="zoom:80%;" />

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703170619816.png" alt="image-20210703170619816" style="zoom:80%;" />



+ **LRFçš„å»ºç«‹**

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703171311972.png" alt="image-20210703171311972" style="zoom:80%;" />

  ![image-20210703203333047](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703203333047.png)

![image-20210703203534680](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703203534680.png)

![image-20210703203823724](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703203823724.png)

![image-20210703203859154](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703203859154.png)

+ **ç‰¹å¾ç”Ÿæˆ**

  <img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703173954426.png" alt="image-20210703173954426" style="zoom:150%;" />

![image-20210703204106028](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703204106028.png)

![image-20210703205250507](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703205250507.png)

![image-20210703205428371](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703205428371.png)

![image-20210703205539501](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210703205539501.png)



æœ€åç”Ÿæˆçš„ç‰¹å¾ç»´æ•°:

feature size = number_of_rotations * number_of_axis_to_rotate_around * number_of_projections * number_of_central_moments

=$3\times3\times3\times5$(ç»éªŒè¯æœ€å¥½çš„æ•°å€¼)

=135

**ä¼šè®¡ç®—å››ä¸ªä¸­å¿ƒçŸ©:**

m=1,n=1

m=2,n=1

m=1,n=2

m=2,n=2

### 5.åŸºäºæ·±åº¦å­¦ä¹ çš„ç‰¹å¾æå–æ–¹æ³•

+ æ‰€æœ‰çš„äººå·¥è®¾è®¡çš„ç‰¹å¾æè¿°æ–¹æ³•éƒ½æ˜¯åŸºäºå‡ ä½•çš„
  + åœ¨ç‰¹å¾ç‚¹é™„è¿‘çš„è¡¨é¢æ³•å‘é‡å˜åŒ–
  + åœ¨ç‰¹å¾ç‚¹é™„è¿‘çš„ç‚¹çš„åˆ†å¸ƒ
+ é‡åˆ°ä»¥ä¸‹æƒ…å†µä¼šå¾ˆä¸ç¨³å®š
  + å™ªå£°
  + é®æŒ¡/ä¸å®Œæ•´çš„å½¢çŠ¶
  + ç¨€ç–
+ æ·±åº¦å­¦ä¹ 
  + ä¼šæå–è¯­ä¹‰ä¿¡æ¯,ä¸ä»…ä»…æ˜¯å‡ ä½•ä¸Šçš„ä¿¡æ¯
  + å¯¹äºå™ªå£°ä¸æ•æ„Ÿ



## class 9 Registration

+ **ç‚¹äº‘é…å‡†**:æ‰¾åˆ°ä¸€ä¸ª**è½¬ç§»çŸ©é˜µ**(åŒ…æ‹¬æ—‹è½¬çŸ©é˜µ(3x3),è½¬ç§»çŸ©é˜µ(3x1)),æŠŠä¸¤å¸§ç‚¹äº‘å¯¹é½åœ¨ä¸€èµ·

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802093104319.png" alt="image-20210802093104319" style="zoom: 80%;" />

+ **ç‚¹äº‘é…å‡†çš„åº”ç”¨**:

  + Odometry / SLAM
  + mapping
  + loop closure
  + calibration(å¤šä¼ æ„Ÿå™¨æ ‡å®š)
  + ç›®æ ‡å§¿æ€ä¼°è®¡

+ **ç‚¹äº‘é…å‡†é—®é¢˜çš„æ•°å­¦å®šä¹‰**

  ç»™å®šä¸¤ç»„ç›¸å…³è”çš„ç‚¹é›†:

  + $P=\{p_1,...,p_{N_p}\},p_i\in R^3$,     **source**

  + $Q=\{q_1,...,q_{N_q}\},q_i\in R^3$,     **destination/target/reference(ä¸åŠ¨)**

  + æ‰¾åˆ°ä¸€ä¸ªæ—‹è½¬å¹³ç§»,ä½œç”¨åœ¨Pä¸Š,è®©è½¬æ¢åçš„På’ŒQå¯¹é½çš„æœ€å¥½

    ![image-20210802113950715](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802113950715.png)

  + æ‰¾åˆ°På’ŒQä¸­ä¸€ä¸€å¯¹åº”çš„Nä¸ªç‚¹å¯¹,ç„¶åæœ€å°åŒ–å‡æ–¹è¯¯å·®

    ![image-20210802112811428](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802112811428.png)

### 1.Iterative Closest Point(ICP)

#### 1.1 point-to-point ICP

![image-20210802112910968](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802112910968.png)

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802115436871.png" alt="image-20210802115436871" style="zoom: 80%;" />

+ **ICPå°±æ˜¯è¿­ä»£ä¸¤ä¸ªæ­¥éª¤:**
  1. æ‰¾åˆ°På’ŒQä¹‹é—´çš„å¯¹åº”ç‚¹
  2. é€šè¿‡æœ€å°åŒ–æŸå¤±å‡½æ•°E(R,t),å¾—åˆ°R,t,å›åˆ°1

+ **å…·ä½“æ¥è¯´:**

  ç»™å®šä¸¤ç»„ç‚¹é›†:

  + $P=\{p_1,...,p_{N_p}\},p_i\in R^3$,     **source,we are transforming**
  + $Q=\{q_1,...,q_{N_q}\},q_i\in R^3$,     **destination/target/reference(ä¸åŠ¨ assume ğ‘„ is fixed)**

  1. **æ•°æ®å…³è”,åœ¨Qä¸­æ‰¾åˆ°Pçš„å¯¹åº”ç‚¹**

     1. å¯¹äºPä¸­çš„ä¸­çš„æ¯ä¸€ä¸ªç‚¹$p_i$,åœ¨Qä¸­æ‰¾åˆ°è·ç¦»å®ƒæœ€è¿‘çš„ç‚¹,æˆ–è€…è·ç¦»å°äºä¸€å®šé˜ˆå€¼å°±è®¤ä¸ºæ‰¾åˆ°äº†,å°±ä¸éœ€è¦æœç´¢æ•´ä¸ªç‚¹é›†
     2. å› ä¸ºR,tæ˜¯æœªçŸ¥çš„,å¾ˆå¤špairsæ˜¯ä¸å¯¹çš„,æ‰€ä»¥è¦å»é™¤ä¸€äº›outlier pairs,æ¯”å¦‚è¯´,å»æ‰è·ç¦»å¤ªè¿œçš„ç‚¹å¯¹,$||p_i-q_i||>th$,æˆ–è€…,å¯¹ç‚¹å¯¹è·ç¦»è¿›è¡Œæ’åº,å»æ‰30%è·ç¦»æœ€è¿œçš„ç‚¹

  2. **==æ±‚è§£ä¼˜åŒ–é—®é¢˜(åé¢è¯´æ€ä¹ˆæ±‚è§£)==**

     $R,t=arg_{R,t}minE(R,t)=arg_{R,t}min\frac{1}{N}\Sigma_{i=1}^N||q_i-Rp_i-t||^2$

     1. è®¡ç®—ä¸¤ç»„ç‚¹äº‘çš„è´¨å¿ƒ,$\mu_p=\frac{1}{N}\Sigma_{i=1}^{N}p_i,\mu_q=\frac{1}{N}\Sigma_{i=1}^{N}q_i$
     2. å»å‡å€¼,$P'=\{p_i'=p_i-\mu_p\}_{i=1}^N,Q'=\{q_i'=q_i-\mu_q\}_{i=1}^N$
     3. è®¡ç®—(åæ–¹å·®)çŸ©é˜µ$H=\Sigma_{i=1}^{N}p_i'q_i'^T$
     4. å¯¹$H$è¿›è¡ŒSVDåˆ†è§£,å¾—åˆ°$H=U\Sigma V^T$
     5. å½“å‰æ—‹è½¬çŸ©é˜µæœ€ä¼˜è§£ä¸º:$R^*=VU^T$
     6. å½“å‰å¹³ç§»å‘é‡æœ€ä¼˜è§£ä¸º:$t^*=\mu_q-R^*\mu_p$

  3. **æ£€æŸ¥æ˜¯å¦æ”¶æ•›**

     1. æ”¶æ•›å‡†åˆ™
        1. ğ¸ (ğ‘…, ğ‘¡) small enough æˆ–è€…
        2. ğ›¥ğ‘…, ğ›¥ğ‘¡ small enough
        3. åˆ°è¾¾æœ€å¤§è¿­ä»£æ¬¡æ•°
     2. å¦‚æœæ²¡æœ‰æ”¶æ•›
        1. ğ‘ƒâ†ğ‘…ğ‘ƒ + ğ‘¡
        2. repeat Step 1-3

+ **æ±‚è§£ä¼˜åŒ–é—®é¢˜**

  è¯¾ç¨‹ä¸­çš„è¯æ˜è¿‡ç¨‹æœ‰ç‚¹æ™¦æ¶©,[çœ‹ä¹‹å‰çš„æˆªå›¾](./slamåŸºç¡€çŸ¥è¯†.md)
  
  ![image-20200929221956929](slamåŸºç¡€çŸ¥è¯†.assets/image-20200929221956929.png)
  
  ![image-20200929222041403](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20200929222041403.png)
  
  ![image-20200929222123926](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20200929222123926.png)
  
  ![image-20200929222154014](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20200929222154014.png)
  
  ![image-20200929222225273](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20200929222225273.png)
  
  ![image-20200929222258606](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20200929222258606.png)
  
  ![p](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20200929222323838.png)
  
  ![image-20200929222427902](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20200929222427902.png)

#### 1.2 ICP Variants

å››ç§å¯¹äºICPçš„æ”¹è¿›,å˜ä½“

1. **Point Subsets**åªä½¿ç”¨åŸç‚¹äº‘çš„ä¸€éƒ¨åˆ†ç‚¹é›†,ä¸å…¨éƒ¨ç”¨,å‡å°‘è®¡ç®—é‡
   1. Random Sample
   2. voxel grid Sample
   3. ==Normal Space Sampling(NSS)==
   4. Feature detection ç‰¹å¾ç‚¹æå–
2. **Data association æ•°æ®å…³è”**
   1. Nearest neighbor â€“ kd-tree/octree for acceleration(å°±æ˜¯point-to-point)
   2. ==Normal shooting==
   3. ==Projection==
   4. Feature descriptor matching (compatible point) å¯ä»¥ä¸1 ç»“åˆ,åªæ˜¯ç‚¹çš„ç»´åº¦å¢åŠ äº†,æ¬§å¼ç©ºé—´å˜æˆäº†ç‰¹å¾ç©ºé—´
3. **Outlier Rejection**
   1. Remove correspondence with high distance   å»æ‰è·ç¦»å¤ªè¿œçš„ç‚¹å¯¹
   2. Remove worst x% of correspondences           å»æ‰è·ç¦»æœ€è¿œçš„ç™¾åˆ†ä¹‹å¤šå°‘çš„ç‚¹å¯¹
4. **Loss function**
   1. Point-to-Point
   2. ==Point-to-Plane==

+ **Point Subset - NSS**

  ![image-20210802154209860](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802154209860.png)![image-20210802154224523](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802154224523.png)

<img src="æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802154331212.png" alt="image-20210802154331212" style="zoom:80%;" />

**å…·ä½“è§class1**

+ **Data association - Normal Shooting**

  ![image-20210802155840592](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802155840592.png)![image-20210802155852560](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802155852560.png)

  ä¸€èˆ¬å¯»æ‰¾å…³è”æ•°æ®,æ˜¯åœ¨targetä¸­å¯»æ‰¾è·ç¦»æœ€è¿‘çš„ç‚¹

  $q_i=arg min_{q_i \in Q}||p_i-q_i||^2$

  **ä¸€èˆ¬æ•ˆæœå¾ˆç¨³å®š**

  åœ¨ä¸€äº›ç‰¹æ®Šçš„æƒ…å†µ,Normal shootingè¦æ›´å¥½:

  å¯¹äºPä¸­çš„ä¸€ä¸ªç‚¹$p_i$,è¿™ä¸€ç‚¹çš„è¡¨é¢æ³•å‘é‡æ˜¯$n_{p_i}$,åœ¨Qä¸­æ‰¾ä¸€ä¸ªç‚¹,è·ç¦»è¿™ä¸ªæ³•å‘é‡æ‰€åœ¨çš„ç›´çº¿è·ç¦»æœ€çŸ­

  ![image-20210802160405712](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802160405712.png)

 ç»“æ„å¾ˆè§„æ•´å¯ä»¥ç”¨è¿™ç§æ–¹æ³•

+ **Data Association - Projection**

  åªç”¨äºRGBDæ•°æ®

  ![image-20210802160724784](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802160724784.png)

+ **Loss Function - ==Point-to-Plane==**

  ![image-20210802161352869](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802161352869.png)

  â€‹	åœ¨ä½¿ç”¨NNå¯»æ‰¾åˆ°å¯¹åº”ç‚¹ä¹‹å,å¦‚æœä½¿ç”¨point-to-pointè®¡ç®—loss function,æœ‰äº›æƒ…å†µå¯èƒ½ä¼šå¯¹ä¼˜åŒ–äº§ç”Ÿå½±å“,å¦‚ä¸Šå›¾å³è¾¹æ‰€ç¤º,è®¡ç®—lossæ—¶,åº”è¯¥è®¡ç®—åˆ°å¯¹åº”ç‚¹æ‰€åœ¨åŒºåŸŸå¹³é¢(æ³•å‘é‡)çš„è·ç¦»

  ![image-20210802162422822](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802162422822.png)

![image-20210802162735036](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802162735036.png)

æ±‚è§£point-to-planeçš„ä¼˜åŒ–é—®é¢˜,æ²¡æœ‰point-to-pointçš„ç®€åŒ–æ±‚è§£æ–¹æ³•,è¿™ä¸ªä¼˜åŒ–é—®é¢˜å¾ˆå¤æ‚

ç›´æ¥ç»™å‡ºç»“è®º:

![image-20210802163035739](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802163035739.png)

![image-20210802163742472](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802163742472.png)

==**ä¸€èˆ¬æ¥è¯´,point-to-planeæ•ˆæœæ›´å¥½**==

+ **ICP æ€»ç»“**

  ![image-20210802163934762](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802163934762.png)

+ **ä¼˜ç‚¹**
  + ç®€å•,å®¹æ˜“å®ç°
  + ç»™å®šæ¯”è¾ƒå¥½çš„åˆå§‹å€¼çš„æƒ…å†µä¸‹,æ•ˆæœå¾ˆå¥½
+ **ç¼ºç‚¹**
  + ä¾èµ–ä¸€ä¸ªæ¯”è¾ƒå¥½çš„åˆå§‹åŒ–R,t,å¦‚æœæ²¡æœ‰ä¸€ä¸ªæ¯”è¾ƒå¥½çš„åˆå§‹åŒ–,æ•°æ®å…³è”å°±ä¼šé”™è¯¯,ICPå°±æ— æ³•æ­£å¸¸å·¥ä½œ
  + Nearest neighbor search can be slow

![image-20210802180347415](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802180347415.png)

### 2.Normal Distribution Transform(NDT)

#### 2.1 NDTçš„å¼•å‡º

+ **ICP**
  + Each point is considered without neighborhood info
  + ICPè®¡ç®—lossæ—¶åªè€ƒè™‘ä¸€å¯¹ç‚¹ä¹‹é—´çš„è·ç¦»,æ²¡æœ‰è€ƒè™‘é‚»å±…çš„ä¿¡æ¯
  + ICP éœ€è¦ æœ€è¿‘é‚»æœç´¢,è®¡ç®—è€—æ—¶
+ **NDT** è§£å†³äº†ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜
  + æ€æ ·è·å–é‚»å±…ä¿¡æ¯:
    + ä½¿ç”¨voxel grid æ¯ä¸€ä¸ª ä½“ç´  å°±æ˜¯ä¸€ä¸ª é‚»å±…
  + æ€æ ·é¿å…æœ€è¿‘é‚»æœç´¢
    + voxelåæ ‡éƒ½æ˜¯æ•´æ•°,æ¯ä¸€ä¸ªç‚¹è®¡ç®—åæ ‡,å‘ä¸‹å–æ•´å°±å¯ä»¥è·å¾—

#### 2.2 NDT --- Representation

![image-20210802164527550](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802164527550.png)

+ åœ¨ç›®æ ‡**target**ç‚¹äº‘ä¸Šå»ºç«‹ä½“ç´ ç½‘æ ¼,åœ¨æºç‚¹äº‘ä¸Šä¸éœ€è¦,åªè¦flooræ“ä½œå°±å¯ä»¥çŸ¥é“sourceä¸­çš„ç‚¹åœ¨å“ªä¸€ä¸ªvoxelä¸­
+ å¯¹äºæ¯ä¸€ä¸ªç‚¹æ•°å¤§äºm=5çš„æ ¼å­(éšå«äº†outlierå»é™¤çš„è¿‡ç¨‹),è®¡ç®—**å‡å€¼å’Œåæ–¹å·®**:

![image-20210618142544456](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210618142544456.png)

+ è®¡ç®—å®Œå‡å€¼å’Œåæ–¹å·®ä¹‹å,ä½¿ç”¨ä¸€ä¸ª**ä¸‰ç»´é«˜æ–¯åˆ†å¸ƒ**å»è¡¨ç¤ºè¿™ä¸ªæ ¼å­
  + äº®åº¦è¶Šé«˜,è¡¨ç¤ºç‚¹å‡ºç°åœ¨é‚£é‡Œçš„å¯èƒ½æ€§è¶Šé«˜,ç”¨ä¸€ä¸ª**é«˜æ–¯æ¨¡å‹**å»æè¿°è¿™ä¸ªæ ¼å­é‡Œé¢çš„ç‚¹æ˜¯æ€ä¹ˆåˆ†å¸ƒçš„,
  + è¡¨ç¤ºä¸€ä¸ªç‚¹å‡ºç°åœ¨ä¸€ä¸ªæ ¼å­ä¸­æ²¡ä¸€ä¸ªä½ç½®çš„æ¦‚ç‡æ˜¯å¤šå°‘

![image-20210618143008557](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210618143008557.png)

#### 2.3 NDT --- MLE (Maximum Likelihood Estimation)

**å¯¹targetç‚¹äº‘å»ºæ¨¡å®Œæˆå, æ€æ ·å¯¹åŒ¹é…é—®é¢˜è¿›è¡Œå»ºæ¨¡?**

+ å¯¹äºåœ¨sourceç‚¹äº‘ä¸­çš„ä¸€ä¸ªç‚¹$\vec x_k \in R^3$
  + ä½¿ç”¨ä¸€ä¸ªåæ ‡è½¬ç§»çŸ©é˜µ $\vec p$ å°†å®ƒè½¬ç§»åˆ°targetåæ ‡ç³»
  + æœªçŸ¥å‚æ•°è½¬ç§»çŸ©é˜µ  $\vec p = \vec p_6 = [t_x,t_y,t_z, \phi _x,\phi _y,\phi _z]^6 \in R^6$
  + åæ ‡è½¬ç§»åçš„ç‚¹$\vec x_k'=T(\vec p,\vec x_k)$, æ€ä¹ˆç¡®å®šå®ƒè½åœ¨targetç‚¹äº‘ä¸­å“ªä¸€ä¸ªæ ¼å­å‘¢,flooræ“ä½œå³å¯

+ æ‰¾åˆ°targetæ ¼å­ä¹‹å,å°±çŸ¥é“äº†è¿™ä¸ªæ ¼å­ä¸­  ç‚¹çš„é«˜æ–¯åˆ†å¸ƒ$p$, å°±å¯ä»¥å¾—åˆ°ç‚¹$\vec x_k'$åœ¨è¿™ä¸ªæ ¼å­ä¸­çš„æ¦‚ç‡:

  â€‹														$p(\vec x_k')=p(T(\vec p,\vec x_k))$

+ æ‰€æœ‰ç‚¹çš„æ¦‚ç‡ Likelihood for k = 1,2,...,n

  â€‹							                        $\Psi = \prod_{k=1}^np(T(\vec p,\vec x_k))$

+  ä½¿ç”¨**æœ€å¤§ä¼¼ç„¶ä¼°è®¡**,åªè¦**æœ€å¤§åŒ–ä¼¼ç„¶å‡½æ•°**$\Psi$,å°±å¯ä»¥å¾—åˆ°è½¬ç§»çŸ©é˜µçš„6ä¸ªå‚æ•°çš„æœ€ä¼˜è§£

  **Maximize likelihood â†’ minimize negative log-likelihood**

  ![image-20210618151530803](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210618151530803.png)

+ è½¬åŒ–ä¸º**ä¼˜åŒ–é—®é¢˜**,NDT is a **minimization**

  ![image-20210618151700350](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210618151700350.png)

+ **åœ¨æ±‚è§£è¿™ä¸ªä¼˜åŒ–é—®é¢˜ä¹‹å‰,æœ‰ä¸¤ä¸ªé—®é¢˜éœ€è¦è§£å†³**
  
  + outlierä¼šå¯¼è‡´è¿™ä¸ªä¼˜åŒ–é—®é¢˜å´©æºƒ-->ä½¿ç”¨**æ··åˆæ¨¡å‹**æ¥è§£å†³
  + å› ä¸ºè½¬ç§»çŸ©é˜µæœ‰Tæœ‰R,t6ä¸ªé‡,pç»è¿‡log,æ±‚å¯¼ä¼šéå¸¸å¤æ‚,å¾ˆå›°éš¾,å°±ä¸å¥½ä½¿ç”¨æ¢¯åº¦ä¸‹é™

#### 2.4 NDT --- Mixture Probability

**outlier ä¸ºä»€ä¹ˆä¼šå¯¼è‡´ ä¼˜åŒ–é—®é¢˜å´©æ‰?**

è®¡ç®—å¤–ç‚¹åœ¨targetæŸä¸€ä¸ªæ ¼å­ä¸­å‡ºç°çš„æ¦‚ç‡æ—¶,på¾ˆå°,æ¥è¿‘0,å–logå,å°±ä¼šæˆ**æ— ç©·**,ä½¿æœ€å°åŒ–é—®é¢˜å´©æºƒ,

**è§£å†³åŠæ³•**å°±æ˜¯è®©è¿™äº›å¤–ç‚¹çš„pä¸ä¸º0

![image-20210618152543462](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210618152543462.png)

+ How to avoid infinity?**æ€æ ·å»æ‰æ— ç©·å€¼?**

  + Avoid likelihood $p$ going to zero

  + Modify the probability to **mixture of Gaussian and uniform distribution**

    æŠŠ**å‡åŒ€åˆ†å¸ƒå’Œé«˜æ–¯åˆ†å¸ƒæ··åˆåœ¨ä¸€èµ·**

  ![image-20210618153412691](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210618153412691.png)

+ $p_0$æ˜¯ä¸€ä¸ªè¶…å‚æ•°,ä»£è¡¨outlier**å çš„æ¯”ä¾‹**

+ æ€æ ·ç¡®å®š$c_1,c_2$?

  ![image-20210618153531800](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210618153531800.png)

+ **Method 1**(ä¸¥è°¨çš„åšæ³•)

  + åˆ©ç”¨æ¦‚ç‡å¯†åº¦å‡½æ•°ç§¯åˆ†ä¸º1,æ¯ä¸€ä¸ªæ ¼å­ä¸­çš„$c_1,c_2$ä¸åŒ

    â€‹		![image-20210618155409343](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210618155409343.png)

  + åªæœ‰è¿™ä¸€ä¸ªçº¦æŸä¸å¤Ÿç¡®å®š$c_1,c_2$

  + æ·»åŠ é¢å¤–çš„çº¦æŸ,æ¯”å¦‚ c1+c2=1

  + è¿™ç§æ–¹æ³•å¤ªå¤æ‚äº†,å®é™…ä¸Š,å¹¶ä¸å…³ç³»è¿™ä¸ªæ¦‚ç‡å¯†åº¦å‡½æ•°æ˜¯å¦åˆæ³•,åªè¦å¯ä»¥æ±‚è§£æœ€å¤§ä¼¼ç„¶å‡½æ•°å³å¯

+ **Method 2**(å®é™…ä½¿ç”¨çš„æ–¹æ³•)

  + åœ¨PCLä¸­çš„å®ç°æ–¹æ³•:äººå·¥æŒ‡å®šc1,c2çš„å€¼,è€Œä¸”å¯¹äºæ‰€æœ‰çš„æ ¼å­,c1,c2æ˜¯ç›¸åŒçš„,ä¸¥è°¨æ¥è¯´,ä¸åŒçš„æ ¼å­é«˜æ–¯åˆ†å¸ƒä¸ä¸€æ ·,c1,c2ä¹Ÿæ˜¯ä¸åŒçš„
  + $c_1=10*(1-p_0)$
  + $c_2=\frac {1}{resolution^3}$      $resolution^3$ è¡¨ç¤ºæ¯ä¸€ä¸ªæ ¼å­çš„ä½“ç§¯
  + è®° $c_2p_0$ ä¸ºæ–°çš„ $c_2$   (ä¸€ä¸ªå¸¸æ•°)

#### 2.5 NDT --- Negative Log-likelihood Approximation

ç»è¿‡ **2.4**,å·²ç»è§£å†³äº†å¤–ç‚¹çš„é—®é¢˜,æ¯ä¸€ä¸ªæ ¼å­é‡Œé¢çš„é«˜æ–¯åˆ†å¸ƒ è½¬åŒ–æˆç«‹ ä¸€ä¸ª æ··åˆåˆ†å¸ƒ(é«˜æ–¯+å‡åŒ€)

+ æ¯ä¸€ä¸ªæ ¼å­é‡Œé¢çš„æ¦‚ç‡å¯†åº¦å‡½æ•°:

  â€‹		![image-20210618163100886](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210618163100886.png)

+ æŸå¤±å‡½æ•°The negative log-likelihood cost functions becomes

  â€‹	![image-20210618163234341](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210618163234341.png)

+ æ±‚å¯¼å›°éš¾
  											![image-20210618163301960](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210618163301960.png)

+ ä»ä¸Šå›¾å¯ä»¥çœ‹å‡º,è™šçº¿,negative log-likelihood æ›²çº¿çš„æ ·å­ åƒæ˜¯ä¸€ä¸ª**ç¿»è½¬çš„é«˜æ–¯å‡½æ•°**,æ‰€ä»¥å¯ä»¥ç”¨ä¸€ä¸ªé«˜æ–¯å‡½æ•°$\tilde p(\vec x)$ å» è¿‘ä¼¼å®ƒ,**ç”¨æŒ‡æ•°å‡½æ•°å–ä»£log**,è¿™æ ·æ±‚å¯¼ä¼šå®¹æ˜“å¾ˆå¤š

+ ![image-20210618163758251](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210618163758251.png)

+ æ€æ ·æ±‚è§£ $d_1,d_2,d_3$

+ **é€‰å–ä¸‰ä¸ªç‚¹è¿›è¡Œæ‹Ÿåˆ**

     ä¸‹è¡¨ä¸­,ç¬¬äºŒåˆ—æ˜¯å–çš„æ˜¯ä¸‰ä¸ªanchor point çš„xåæ ‡,ç¬¬ä¸‰åˆ—æ˜¯æ‹Ÿåˆæ›²çº¿çš„ç­‰å¼

![image-20210618164044969](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210618164044969.png)

å› ä¸º$c_1,c_2$æ˜¯å·²çŸ¥ç¡®å®šçš„,æ‰€ä»¥$d_1,d_2,d_3$ä¹Ÿæ˜¯ç¡®å®šçš„,æ‰€ä»¥åœ¨ç¼–ç¨‹å®ç°æ—¶,è¿™5ä¸ªå˜é‡çš„å€¼,æ˜¯äº‹å…ˆç¡®å®šå¥½çš„

#### 2.6 NDT --- MLE

+ NDT is a **minimization** problem

![image-20210618151700350](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210618151700350.png)

+ ç»è¿‡2.4 2.5 ,å®ƒå˜æˆæœ€å°åŒ– ä¸€ä¸ª score å‡½æ•°

  â€‹				![image-20210618165552765](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210618165552765.png)

+ ä½¿ç”¨è¿­ä»£çš„æ–¹æ³•è¿›è¡Œä¼˜åŒ–: **ç‰›é¡¿æ³•**
  + At step $\vec p_i$
  + solve $\Delta \vec p$ to obtain $\vec p_{i+1}=\vec p_i+ \Delta \vec p$

==**Newtonâ€™s Method in Optimization**==

![image-20210802170812849](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802170812849.png)

ä¸æ¢¯åº¦ä¸‹é™ä½¿ç”¨ä¸€é˜¶å¯¼æ•°è¿›è¡Œè¿­ä»£ä¸åŒ

ç‰›é¡¿æ³•ä½¿ç”¨ä¸€ä¸ªäºŒé˜¶çš„å‡½æ•°å»æ¨¡æ‹Ÿä¸€ä¸ªç‚¹å‘¨å›´çš„é‚»åŸŸ,è¿›è¡Œè¿­ä»£,å¦‚ä¸Šå›¾æ‰€ç¤º,ä»$x^{(k)}$åˆ°$x^{(k+1)}$,åœ¨$x^{(k)}$å¤„æ‹Ÿåˆä¸€ä¸ªäºŒé˜¶å‡½æ•°è¿‘ä¼¼q,$x^{(k+1)}$å°±æ˜¯è¿™ä¸ªäºŒé˜¶å‡½æ•°å¯¼æ•°ä¸º0çš„ä½ç½®;

æ‰€ä»¥è¿­ä»£æ¬¡æ•°ä¼šå°‘å¾ˆå¤š,ä½†æ˜¯å¾ˆå¤šå‡½æ•°çš„äºŒé˜¶è®¡ç®—å¤æ‚

![image-20210802171539827](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802171539827.png)

å…·ä½“ä¼˜åŒ–è¿‡ç¨‹æ²¡æœ‰çœ‹

ä¸€æ¬¡è¿­ä»£åªéœ€è¦æ›´æ–°ä¸€æ¬¡å°±å¥½äº†,å› ä¸ºæœ¬æ¥åˆå§‹çš„R,tå°±ä¸æ˜¯å¾ˆå¥½,æŠŠå®ƒä¼˜åŒ–åˆ°å±€éƒ¨æœ€ä¼˜æ²¡å¿…è¦,è€Œä¸”å¤–é¢æœ‰ä¸€ä¸ªå¤§çš„è¿­ä»£è¿‡ç¨‹

+ **NDT æ€»ç»“**

  ![image-20210802171952745](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802171952745.png)

+ **ICP vs NDT**

  ![image-20210802172224728](æ·±è“å­¦é™¢-ç‚¹äº‘å¤„ç†.assets/image-20210802172224728.png)

### 3.RANSAC Registration

+ ICPå’ŒNDT éƒ½éœ€è¦ä¸€ä¸ªè¾ƒå¥½çš„åˆå§‹ä½å§¿,å¦‚æœæ²¡æœ‰,å°±ä¼šå¯¼è‡´æ•°æ®å…³è”å¤±è´¥,å–å¾—å±€éƒ¨æœ€ä¼˜,æ— æ³•å¾—åˆ°å¾ˆå¥½çš„ç»“æœ

+ åœ¨æ²¡æœ‰åˆå§‹ä½å§¿çš„æƒ…å†µä¸‹,å¯ä»¥ç”¨Feature detection + description + RANSAC çš„æ–¹æ³•,å¾—åˆ°ä¸€ä¸ªç²—é…å‡†çš„ç»“æœå†ç”¨ICP/NDTè¿›è¡Œç»†åŒ¹é…

+ **æµç¨‹å¦‚ä¸‹:**

  1. åœ¨sourceå’Œtargetä¸Šè¿›è¡Œ**ç‰¹å¾ç‚¹æå–**å’Œ**ç‰¹å¾æå–**
  2. å»ºç«‹åŒ¹é…(point pairs) åœ¨**feature ç©ºé—´**è¿›è¡ŒåŒ¹é…
     1. åé¢ä»”ç»†æè¿°
  3. RANSAC è¿­ä»£
     1. æ¯æ¬¡è¿­ä»£éšæœºé€‰å–3ä¸ªç‚¹å¯¹
     2. ä½¿ç”¨SVDè®¡ç®— å‡º R,t
     3. è®¡ç®—å†…ç‚¹å¯¹çš„ä¸ªæ•°(sourceçš„ç‰¹å¾ç‚¹ç»è¿‡R,tä¹‹å,ä¸targetä¸­çš„å¯¹åº”ç‚¹çš„**æ¬§å¼è·ç¦»**è¶³å¤Ÿè¿‘çš„å°±è®¤ä¸ºæ˜¯inlier)
  4. é€‰æ‹©inlinersæœ€å¤šçš„R,t
  5. ä½¿ç”¨ICP/NDTè¿›è¡Œrefine

+ **å»ºç«‹åŒ¹é…çš„æ–¹æ³•**

  + è¾“å…¥

    + Source keypoints & descriptors
    + Target keypoints & descriptors

  + åœ¨ä¸¤å¸§ç‚¹äº‘ä¸­å»ºç«‹åŒ¹é…çš„æ–¹æ³•

    1. **Nearest descriptor matching** (3 methods)

       1. For each source keypoint $s_i$, find a target keypoint  $t_i$ with most **similar** descriptor (L2-norm) L2è·ç¦»æœ€å°
       2. For each target keypoint $t_i$, f ind a source keypoint  $ s_i$with most **similar** descriptor (L2-norm) L2è·ç¦»æœ€å°
       3. 1. 2. éƒ½æ˜¯åŒ¹é…

    2. **Mutual nearest descriptor matching**

       åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸¤ç§æƒ…å†µ

       1. $s_i$ is the nearest neighbor of $t_i$  (in descriptor space)
       2.  $t_i$ is the nearest neighbor of $s_i$ (in descriptor space)

### 4.ç‚¹äº‘é…å‡†pipeline

1. æ•°æ®é¢„å¤„ç†
   1. é™é‡‡æ ·
   2. å™ªç‚¹å»é™¤
2. ç¡®å®šåˆå§‹ä½å§¿
   1. å…ˆéªŒä¿¡æ¯
   2. å…¶ä»–ä¼ æ„Ÿå™¨çš„ä¿¡æ¯,æ¯”å¦‚è¯´,é‡Œç¨‹è®¡,IMUç­‰
   3. åœ¨æ²¡æœ‰ä»»ä½•å¤–éƒ¨ä¿¡æ¯çš„æƒ…å†µä¸‹å¯ä»¥ç”¨Feature detection + description + RANSAC
3. ç»†é…å‡†
   1. ICP
   2. NDT

